import{j as e}from"./ui-vendor-L3tEH77r.js";import{r as b,L as t}from"./react-vendor-BE_oCUfB.js";import{u as N,B as i}from"./index-Ecy2JF11.js";import{C as v,b as _,c as w,a as y}from"./card-CmZssqpE.js";import{B as x}from"./badge-CJvgHdUf.js";import{u as C}from"./use-alliances-polling-DYcfHd-S.js";import{u as k}from"./use-matches-polling-Bn1u13f-.js";import{c as A}from"./rankings-xXtYs_rO.js";import{R as L}from"./robot-image-Bcp4jQFy.js";import{g as m,U as R}from"./icons-vendor-NdmwdHec.js";import"./supabase-vendor-BfNnX3KH.js";import"./utils-vendor-BC32Okw2.js";import"./query-vendor-DjGQMdFW.js";function V(){const{user:d}=N(),{alliances:l,isLoading:u,error:h}=C(),{matches:c,isLoading:g,error:j}=k(),p=b.useMemo(()=>!l.length||!c.length?[]:A(l,c.map(s=>({red_alliance_id:s.red_alliance_id,blue_alliance_id:s.blue_alliance_id,red_score:s.red_score,blue_score:s.blue_score,red_auto_score:s.red_auto_score,blue_auto_score:s.blue_auto_score,red_coral_rp:!!s.red_coral_rp,red_auto_rp:!!s.red_auto_rp,red_barge_rp:!!s.red_barge_rp,blue_coral_rp:!!s.blue_coral_rp,blue_auto_rp:!!s.blue_auto_rp,blue_barge_rp:!!s.blue_barge_rp}))),[l,c]),f=u||g,n=h||j;return f?e.jsx("p",{children:"Loading alliances..."}):n?e.jsxs("p",{className:"text-red-600",children:["Error: ",n]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold",children:"Alliances"})}),d&&e.jsx("div",{className:"flex gap-3",children:e.jsx(i,{variant:"outline",asChild:!0,children:e.jsxs(t,{to:"/alliances/edit",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Edit Alliances"]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:l.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(R,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Alliances Yet"}),e.jsx("p",{className:"text-sm",children:"Create your first alliance to get started"})]}),d&&e.jsx(i,{asChild:!0,children:e.jsx(t,{to:"/alliances/edit",children:"Create Alliance"})})]}):l.map(s=>{const r=p.find(a=>a.id===s.id);return e.jsxs(v,{className:"group hover:shadow-lg transition-all duration-200",children:[e.jsx(_,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-muted flex-shrink-0 ring-2 ring-border",children:s.emblem_image_url?e.jsx("img",{src:s.emblem_image_url,alt:`${s.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl font-bold text-muted-foreground bg-gradient-to-br from-primary/20 to-primary/10",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(w,{className:"text-xl group-hover:text-primary transition-colors",children:e.jsx(t,{to:`/alliances/${s.id}`,className:"hover:underline",children:s.name})}),r&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(x,{className:"text-xs bg-secondary text-secondary-foreground",children:["#",r.rank," Rank"]}),e.jsxs(x,{className:"text-xs border border-border bg-background",children:[r.avgRp.toFixed(1)," Avg RP"]})]})]})]}),d&&e.jsx(i,{variant:"ghost",size:"sm",asChild:!0,className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(t,{to:`/alliances/${s.id}`,children:e.jsx(m,{className:"w-4 h-4"})})})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Team Roster"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.teams.map((a,o)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/30",children:[e.jsx("div",{className:"w-8 h-8 rounded overflow-hidden bg-background flex-shrink-0",children:a?e.jsx(L,{team:a,className:"w-full h-full"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-xs text-muted-foreground bg-background",children:"?"})}),e.jsx("div",{className:"min-w-0 flex-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-sm",children:a.number}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:a.name})]}):e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Slot ",o+1]})})]},o))})]}),r&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:r.wins}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Wins"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r.losses}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Losses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.ties}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Ties"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.avgScore.toFixed(0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Score"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(i,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsx(t,{to:`/alliances/${s.id}`,children:"View Details"})}),d&&e.jsx(i,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsx(t,{to:"/alliances/edit",children:"Edit"})})]})]})]},s.id)})})]})}export{V as default};
