function _(n,i){if(!n.length)return[];const l=new Map;n.forEach(e=>{l.set(e.id,{id:e.id,name:e.name,emblem_image_url:e.emblem_image_url,played:0,wins:0,losses:0,ties:0,totalRp:0,totalScore:0,countedScoreMatches:0,totalAutoScore:0,countedAutoScoreMatches:0})});const a=(e,o)=>{const r=l.get(e);r&&(r.totalRp+=o)};for(const e of i){const o=l.get(e.red_alliance_id),r=l.get(e.blue_alliance_id);!o||!r||!(e.red_score!=null&&e.blue_score!=null)||(o.played+=1,r.played+=1,e.red_score>e.blue_score?(o.wins+=1,r.losses+=1,a(o.id,3)):e.red_score<e.blue_score?(r.wins+=1,o.losses+=1,a(r.id,3)):(o.ties+=1,r.ties+=1,a(o.id,1),a(r.id,1)),a(o.id,(e.red_coral_rp?1:0)+(e.red_auto_rp?1:0)+(e.red_barge_rp?1:0)),a(r.id,(e.blue_coral_rp?1:0)+(e.blue_auto_rp?1:0)+(e.blue_barge_rp?1:0)),o.totalScore+=e.red_score,o.countedScoreMatches+=1,r.totalScore+=e.blue_score,r.countedScoreMatches+=1,o.totalAutoScore+=e.red_auto_score??0,o.countedAutoScoreMatches+=1,r.totalAutoScore+=e.blue_auto_score??0,r.countedAutoScoreMatches+=1)}const u=Array.from(l.values()).map(e=>{const o=e.played>0?e.totalRp/e.played:0,r=e.countedScoreMatches>0?e.totalScore/e.countedScoreMatches:0,c=e.countedAutoScoreMatches>0?e.totalAutoScore/e.countedAutoScoreMatches:0;return{...e,avgRp:o,avgScore:r,avgAutoScore:c}});function s(e,o){let r=0,c=0;for(const t of i)(t.red_alliance_id===e||t.blue_alliance_id===e)&&(t.red_alliance_id===o||t.blue_alliance_id===o)&&(t.red_score==null||t.blue_score==null||(t.red_score>t.blue_score?t.red_alliance_id===e?r++:t.red_alliance_id===o&&c++:t.blue_score>t.red_score&&(t.blue_alliance_id===e?r++:t.blue_alliance_id===o&&c++)));return{aWins:r,bWins:c}}return u.sort((e,o)=>{if(o.avgRp!==e.avgRp)return o.avgRp-e.avgRp;const{aWins:r,bWins:c}=s(e.id,o.id);return r!==c?c-r:o.avgScore!==e.avgScore?o.avgScore-e.avgScore:o.avgAutoScore!==e.avgAutoScore?o.avgAutoScore-e.avgAutoScore:e.name.localeCompare(o.name)}),u.map((e,o)=>({id:e.id,name:e.name,emblem_image_url:e.emblem_image_url,played:e.played,wins:e.wins,losses:e.losses,ties:e.ties,avgRp:e.avgRp,avgScore:e.avgScore,avgAutoScore:e.avgAutoScore,rank:o+1}))}export{_ as c};
