import{j as a,s as o}from"./index-BbsRpNjG.js";import{M as b}from"./match-card-BF1p-NvG.js";import{u as d}from"./useQuery-CDvurSQj.js";async function f(){const{data:s,error:r}=await o.from("alliances").select("id, name").order("name");if(r)throw r;return s??[]}async function p(){const{data:s,error:r}=await o.from("matches").select("id, name, red_alliance_id, blue_alliance_id, scheduled_at, red_score, blue_score, red_coral_rp, red_auto_rp, red_barge_rp, blue_coral_rp, blue_auto_rp, blue_barge_rp, red:alliances!matches_red_alliance_id_fkey(name), blue:alliances!matches_blue_alliance_id_fkey(name)").order("scheduled_at",{ascending:!0});if(r)throw r;return s??[]}function j(){const{data:s=[],isLoading:r,error:u}=d({queryKey:["alliances","list"],queryFn:f}),{data:n=[],isLoading:_,error:h}=d({queryKey:["matches","list"],queryFn:p});function l(e){return s.find(c=>c.id===e)?.name??e}const i=r||_,t=u||h;return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Matches"}),i&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loadingâ€¦"}),t&&a.jsx("p",{className:"text-sm text-red-600",children:String(t)}),!i&&!t&&a.jsx("div",{className:"grid gap-3",children:n.length===0?a.jsx("p",{className:"text-muted-foreground",children:"No matches yet. Use the Schedule page to create matches."}):a.jsx("ul",{className:"grid gap-2",children:n.map(e=>a.jsx("li",{children:(()=>{const c=Array.isArray(e.red)?e.red[0]?.name??l(e.red_alliance_id):e.red?.name??l(e.red_alliance_id),m=Array.isArray(e.blue)?e.blue[0]?.name??l(e.blue_alliance_id):e.blue?.name??l(e.blue_alliance_id);return a.jsx(b,{title:e.name??void 0,scheduledAt:e.scheduled_at,redName:c,blueName:m,redScore:e.red_score,blueScore:e.blue_score,showRelativeTime:!0,editHref:`/matches/${e.id}`})})()},e.id))})})]})}export{j as default};
