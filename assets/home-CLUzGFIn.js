import{c as A,j as e,r as _,L as m,g as p}from"./index-WvZcqDcg.js";import{B as j}from"./button-BjoTGIGe.js";import{C as d,a as n,b as x,c as o}from"./card-Dnt-Pamn.js";import{T,B as S}from"./badge-FhSNMlHL.js";import{S as I}from"./separator-DoBxfjht.js";import{C as g,M as C}from"./match-card-Bcw0fAh0.js";import{u as k}from"./use-matches-polling-BtT3E1gu.js";import{u as E}from"./use-alliances-polling-CV8EJDca.js";import{M as D}from"./matches-status-DiBYL4E7.js";import{c as R}from"./rankings-2yAB9IBR.js";import{C as M}from"./square-pen-BAC17ZOz.js";import{U as f}from"./users-DMdOr_fs.js";import{T as B}from"./trending-up-DkZQ6DMR.js";import"./useQuery-DTQ6mRtF.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],y=A("history",F);function H({title:a,actions:l,className:h}){return e.jsxs("div",{className:`flex items-center justify-between ${h??""}`,children:[e.jsx("h1",{className:"text-2xl font-semibold",children:a}),l]})}function b({children:a,className:l}){return e.jsx("p",{className:`text-sm text-muted-foreground ${l||""}`,children:a})}function Z(){const{alliances:a}=E(),{matches:l,isLoading:h,error:u}=k();function N(s){return a.find(t=>t.id===s)?.name??s}const L=_.useMemo(()=>R(a,l.map(s=>({red_alliance_id:s.red_alliance_id,blue_alliance_id:s.blue_alliance_id,red_score:s.red_score,blue_score:s.blue_score,red_coral_rp:!!s.red_coral_rp,red_auto_rp:!!s.red_auto_rp,red_barge_rp:!!s.red_barge_rp,blue_coral_rp:!!s.blue_coral_rp,blue_auto_rp:!!s.blue_auto_rp,blue_barge_rp:!!s.blue_barge_rp}))).slice(0,8),[a,l]),r=_.useMemo(()=>{const s=l.filter(t=>t.red_score==null&&t.blue_score==null);return s.sort((t,i)=>{const v=t.scheduled_at?new Date(t.scheduled_at).getTime():Number.NEGATIVE_INFINITY,w=i.scheduled_at?new Date(i.scheduled_at).getTime():Number.NEGATIVE_INFINITY;return v-w}),s.slice(0,10)},[l]),c=_.useMemo(()=>{const s=l.filter(t=>t.red_score!=null&&t.blue_score!=null);return s.sort((t,i)=>{const v=t.scheduled_at?new Date(t.scheduled_at).getTime():Number.NEGATIVE_INFINITY;return(i.scheduled_at?new Date(i.scheduled_at).getTime():Number.NEGATIVE_INFINITY)-v}),s.slice(0,5)},[l]);return e.jsxs("div",{className:"space-y-8",children:[e.jsx(H,{title:"Dashboard",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{}),e.jsx(m,{to:"/matches",children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Matches"]})}),e.jsx(m,{to:"/rankings",children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Rankings"]})}),e.jsx(m,{to:"/schedule",children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Schedule"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total Matches"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.length," upcoming, ",c.length," completed"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Alliances"}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.reduce((s,t)=>s+t.teams.filter(Boolean).length,0)," teams assigned"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Upcoming"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Next match ",r[0]?.scheduled_at?new Date(r[0].scheduled_at).toLocaleDateString():"TBD"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Completed"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.length>0?`Last: ${new Date(c[0].scheduled_at).toLocaleDateString()}`:"No matches yet"})]})]})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-5 w-5 text-blue-600"}),e.jsx(x,{children:"Upcoming Matches"})]}),e.jsx(m,{to:"/matches/preview",children:e.jsx(j,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:"Preview"})})]}),e.jsxs(b,{children:["Next ",r.length," scheduled matches"]})]}),e.jsxs(o,{children:[h&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading matches..."})}),u&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-sm text-red-600",children:["Error: ",String(u)]})}),!h&&!u&&(r.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(g,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No upcoming matches"}),e.jsx("p",{className:"text-xs",children:"Create a schedule to get started"})]}):e.jsx("div",{className:"space-y-3",children:r.map(s=>{const t=p(s.red,N(s.red_alliance_id)),i=p(s.blue,N(s.blue_alliance_id));return e.jsxs("div",{children:[e.jsx(C,{title:s.name??void 0,scheduledAt:s.scheduled_at,redName:t,blueName:i,redScore:s.red_score,blueScore:s.blue_score,showRelativeTime:!0,editHref:`/matches/${s.id}`,matchId:s.id}),r.indexOf(s)<r.length-1&&e.jsx(I,{className:"mt-3"})]},s.id)})}))]})]}),e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5 text-green-600"}),e.jsx(x,{children:"Recent Matches"})]}),e.jsxs(b,{children:["Last ",c.length," completed matches"]})]}),e.jsxs(o,{children:[h&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading matches..."})}),u&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-sm text-red-600",children:["Error: ",String(u)]})}),!h&&!u&&(c.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No completed matches"}),e.jsx("p",{className:"text-xs",children:"Complete some matches to see results here"})]}):e.jsx("div",{className:"space-y-3",children:c.map(s=>{const t=p(s.red,N(s.red_alliance_id)),i=p(s.blue,N(s.blue_alliance_id));return e.jsxs("div",{children:[e.jsx(C,{title:s.name??void 0,scheduledAt:s.scheduled_at,redName:t,blueName:i,redScore:s.red_score,blueScore:s.blue_score,showRelativeTime:!0,editHref:`/matches/${s.id}`,matchId:s.id}),c.indexOf(s)<c.length-1&&e.jsx(I,{className:"mt-3"})]},s.id)})}))]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"h-5 w-5 text-yellow-600"}),e.jsx(x,{children:"Top Rankings"})]}),e.jsx(b,{children:"Current standings based on match results"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"space-y-4",children:L.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold",children:s.rank}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.played," matches played"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-right",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.avgRp.toFixed(3)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg RP"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.avgScore.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Score"})]})]})]},s.id))}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsx(m,{to:"/rankings",children:e.jsxs(j,{variant:"outline",className:"w-full",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"View All Rankings"]})})})]})]}),e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-5 w-5 text-purple-600"}),e.jsx(x,{children:"Alliances"})]}),e.jsx(b,{children:"Active alliances and team assignments"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:a.slice(0,8).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx(m,{to:`/alliances/${s.id}`,className:"font-medium hover:underline",children:s.name})]}),e.jsxs(S,{className:"ml-2",children:[s.teams.filter(Boolean).length,"/4 teams"]})]},s.id))}),a.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(f,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No alliances created yet"}),e.jsx("p",{className:"text-xs",children:"Create alliances to organize teams"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsx(m,{to:"/alliances",children:e.jsxs(j,{variant:"outline",className:"w-full",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Manage Alliances"]})})})]})]})]})}export{Z as default};
