import{j as e}from"./ui-vendor-CDBhOMS0.js";import{L as i}from"./react-vendor-CNeAGCso.js";import{u as N,B as a}from"./index-eDSu_bsY.js";import{C as p,b as v,c as b,a as w}from"./card-BxdVKt_c.js";import{B as o}from"./badge-BnvX8RUh.js";import{u as y}from"./use-alliances-polling-D0xxy3GB.js";import{u as C}from"./use-rankings-polling-uRgM-_R_.js";import{R as k}from"./robot-image-CeQQZJTi.js";import{g as x,U as A}from"./icons-vendor-Db1BlRWD.js";import"./supabase-vendor-B8N91wlh.js";import"./utils-vendor-DCj5grse.js";import"./query-vendor-BivveeUn.js";import"./use-matches-polling-CRwDu3EC.js";function H(){const{user:l}=N(),{alliances:d,isLoading:m,error:h}=y(),{rankings:u,isLoading:g,error:j}=C(),f=m||g,n=h||j;return f?e.jsx("p",{children:"Loading alliances..."}):n?e.jsxs("p",{className:"text-red-600",children:["Error: ",n]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold",children:"Alliances"})}),l&&e.jsx("div",{className:"flex gap-3",children:e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs(i,{to:"/alliances/edit",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Edit Alliances"]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:d.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(A,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Alliances Yet"}),e.jsx("p",{className:"text-sm",children:"Create your first alliance to get started"})]}),l&&e.jsx(a,{asChild:!0,children:e.jsx(i,{to:"/alliances/edit",children:"Create Alliance"})})]}):d.map(s=>{const r=u.find(t=>t.id===s.id);return e.jsxs(p,{className:"group hover:shadow-lg transition-all duration-200",children:[e.jsx(v,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-muted flex-shrink-0 ring-2 ring-border",children:s.emblem_image_url?e.jsx("img",{src:s.emblem_image_url,alt:`${s.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl font-bold text-muted-foreground bg-gradient-to-br from-primary/20 to-primary/10",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(b,{className:"text-xl group-hover:text-primary transition-colors",children:e.jsx(i,{to:`/alliances/${s.id}`,className:"hover:underline",children:s.name})}),r&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(o,{className:"text-xs bg-secondary text-secondary-foreground",children:["#",r.rank," Rank"]}),e.jsxs(o,{className:"text-xs border border-border bg-background",children:[r.avgRp.toFixed(1)," Avg RP"]})]})]})]}),l&&e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(i,{to:`/alliances/${s.id}`,children:e.jsx(x,{className:"w-4 h-4"})})})]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Team Roster"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.teams.map((t,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/30",children:[e.jsx("div",{className:"w-8 h-8 rounded overflow-hidden bg-background flex-shrink-0",children:t?e.jsx(k,{team:t,className:"w-full h-full"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-xs text-muted-foreground bg-background",children:"?"})}),e.jsx("div",{className:"min-w-0 flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-sm",children:t.number}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:t.name})]}):e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Slot ",c+1]})})]},c))})]}),r&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:r.wins}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Wins"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r.losses}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Losses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.ties}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Ties"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.avgScore.toFixed(0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Score"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(a,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsx(i,{to:`/alliances/${s.id}`,children:"View Details"})}),l&&e.jsx(a,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsx(i,{to:"/alliances/edit",children:"Edit"})})]})]})]},s.id)})})]})}export{H as default};
