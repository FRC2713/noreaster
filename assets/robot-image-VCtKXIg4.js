import{j as o,w as d}from"./ui-vendor-DO8HNBy7.js";import{r as c}from"./react-vendor-BE_oCUfB.js";import{s as f}from"./index-CxnTeCY0.js";function g({...e}){return o.jsx(d,{"data-slot":"aspect-ratio",...e})}const l=new Map;function x(e){const s="/robots/",t=e.indexOf(s);return t===-1?null:e.slice(t+s.length)}async function m(e){const s=x(e);if(!s)return e;const t=l.get(e),n=Date.now();if(t&&t.expiresAt>n+6e4)return t.url;try{const{data:r}=await f.storage.from("robots").createSignedUrl(s,3600);if(r?.signedUrl)return l.set(e,{url:r.signedUrl,expiresAt:n+3600*1e3}),r.signedUrl}catch(r){console.warn("Failed to generate signed URL:",r)}return e}function j({team:e,className:s,ratio:t=1}){const[n,r]=c.useState(null);return c.useEffect(()=>{let a=!1;return(async()=>{const i=e.robot_image_url;if(!i){r(null);return}const u=await m(i);a||r(u)})(),()=>{a=!0}},[e.robot_image_url]),o.jsx(g,{ratio:t,className:s,children:n?o.jsx("img",{src:n,alt:`${e.number} ${e.name}`,className:"h-full w-full object-cover"}):o.jsx("div",{className:"h-full w-full grid place-items-center bg-muted",children:o.jsx("div",{className:"text-2xl font-semibold",children:e.number})})})}export{g as A,j as R};
