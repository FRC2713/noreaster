import{j as e}from"./ui-vendor-L3tEH77r.js";import{u as b}from"./use-matches-polling-Bn1u13f-.js";import{u as j}from"./use-alliances-polling-DYcfHd-S.js";import{R as x}from"./rankings-table-Bj-g5yX1.js";import{P as m,U as g}from"./played-match-card-B29MB4VP.js";import{c as v}from"./rankings-xXtYs_rO.js";import{r as w}from"./react-vendor-BE_oCUfB.js";import"./query-vendor-DjGQMdFW.js";import"./index-Ecy2JF11.js";import"./supabase-vendor-BfNnX3KH.js";import"./utils-vendor-BC32Okw2.js";import"./icons-vendor-NdmwdHec.js";import"./card-CmZssqpE.js";import"./badge-CJvgHdUf.js";function F(){const{matches:t,isLoading:a,error:r}=b(),{alliances:p}=j(),h=w.useMemo(()=>{const s=t.map(l=>({id:l.id,red_alliance_id:l.red_alliance_id,blue_alliance_id:l.blue_alliance_id,red_score:l.red_score,blue_score:l.blue_score,red_auto_score:l.red_auto_score,blue_auto_score:l.blue_auto_score,red_coral_rp:!!l.red_coral_rp,red_auto_rp:!!l.red_auto_rp,red_barge_rp:!!l.red_barge_rp,blue_coral_rp:!!l.blue_coral_rp,blue_auto_rp:!!l.blue_auto_rp,blue_barge_rp:!!l.blue_barge_rp}));return v(p,s)},[p,t]),u=new Date,o=t.filter(s=>s.red_score!==null&&s.red_score!==void 0&&s.blue_score!==null&&s.blue_score!==void 0).sort((s,l)=>new Date(l.scheduled_at).getTime()-new Date(s.scheduled_at).getTime()).slice(0,5),_=t.filter(s=>(s.red_score===null||s.red_score===void 0||s.blue_score===null||s.blue_score===void 0)&&new Date(s.scheduled_at)>u).sort((s,l)=>new Date(s.scheduled_at).getTime()-new Date(l.scheduled_at).getTime()),i=[];i.push(...o);const f=6-i.length;return f>0&&i.push(..._.slice(0,f)),e.jsx("div",{className:"w-full min-h-screen bg-background",children:e.jsxs("div",{className:"w-full p-2 sm:p-4",children:[e.jsxs("div",{className:"flex flex-col h-screen lg:hidden",children:[e.jsx("div",{className:"w-full flex-shrink-0",children:e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{src:"https://player.twitch.tv/?channel=robosportsnetwork&parent=frc2713.github.io",height:"100%",width:"100%",allowFullScreen:!0,className:"w-full h-full"})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 p-1",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Matches"}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading matches..."}),r&&e.jsx("p",{className:"text-sm text-red-600",children:String(r)}),!a&&!r&&e.jsx("div",{className:"space-y-2",children:i.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No matches available"}):i.map((s,l)=>{const d=(s.red_score===null||s.red_score===void 0||s.blue_score===null||s.blue_score===void 0)&&new Date(s.scheduled_at)>u,n=o.includes(s),c=d&&l===o.length;return e.jsx("div",{className:`${c?"ring-2 ring-blue-500 ring-opacity-75 rounded-lg p-1":""}`,children:n?e.jsx(m,{match:s,dense:!0}):e.jsx(g,{match:s,dense:!0})},s.id)})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rankings"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(x,{rows:h,showWLT:!0,showRank:!0,size:"sm"})})]})]})]}),e.jsxs("div",{className:"hidden lg:flex xl:hidden flex-col h-screen",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-shrink-0",children:[e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{src:"https://player.twitch.tv/?channel=robosportsnetwork&parent=frc2713.github.io",height:"100%",width:"100%",allowFullScreen:!0,className:"w-full h-full"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Matches"}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading matches..."}),r&&e.jsx("p",{className:"text-sm text-red-600",children:String(r)}),!a&&!r&&e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:i.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No matches available"}):i.map((s,l)=>{const d=(s.red_score===null||s.red_score===void 0||s.blue_score===null||s.blue_score===void 0)&&new Date(s.scheduled_at)>u,n=o.includes(s),c=d&&l===o.length;return e.jsx("div",{className:`${c?"ring-2 ring-blue-500 ring-opacity-75 rounded-lg p-1":""}`,children:n?e.jsx(m,{match:s,dense:!0}):e.jsx(g,{match:s,dense:!0})},s.id)})})]})]}),e.jsxs("div",{className:"w-full flex-1 overflow-y-auto mt-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rankings"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(x,{rows:h,showWLT:!0,showRank:!0,size:"sm"})})]})]}),e.jsxs("div",{className:"hidden xl:grid xl:grid-cols-3 gap-4 h-full",children:[e.jsxs("div",{className:"xl:col-span-2 flex flex-col gap-4 h-full",children:[e.jsx("div",{className:"h-[500px]",children:e.jsx("div",{className:"h-full bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{src:"https://player.twitch.tv/?channel=robosportsnetwork&parent=frc2713.github.io",height:"100%",width:"100%",allowFullScreen:!0,className:"w-full h-full"})})}),e.jsxs("div",{className:"flex-1 min-h-0",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rankings"}),e.jsx("div",{className:"h-full overflow-hidden",children:e.jsx(x,{rows:h,showWLT:!0,showRank:!0,size:"sm"})})]})]}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Matches"}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading matches..."}),r&&e.jsx("p",{className:"text-sm text-red-600",children:String(r)}),!a&&!r&&e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 p-1",children:i.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No matches available"}):i.map((s,l)=>{const d=(s.red_score===null||s.red_score===void 0||s.blue_score===null||s.blue_score===void 0)&&new Date(s.scheduled_at)>u,n=o.includes(s),c=d&&l===o.length;return e.jsx("div",{className:`${c?"ring-2 ring-blue-500 ring-opacity-75 rounded-lg p-1":""}`,children:n?e.jsx(m,{match:s,dense:!0}):e.jsx(g,{match:s,dense:!0})},s.id)})})]})]})]})})}export{F as default};
