import{j as e}from"./ui-vendor-CWhAcX5I.js";import{L as j}from"./react-vendor-BE_oCUfB.js";import{B as g}from"./badge-CAycIRdO.js";import{C as h,a as p}from"./card-DCxV3Rmh.js";import{c as N}from"./query-vendor-Cs1Z885O.js";import{s as _}from"./index-DDBma67i.js";import{C as y,a as v,T as u}from"./icons-vendor-NdmwdHec.js";function k(l){const c=new Date(l).getTime(),f=Date.now(),i=Math.round((c-f)/1e3),r=Math.abs(i),o=60,m=60*o,n=24*m;let a,t;r<m?(a=Math.max(1,Math.round(r/o)),t="min"):r<n?(a=Math.max(1,Math.round(r/m)),t="hr"):(a=Math.max(1,Math.round(r/n)),t=a===1?"day":"days");const x=`${a} ${t}`;return i>0?`in ${x}`:i<0?`${x} ago`:"now"}function T({match:l,right:c,showRelativeTime:f=!1,dense:i=!1}){const{data:r}=N({queryKey:["alliances","byId",l.red_alliance_id],queryFn:async()=>{if(!l.red_alliance_id)return null;const{data:s,error:d}=await _.from("alliances").select("id, name, emblem_image_url").eq("id",l.red_alliance_id).single();if(d)throw d;return s},enabled:!!l.red_alliance_id}),{data:o}=N({queryKey:["alliances","byId",l.blue_alliance_id],queryFn:async()=>{if(!l.blue_alliance_id)return null;const{data:s,error:d}=await _.from("alliances").select("id, name, emblem_image_url").eq("id",l.blue_alliance_id).single();if(d)throw d;return s},enabled:!!l.blue_alliance_id});if(!l)return null;const m=Array.isArray(l.red)?l.red.map(s=>s.name).join(", "):l.red?.name||r?.name||l.red_alliance_id,n=Array.isArray(l.blue)?l.blue.map(s=>s.name).join(", "):l.blue?.name||o?.name||l.blue_alliance_id;let a="Unscheduled",t=e.jsx(y,{className:"w-4 h-4"}),x="text-muted-foreground";if(l.scheduled_at)if(f){const s=new Date(l.scheduled_at).getTime(),d=Math.abs(s-Date.now()),w=720*60*1e3;a=d>w?new Date(l.scheduled_at).toLocaleString():k(l.scheduled_at),d<3600*1e3?(x="text-red-600",t=e.jsx(v,{className:"w-4 h-4"})):d<7200*1e3?(x="text-orange-600",t=e.jsx(v,{className:"w-4 h-4"})):d<360*60*1e3&&(x="text-yellow-600",t=e.jsx(v,{className:"w-4 h-4"}))}else a=new Date(l.scheduled_at).toLocaleString();if(i){const s=e.jsx(h,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer",children:e.jsxs(p,{className:"p-4 text-sm flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-base font-semibold text-foreground",children:l.name?.replace("Round ","R").replace("Match ","M")})})})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 rounded-md bg-red-50/50 dark:bg-red-950/10 flex-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:r?.emblem_image_url?e.jsx("img",{src:r.emblem_image_url,alt:`${r.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"R"})}),e.jsx("h4",{className:"font-medium text-sm text-red-900 dark:text-red-100 text-center",children:m})]}),e.jsx("div",{className:"flex items-center gap-2 text-muted-foreground",children:e.jsx("span",{className:"text-sm font-medium",children:"VS"})}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 rounded-md bg-blue-50/50 dark:bg-blue-950/10 flex-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:o?.emblem_image_url?e.jsx("img",{src:o.emblem_image_url,alt:`${o.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"B"})}),e.jsx("h4",{className:"font-medium text-sm text-blue-900 dark:text-blue-100 text-center",children:n})]})]}),c&&e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("div",{onClick:d=>d.stopPropagation(),children:c})})]})});return l.id?e.jsx(j,{to:`/matches/details/${l.id}`,className:"block no-underline",children:s}):s}const b=e.jsx(h,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer min-h-[160px]",children:e.jsxs(p,{className:"p-6 text-base flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:l.name&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:l.name}),l.round&&l.match_number&&e.jsxs(g,{className:"text-sm px-3 py-1 h-7 font-medium",children:["R",l.round,"M",l.match_number]})]})}),e.jsxs("div",{className:`flex items-center gap-2 ${x}`,children:[t,e.jsx("span",{className:"text-base font-medium",children:a})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 rounded-xl bg-red-50/50 dark:bg-red-950/10 min-w-[14rem]",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:r?.emblem_image_url?e.jsx("img",{src:r.emblem_image_url,alt:`${r.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"R"})}),e.jsx("h4",{className:"font-bold text-xl text-red-900 dark:text-red-100 text-center max-w-[12rem] leading-tight",children:m}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"})]}),e.jsx("div",{className:"flex flex-col items-center gap-3",children:e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"VS"})}),e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 rounded-xl bg-blue-50/50 dark:bg-blue-950/10 min-w-[14rem]",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:o?.emblem_image_url?e.jsx("img",{src:o.emblem_image_url,alt:`${o.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"B"})}),e.jsx("h4",{className:"font-bold text-xl text-blue-900 dark:text-blue-100 text-center max-w-[12rem] leading-tight",children:n}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:c?e.jsx("div",{onClick:s=>s.stopPropagation(),children:c}):null})]})});return l.id?e.jsx(j,{to:`/matches/details/${l.id}`,className:"block no-underline",children:b}):b}function I({match:l,right:c,dense:f=!1}){const{data:i}=N({queryKey:["alliances","byId",l.red_alliance_id],queryFn:async()=>{if(!l.red_alliance_id)return null;const{data:s,error:d}=await _.from("alliances").select("id, name, emblem_image_url").eq("id",l.red_alliance_id).single();if(d)throw d;return s},enabled:!!l.red_alliance_id}),{data:r}=N({queryKey:["alliances","byId",l.blue_alliance_id],queryFn:async()=>{if(!l.blue_alliance_id)return null;const{data:s,error:d}=await _.from("alliances").select("id, name, emblem_image_url").eq("id",l.blue_alliance_id).single();if(d)throw d;return s},enabled:!!l.blue_alliance_id});if(!l)return null;const o=Array.isArray(l.red)?l.red.map(s=>s.name).join(", "):l.red?.name||i?.name||l.red_alliance_id,m=Array.isArray(l.blue)?l.blue.map(s=>s.name).join(", "):l.blue?.name||r?.name||l.blue_alliance_id,n=l.red_score!==void 0&&l.red_score!==null&&l.blue_score!==void 0&&l.blue_score!==null,a=n&&l.red_score>l.blue_score,t=n&&l.blue_score>l.red_score,x=n&&l.red_score===l.blue_score;if(f){const s=e.jsx(h,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer",children:e.jsxs(p,{className:"p-4 text-sm flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-base font-semibold text-foreground",children:l.name?.replace("Round ","R").replace("Match ","M")})})})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:`flex flex-col items-center gap-2 p-2 rounded-md transition-all duration-200 flex-1 ${a?"bg-red-50 dark:bg-red-950/30 border border-red-200":"bg-red-50/50 dark:bg-red-950/10"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:i?.emblem_image_url?e.jsx("img",{src:i.emblem_image_url,alt:`${i.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"R"})}),e.jsx("h4",{className:"font-medium text-sm text-red-900 dark:text-red-100 text-center",children:o}),n&&e.jsx("div",{className:`text-lg font-bold ${a?"text-red-700 dark:text-red-300":"text-red-600 dark:text-red-400"}`,children:l.red_score})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("span",{className:"text-sm font-medium",children:"VS"}),n&&e.jsxs("div",{className:"flex items-center gap-1",children:[a&&e.jsx(u,{className:"w-4 h-4 text-yellow-500"}),x&&e.jsx("span",{className:"text-xs font-bold text-yellow-600",children:"TIE"}),t&&e.jsx(u,{className:"w-4 h-4 text-yellow-500"})]})]}),e.jsxs("div",{className:`flex flex-col items-center gap-2 p-2 rounded-md transition-all duration-200 flex-1 ${t?"bg-blue-50 dark:bg-blue-950/30 border border-blue-200":"bg-blue-50/50 dark:bg-blue-950/10"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:r?.emblem_image_url?e.jsx("img",{src:r.emblem_image_url,alt:`${r.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"B"})}),e.jsx("h4",{className:"font-medium text-sm text-blue-900 dark:text-blue-100 text-center",children:m}),n&&e.jsx("div",{className:`text-lg font-bold ${t?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}`,children:l.blue_score})]})]}),c&&e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("div",{onClick:d=>d.stopPropagation(),children:c})})]})});return l.id?e.jsx(j,{to:`/matches/details/${l.id}`,className:"block no-underline",children:s}):s}const b=e.jsx(h,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer min-h-[160px]",children:e.jsxs(p,{className:"p-6 text-base flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:l.name&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:l.name}),l.round&&l.match_number&&e.jsxs(g,{className:"text-sm px-3 py-1 h-7 font-medium",children:["R",l.round,"M",l.match_number]})]})}),n&&e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs(g,{className:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800",children:[e.jsx(u,{className:"w-4 h-4 mr-1 text-red-600"}),"Red Wins"]}),t&&e.jsxs(g,{className:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",children:[e.jsx(u,{className:"w-4 h-4 mr-1 text-blue-600"}),"Blue Wins"]}),x&&e.jsx(g,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800",children:"Tie Game"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsx("div",{className:"flex flex-col items-center gap-3 min-w-[8rem]",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.red_coral_rp?"text-foreground":"text-muted-foreground/50"}`,children:[l.red_coral_rp&&e.jsx("span",{className:"text-green-600",children:"✓"}),e.jsx("span",{children:"Coral"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.red_auto_rp?"text-foreground":"text-muted-foreground/50"}`,children:[l.red_auto_rp&&e.jsx("span",{className:"text-green-600",children:"✓"}),e.jsx("span",{children:"Auto"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.red_barge_rp?"text-foreground":"text-muted-foreground/50"}`,children:[l.red_barge_rp&&e.jsx("span",{className:"text-green-600",children:"✓"}),e.jsx("span",{children:"Barge"})]})]})}),e.jsxs("div",{className:`
            flex flex-col items-center gap-4 p-6 rounded-xl transition-all duration-200
            ${a?"bg-red-50 dark:bg-red-950/30 shadow-md border-2 border-red-200":"bg-red-50/50 dark:bg-red-950/10"}
            min-w-[14rem]
          `,children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:i?.emblem_image_url?e.jsx("img",{src:i.emblem_image_url,alt:`${i.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"R"})}),e.jsx("h4",{className:"font-bold text-xl text-red-900 dark:text-red-100 text-center max-w-[12rem] leading-tight",children:o}),n&&e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`
                  text-4xl font-bold
                  ${a?"text-red-700 dark:text-red-300":"text-red-600 dark:text-red-400"}
                `,children:l.red_score}),l.red_auto_score!==null&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Auto: ",l.red_auto_score]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"VS"}),n&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a&&e.jsx(u,{className:"w-8 h-8 text-yellow-500"}),x&&e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:"TIE"}),t&&e.jsx(u,{className:"w-8 h-8 text-yellow-500"})]})]}),e.jsxs("div",{className:`
            flex flex-col items-center gap-4 p-6 rounded-xl transition-all duration-200
            ${t?"bg-blue-50 dark:bg-blue-950/30 shadow-md border-2 border-blue-200":"bg-blue-50/50 dark:bg-blue-950/10"}
            min-w-[14rem]
          `,children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:r?.emblem_image_url?e.jsx("img",{src:r.emblem_image_url,alt:`${r.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"B"})}),e.jsx("h4",{className:"font-bold text-xl text-blue-900 dark:text-blue-100 text-center max-w-[12rem] leading-tight",children:m}),n&&e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`
                  text-4xl font-bold
                  ${t?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}
                `,children:l.blue_score}),l.blue_auto_score!==null&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Auto: ",l.blue_auto_score]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})]}),e.jsx("div",{className:"flex flex-col items-center gap-3 min-w-[8rem]",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.blue_coral_rp?"text-foreground":"text-muted-foreground/50"}`,children:[e.jsx("span",{children:"Coral"}),l.blue_coral_rp&&e.jsx("span",{className:"text-green-600",children:"✓"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.blue_auto_rp?"text-foreground":"text-muted-foreground/50"}`,children:[e.jsx("span",{children:"Auto"}),l.blue_auto_rp&&e.jsx("span",{className:"text-green-600",children:"✓"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.blue_barge_rp?"text-foreground":"text-muted-foreground/50"}`,children:[e.jsx("span",{children:"Barge"}),l.blue_barge_rp&&e.jsx("span",{className:"text-green-600",children:"✓"})]})]})})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:c?e.jsx("div",{onClick:s=>s.stopPropagation(),children:c}):null})]})});return l.id?e.jsx(j,{to:`/matches/details/${l.id}`,className:"block no-underline",children:b}):b}export{I as P,T as U};
