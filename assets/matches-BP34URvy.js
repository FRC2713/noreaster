import{j as e}from"./ui-vendor-CDBhOMS0.js";import{r as v,L as k}from"./react-vendor-CNeAGCso.js";import{B as h}from"./badge-DSDoCdJ3.js";import{C as w,a as _}from"./card-DJYwy_Ja.js";import{u as S}from"./use-rankings-polling-DsZ54dWP.js";import{C as P,a as M,T as N}from"./icons-vendor-Dor2AXrm.js";import{u as C}from"./use-matches-polling-DH2tC6oT.js";import{u as L}from"./use-alliances-polling-CkMOygQH.js";import{S as g}from"./skeleton-DzP459aa.js";import"./index-DiB4IOcY.js";import"./supabase-vendor-B8N91wlh.js";import"./utils-vendor-DCj5grse.js";import"./query-vendor-BivveeUn.js";import"./use-smart-polling-Dq1UeSm6.js";function T(c){const l=new Date(c).getTime(),d=Date.now(),u=Math.round((l-d)/1e3),a=Math.abs(u),o=60,i=60*o,x=24*i;let s,r;a<i?(s=Math.max(1,Math.round(a/o)),r="min"):a<x?(s=Math.max(1,Math.round(a/i)),r="hr"):(s=Math.max(1,Math.round(a/x)),r=s===1?"day":"days");const n=`${s} ${r}`;return u>0?`in ${n}`:u<0?`${n} ago`:"now"}const B=v.memo(function({match:l,right:d,showRelativeTime:u=!1,dense:a=!1}){const{rankings:o}=S();if(!l)return null;const i="redAlliance"in l?l.redAlliance:null,x="blueAlliance"in l?l.blueAlliance:null,s=l.match_type==="playoff",r=s&&l.red_alliance_id?o.find(m=>m.id===l.red_alliance_id)?.rank:null,n=s&&l.blue_alliance_id?o.find(m=>m.id===l.blue_alliance_id)?.rank:null,t=Array.isArray(l.red)?l.red.map(m=>m.name).join(", "):l.red?.name||i?.name||l.red_alliance_id,b=Array.isArray(l.blue)?l.blue.map(m=>m.name).join(", "):l.blue?.name||x?.name||l.blue_alliance_id;let f="Unscheduled",j=e.jsx(P,{className:"w-4 h-4"}),y="text-muted-foreground";if(l.scheduled_at)if(u){const m=new Date(l.scheduled_at).getTime(),p=Math.abs(m-Date.now()),R=720*60*1e3;f=p>R?new Date(l.scheduled_at).toLocaleString():T(l.scheduled_at),p<3600*1e3?(y="text-red-600",j=e.jsx(M,{className:"w-4 h-4"})):p<7200*1e3?(y="text-orange-600",j=e.jsx(M,{className:"w-4 h-4"})):p<360*60*1e3&&(y="text-yellow-600",j=e.jsx(M,{className:"w-4 h-4"}))}else f=new Date(l.scheduled_at).toLocaleString();if(a){const m=e.jsx(w,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer",children:e.jsxs(_,{className:"p-4 text-sm flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("h3",{className:"text-base font-semibold text-foreground",children:[s&&"Playoff ",l.name?.replace("Round ","R").replace("Match ","M")]})})})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 rounded-md bg-red-50/50 dark:bg-red-950/10 flex-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:i?.emblem_image_url?e.jsx("img",{src:i.emblem_image_url,alt:`${i.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"R"})}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("h4",{className:"font-medium text-sm text-red-900 dark:text-red-100 text-center",children:t}),r&&e.jsxs(h,{variant:"secondary",className:"text-xs px-2 py-0.5 h-5",children:["#",r]})]})]}),e.jsx("div",{className:"flex items-center gap-2 text-muted-foreground",children:e.jsx("span",{className:"text-sm font-medium",children:"VS"})}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 rounded-md bg-blue-50/50 dark:bg-blue-950/10 flex-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:x?.emblem_image_url?e.jsx("img",{src:x.emblem_image_url,alt:`${x.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"B"})}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("h4",{className:"font-medium text-sm text-blue-900 dark:text-blue-100 text-center",children:b}),n&&e.jsxs(h,{variant:"secondary",className:"text-xs px-2 py-0.5 h-5",children:["#",n]})]})]})]}),d&&e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("div",{onClick:p=>p.stopPropagation(),children:d})})]})});return l.id?e.jsx(k,{to:`/matches/details/${l.id}`,className:"block no-underline",children:m}):m}const $=e.jsx(w,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer min-h-[160px]",children:e.jsxs(_,{className:"p-6 text-base flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:l.name&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h3",{className:"text-xl font-bold text-foreground",children:[s&&"Playoff ",l.name]}),l.round&&l.match_number&&e.jsxs(h,{className:"text-sm px-3 py-1 h-7 font-medium",children:[s&&"Playoff ","R",l.round,"M",l.match_number]})]})}),e.jsxs("div",{className:`flex items-center gap-2 ${y}`,children:[j,e.jsx("span",{className:"text-base font-medium",children:f})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 rounded-xl bg-red-50/50 dark:bg-red-950/10 min-w-[14rem]",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:i?.emblem_image_url?e.jsx("img",{src:i.emblem_image_url,alt:`${i.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"R"})}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-xl text-red-900 dark:text-red-100 text-center max-w-[12rem] leading-tight",children:t}),r&&e.jsxs(h,{variant:"secondary",className:"text-sm px-3 py-1 h-6",children:["#",r]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"})]}),e.jsx("div",{className:"flex flex-col items-center gap-3",children:e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"VS"})}),e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 rounded-xl bg-blue-50/50 dark:bg-blue-950/10 min-w-[14rem]",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:x?.emblem_image_url?e.jsx("img",{src:x.emblem_image_url,alt:`${x.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"B"})}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-xl text-blue-900 dark:text-blue-100 text-center max-w-[12rem] leading-tight",children:b}),n&&e.jsxs(h,{variant:"secondary",className:"text-sm px-3 py-1 h-6",children:["#",n]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:d?e.jsx("div",{onClick:m=>m.stopPropagation(),children:d}):null})]})});return l.id?e.jsx(k,{to:`/matches/details/${l.id}`,className:"block no-underline",children:$}):$}),E=v.memo(function({match:l,right:d,dense:u=!1}){const a="redAlliance"in l?l.redAlliance:null,o="blueAlliance"in l?l.blueAlliance:null;if(!l)return null;const i=Array.isArray(l.red)?l.red.map(f=>f.name).join(", "):l.red?.name||a?.name||l.red_alliance_id,x=Array.isArray(l.blue)?l.blue.map(f=>f.name).join(", "):l.blue?.name||o?.name||l.blue_alliance_id,s=l.red_score!==void 0&&l.red_score!==null&&l.blue_score!==void 0&&l.blue_score!==null,r=s&&l.red_score>l.blue_score,n=s&&l.blue_score>l.red_score,t=s&&l.red_score===l.blue_score;if(u){const f=e.jsx(w,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer",children:e.jsxs(_,{className:"p-4 text-sm flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-base font-semibold text-foreground",children:l.name?.replace("Round ","R").replace("Match ","M")})})})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:`flex flex-col items-center gap-2 p-2 rounded-md transition-all duration-200 flex-1 ${r?"bg-red-50 dark:bg-red-950/30 border border-red-200":"bg-red-50/50 dark:bg-red-950/10"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:a?.emblem_image_url?e.jsx("img",{src:a.emblem_image_url,alt:`${a.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"R"})}),e.jsx("h4",{className:"font-medium text-sm text-red-900 dark:text-red-100 text-center",children:i}),s&&e.jsx("div",{className:`text-lg font-bold ${r?"text-red-700 dark:text-red-300":"text-red-600 dark:text-red-400"}`,children:l.red_score})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("span",{className:"text-sm font-medium",children:"VS"}),s&&e.jsxs("div",{className:"flex items-center gap-1",children:[r&&e.jsx(N,{className:"w-4 h-4 text-yellow-500"}),t&&e.jsx("span",{className:"text-xs font-bold text-yellow-600",children:"TIE"}),n&&e.jsx(N,{className:"w-4 h-4 text-yellow-500"})]})]}),e.jsxs("div",{className:`flex flex-col items-center gap-2 p-2 rounded-md transition-all duration-200 flex-1 ${n?"bg-blue-50 dark:bg-blue-950/30 border border-blue-200":"bg-blue-50/50 dark:bg-blue-950/10"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:o?.emblem_image_url?e.jsx("img",{src:o.emblem_image_url,alt:`${o.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-sm text-muted-foreground font-bold",children:"B"})}),e.jsx("h4",{className:"font-medium text-sm text-blue-900 dark:text-blue-100 text-center",children:x}),s&&e.jsx("div",{className:`text-lg font-bold ${n?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}`,children:l.blue_score})]})]}),d&&e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("div",{onClick:j=>j.stopPropagation(),children:d})})]})});return l.id?e.jsx(k,{to:`/matches/details/${l.id}`,className:"block no-underline",children:f}):f}const b=e.jsx(w,{className:"group transition-all duration-200 hover:shadow-md hover:scale-[1.02] cursor-pointer min-h-[160px]",children:e.jsxs(_,{className:"p-6 text-base flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:l.name&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:l.name}),l.round&&l.match_number&&e.jsxs(h,{className:"text-sm px-3 py-1 h-7 font-medium",children:["R",l.round,"M",l.match_number]})]})}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsxs(h,{className:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800",children:[e.jsx(N,{className:"w-4 h-4 mr-1 text-red-600"}),"Red Wins"]}),n&&e.jsxs(h,{className:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",children:[e.jsx(N,{className:"w-4 h-4 mr-1 text-blue-600"}),"Blue Wins"]}),t&&e.jsx(h,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800",children:"Tie Game"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsx("div",{className:"flex flex-col items-center gap-3 min-w-[8rem]",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.red_coral_rp?"text-foreground":"text-muted-foreground/50"}`,children:[l.red_coral_rp&&e.jsx("span",{className:"text-green-600",children:"✓"}),e.jsx("span",{children:"Coral"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.red_auto_rp?"text-foreground":"text-muted-foreground/50"}`,children:[l.red_auto_rp&&e.jsx("span",{className:"text-green-600",children:"✓"}),e.jsx("span",{children:"Auto"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.red_barge_rp?"text-foreground":"text-muted-foreground/50"}`,children:[l.red_barge_rp&&e.jsx("span",{className:"text-green-600",children:"✓"}),e.jsx("span",{children:"Barge"})]})]})}),e.jsxs("div",{className:`
            flex flex-col items-center gap-4 p-6 rounded-xl transition-all duration-200
            ${r?"bg-red-50 dark:bg-red-950/30 shadow-md border-2 border-red-200":"bg-red-50/50 dark:bg-red-950/10"}
            min-w-[14rem]
          `,children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:a?.emblem_image_url?e.jsx("img",{src:a.emblem_image_url,alt:`${a.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"R"})}),e.jsx("h4",{className:"font-bold text-xl text-red-900 dark:text-red-100 text-center max-w-[12rem] leading-tight",children:i}),s&&e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`
                  text-4xl font-bold
                  ${r?"text-red-700 dark:text-red-300":"text-red-600 dark:text-red-400"}
                `,children:l.red_score}),l.red_auto_score!==null&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Auto: ",l.red_auto_score]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"VS"}),s&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r&&e.jsx(N,{className:"w-8 h-8 text-yellow-500"}),t&&e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:"TIE"}),n&&e.jsx(N,{className:"w-8 h-8 text-yellow-500"})]})]}),e.jsxs("div",{className:`
            flex flex-col items-center gap-4 p-6 rounded-xl transition-all duration-200
            ${n?"bg-blue-50 dark:bg-blue-950/30 shadow-md border-2 border-blue-200":"bg-blue-50/50 dark:bg-blue-950/10"}
            min-w-[14rem]
          `,children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:o?.emblem_image_url?e.jsx("img",{src:o.emblem_image_url,alt:`${o.name} emblem`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl text-muted-foreground font-bold",children:"B"})}),e.jsx("h4",{className:"font-bold text-xl text-blue-900 dark:text-blue-100 text-center max-w-[12rem] leading-tight",children:x}),s&&e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`
                  text-4xl font-bold
                  ${n?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}
                `,children:l.blue_score}),l.blue_auto_score!==null&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Auto: ",l.blue_auto_score]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})]}),e.jsx("div",{className:"flex flex-col items-center gap-3 min-w-[8rem]",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.blue_coral_rp?"text-foreground":"text-muted-foreground/50"}`,children:[e.jsx("span",{children:"Coral"}),l.blue_coral_rp&&e.jsx("span",{className:"text-green-600",children:"✓"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.blue_auto_rp?"text-foreground":"text-muted-foreground/50"}`,children:[e.jsx("span",{children:"Auto"}),l.blue_auto_rp&&e.jsx("span",{className:"text-green-600",children:"✓"})]}),e.jsxs("div",{className:`flex items-center gap-2 text-lg font-medium ${l.blue_barge_rp?"text-foreground":"text-muted-foreground/50"}`,children:[e.jsx("span",{children:"Barge"}),l.blue_barge_rp&&e.jsx("span",{className:"text-green-600",children:"✓"})]})]})})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:d?e.jsx("div",{onClick:f=>f.stopPropagation(),children:d}):null})]})});return l.id?e.jsx(k,{to:`/matches/details/${l.id}`,className:"block no-underline",children:b}):b});function D({match:c,right:l,showRelativeTime:d=!1,dense:u=!1}){return c?c.red_score!==void 0&&c.red_score!==null&&c.blue_score!==void 0&&c.blue_score!==null?e.jsx(E,{match:c,right:l,dense:u}):e.jsx(B,{match:c,right:l,showRelativeTime:d,dense:u}):null}function A(){const{lastUpdated:c,isLoading:l,error:d}=C();return d?e.jsxs("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:["Error: ",d]}):l?e.jsx("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Updating..."}):c?e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last updated: ",c.toLocaleTimeString()]}):null}function U(){return e.jsx(w,{className:"hover:shadow-md transition-shadow duration-200",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-6 w-16 mb-1"}),e.jsx(g,{className:"h-4 w-12"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-8 w-8 rounded-full mx-auto mb-1"}),e.jsx(g,{className:"h-4 w-16"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-6 w-8 mb-1"}),e.jsx(g,{className:"h-3 w-12"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-8 w-8 rounded-full mx-auto mb-1"}),e.jsx(g,{className:"h-4 w-16"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(g,{className:"h-5 w-20 mb-1"}),e.jsx(g,{className:"h-4 w-16"})]})]})})})}const Z=v.memo(function(){const{matches:l,isLoading:d,error:u}=C(),{alliances:a,isLoading:o,error:i}=L(),x=d||o,s=u||i,r=v.useMemo(()=>{const t=new Map;return a.forEach(b=>{t.set(b.id,b)}),t},[a]),n=v.useMemo(()=>l.map(t=>({...t,redAlliance:t.red_alliance_id?r.get(t.red_alliance_id):null,blueAlliance:t.blue_alliance_id?r.get(t.blue_alliance_id):null})),[l,r]);return x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Matches"}),e.jsx(A,{})]}),e.jsx("div",{className:"grid gap-3",children:e.jsx("div",{className:"grid gap-2",children:Array.from({length:6}).map((t,b)=>e.jsx(U,{},b))})})]}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Matches"}),e.jsx(A,{})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-red-600 text-lg",children:["Error: ",s]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Matches"}),e.jsx(A,{})]}),e.jsx("div",{className:"grid gap-3",children:l.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No matches yet. Use the Schedule page to create matches."}):e.jsx("ul",{className:"grid gap-2",children:n.map(t=>e.jsx("li",{children:e.jsx(D,{match:t,showRelativeTime:!0})},t.id))})})]})});export{Z as default};
