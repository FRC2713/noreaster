import{j as e,a as V,C as X,b as G,T as J,P as Y,O as Z}from"./ui-vendor-CDBhOMS0.js";import{r as g,L as H,k as ee}from"./react-vendor-CNeAGCso.js";import{c as se,u as le,b as ae}from"./query-vendor-BivveeUn.js";import{s as w,B as N,c as k,a as re,d as te,e as de,f as ne,g as ie,u as oe}from"./index-DiB4IOcY.js";import{B as j}from"./badge-DSDoCdJ3.js";import{R as S}from"./robot-image-CZe6BrnT.js";import{T as Q,C as ce,a as T,X as ue}from"./icons-vendor-Dor2AXrm.js";import{S as b}from"./skeleton-DzP459aa.js";import{u as me,A as K}from"./alliance-rp-toggles-GVmy98ni.js";import{L as v,I as y}from"./label-DqMwsflx.js";import"./supabase-vendor-B8N91wlh.js";import"./utils-vendor-DCj5grse.js";async function xe(s){const{data:l,error:n}=await w.from("matches").select(`
      id, 
      name, 
      red_alliance_id, 
      blue_alliance_id, 
      scheduled_at, 
      red_score, 
      blue_score, 
      red_auto_score, 
      blue_auto_score, 
      red_coral_rp, 
      red_auto_rp, 
      red_barge_rp, 
      blue_coral_rp, 
      blue_auto_rp, 
      blue_barge_rp,
      round,
      match_number,
      match_type,
      red:alliances!matches_red_alliance_id_fkey(name), 
      blue:alliances!matches_blue_alliance_id_fkey(name)
    `).eq("id",s).single();if(n)throw n;if(!l)return null;const a=[l.red_alliance_id,l.blue_alliance_id].filter(c=>c!==null);if(a.length===0)return{match:l,redAllianceName:"Red Alliance",blueAllianceName:"Blue Alliance",redSlots:[null,null,null,null],blueSlots:[null,null,null,null]};const{data:m,error:x}=await w.from("alliance_teams").select("alliance_id, team_id, slot").in("alliance_id",a).order("slot",{ascending:!0});if(x)throw x;const u=Array.from(new Set((m??[]).map(c=>c.team_id)));let d=[];if(u.length>0){const{data:c,error:p}=await w.from("teams").select("id, number, name, robot_image_url").in("id",u);if(p)throw p;d=c??[]}const i=new Map(d.map(c=>[c.id,c])),o=l.red_alliance_id?(Array.isArray(l.red)?l.red[0]?.name:l.red?.name)??"Red Alliance":"Red Alliance",t=l.blue_alliance_id?(Array.isArray(l.blue)?l.blue[0]?.name:l.blue?.name)??"Blue Alliance":"Blue Alliance",r=[null,null,null,null],h=[null,null,null,null];return m.forEach(c=>{const p=i.get(c.team_id);c.slot>=1&&c.slot<=4&&(c.alliance_id===l.red_alliance_id?r[c.slot-1]=p??null:c.alliance_id===l.blue_alliance_id&&(h[c.slot-1]=p??null))}),{match:l,redAllianceName:o,blueAllianceName:t,redSlots:r,blueSlots:h}}function be(s){const l=se({queryKey:["match-details",s],queryFn:()=>xe(s),enabled:!!s,staleTime:3e4,gcTime:3e5});return g.useMemo(()=>l,[l.data,l.error,l.isLoading,l.isError])}function ge({match:s,redSlots:l,blueSlots:n,redAllianceName:a,blueAllianceName:m,user:x,onEditClick:u}){const d=s.red_score!==null&&s.blue_score!==null,i=d&&s.red_score>s.blue_score,o=d&&s.blue_score>s.red_score,t=d&&s.red_score===s.blue_score;return e.jsxs("div",{className:"min-h-dvh w-full p-4 md:p-8 lg:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(H,{to:"/matches",children:e.jsx(N,{variant:"ghost",children:"← Back to Matches"})}),x&&u&&e.jsx(N,{variant:"outline",onClick:u,children:"Edit Match"})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:s.name||`Match ${s.round}M${s.match_number}`}),d&&e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[e.jsx("div",{className:"text-6xl font-bold text-red-600",children:s.red_score}),e.jsx("div",{className:"text-2xl font-medium text-muted-foreground",children:"VS"}),e.jsx("div",{className:"text-6xl font-bold text-blue-600",children:s.blue_score})]}),(s.red_auto_score!==null||s.blue_auto_score!==null)&&e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Auto Score"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.red_auto_score??"-"})]}),e.jsx("div",{className:"text-lg font-medium text-muted-foreground",children:"VS"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Auto Score"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.blue_auto_score??"-"})]})]}),d&&e.jsxs("div",{className:"flex justify-center mb-6",children:[i&&e.jsxs(j,{className:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800 text-lg px-6 py-3",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-red-600"}),"Red Alliance Wins!"]}),o&&e.jsxs(j,{className:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800 text-lg px-6 py-3",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-blue-600"}),"Blue Alliance Wins!"]}),t&&e.jsx(j,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800 text-lg px-6 py-3",children:"It's a Tie!"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-3xl md:text-4xl font-bold mb-4 text-white px-4 py-1 rounded ${i?"bg-red-600 ring-2 ring-yellow-400":"bg-red-600"}`,children:a}),e.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Ranking Points"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.red_coral_rp&&e.jsx(j,{className:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",children:"✓ Coral"}),s.red_auto_rp&&e.jsx(j,{className:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",children:"✓ Auto"}),s.red_barge_rp&&e.jsx(j,{className:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/30 dark:text-purple-200 dark:border-purple-800",children:"✓ Barge"})]})]}),e.jsx("ul",{className:"grid gap-4",children:l.map((r,h)=>e.jsx("li",{className:"border rounded-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-[240px_1fr] items-center",children:[e.jsx(S,{team:r??{id:"_",number:0,name:"Unassigned",robot_image_url:null},className:"w-full bg-muted",ratio:16/9}),e.jsx("div",{className:"p-4 text-2xl md:text-3xl font-semibold",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["#",r.number]}),e.jsx("div",{className:"text-xl md:text-2xl opacity-80 font-normal",children:r.name})]}):e.jsx("div",{className:"text-muted-foreground",children:"Unassigned"})})]})},`r-${h}`))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-3xl md:text-4xl font-bold mb-4 text-white px-4 py-1 rounded ${o?"bg-blue-600 ring-2 ring-yellow-400":"bg-blue-600"}`,children:m}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Ranking Points"}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[s.blue_coral_rp&&e.jsx(j,{className:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",children:"✓ Coral"}),s.blue_auto_rp&&e.jsx(j,{className:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",children:"✓ Auto"}),s.blue_barge_rp&&e.jsx(j,{className:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/30 dark:text-purple-200 dark:border-purple-800",children:"✓ Barge"})]})]}),e.jsx("ul",{className:"grid gap-4",children:n.map((r,h)=>e.jsx("li",{className:"border rounded-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-[1fr_240px] items-center",children:[e.jsx("div",{className:"p-4 text-2xl md:text-3xl font-semibold text-right",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["#",r.number]}),e.jsx("div",{className:"text-xl md:text-2xl opacity-80 font-normal",children:r.name})]}):e.jsx("div",{className:"text-muted-foreground",children:"Unassigned"})}),e.jsx(S,{team:r??{id:"_",number:0,name:"Unassigned",robot_image_url:null},className:"w-full bg-muted",ratio:16/9})]})},`b-${h}`))})]})]})]})}function he(s){const l=new Date(s).getTime(),n=Date.now(),a=Math.round((l-n)/1e3),m=Math.abs(a),x=60,u=60*x,d=24*u;let i,o;m<u?(i=Math.max(1,Math.round(m/x)),o="min"):m<d?(i=Math.max(1,Math.round(m/u)),o="hr"):(i=Math.max(1,Math.round(m/d)),o=i===1?"day":"days");const t=`${i} ${o}`;return a>0?`in ${t}`:a<0?`${t} ago`:"now"}function fe({match:s,redSlots:l,blueSlots:n,redAllianceName:a,blueAllianceName:m,user:x,onEditClick:u}){let d="Unscheduled",i=e.jsx(ce,{className:"w-5 h-5"}),o="text-muted-foreground";if(s.scheduled_at){const t=new Date(s.scheduled_at).getTime(),r=Math.abs(t-Date.now()),h=720*60*1e3;d=r>h?new Date(s.scheduled_at).toLocaleString():he(s.scheduled_at),r<3600*1e3?(o="text-red-600",i=e.jsx(T,{className:"w-5 h-5"})):r<7200*1e3?(o="text-orange-600",i=e.jsx(T,{className:"w-5 h-5"})):r<360*60*1e3&&(o="text-yellow-600",i=e.jsx(T,{className:"w-5 h-5"}))}return e.jsxs("div",{className:"min-h-dvh w-full p-4 md:p-8 lg:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(H,{to:"/matches",children:e.jsx(N,{variant:"ghost",children:"← Back to Matches"})}),x&&u&&e.jsx(N,{variant:"outline",onClick:u,children:"Edit Match"})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:s.name||`Match ${s.round}M${s.match_number}`}),e.jsxs("div",{className:`flex items-center justify-center gap-2 text-xl font-medium ${o}`,children:[i,e.jsx("span",{children:d})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full dark:bg-blue-900/30 dark:text-blue-200",children:"Upcoming Match"})})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsx("div",{className:"text-6xl font-bold text-muted-foreground",children:"VS"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl md:text-4xl font-bold mb-4 text-white px-4 py-1 rounded bg-red-600",children:a}),e.jsx("ul",{className:"grid gap-4",children:l.map((t,r)=>e.jsx("li",{className:"border rounded-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-[240px_1fr] items-center",children:[e.jsx(S,{team:t??{id:"_",number:0,name:"Unassigned",robot_image_url:null},className:"w-full bg-muted",ratio:16/9}),e.jsx("div",{className:"p-4 text-2xl md:text-3xl font-semibold",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["#",t.number]}),e.jsx("div",{className:"text-xl md:text-2xl opacity-80 font-normal",children:t.name})]}):e.jsx("div",{className:"text-muted-foreground",children:"Unassigned"})})]})},`r-${r}`))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl md:text-4xl font-bold mb-4 text-white px-4 py-1 rounded bg-blue-600",children:m}),e.jsx("ul",{className:"grid gap-4",children:n.map((t,r)=>e.jsx("li",{className:"border rounded-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-[1fr_240px] items-center",children:[e.jsx("div",{className:"p-4 text-2xl md:text-3xl font-semibold text-right",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["#",t.number]}),e.jsx("div",{className:"text-xl md:text-2xl opacity-80 font-normal",children:t.name})]}):e.jsx("div",{className:"text-muted-foreground",children:"Unassigned"})}),e.jsx(S,{team:t??{id:"_",number:0,name:"Unassigned",robot_image_url:null},className:"w-full bg-muted",ratio:16/9})]})},`b-${r}`))})]})]})]})}function je(){return e.jsxs("div",{className:"min-h-dvh w-full p-4 md:p-8 lg:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(b,{className:"h-10 w-32"}),e.jsx(b,{className:"h-10 w-24"})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(b,{className:"h-12 w-80 mx-auto mb-4"}),e.jsx(b,{className:"h-8 w-48 mx-auto mb-6"}),e.jsx(b,{className:"h-6 w-32 mx-auto"})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsx(b,{className:"h-16 w-16 mx-auto"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(b,{className:"h-12 w-48 mb-4"}),e.jsx("div",{className:"grid gap-4",children:Array.from({length:4}).map((s,l)=>e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-[240px_1fr] items-center",children:[e.jsx(b,{className:"w-full h-32 bg-muted"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(b,{className:"h-8 w-16"}),e.jsx(b,{className:"h-6 w-32"})]})]})},`red-${l}`))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(b,{className:"h-12 w-48 ml-auto mb-4"}),e.jsx("div",{className:"grid gap-4",children:Array.from({length:4}).map((s,l)=>e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-[1fr_240px] items-center",children:[e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(b,{className:"h-8 w-16 ml-auto"}),e.jsx(b,{className:"h-6 w-32 ml-auto"})]}),e.jsx(b,{className:"w-full h-32 bg-muted"})]})},`blue-${l}`))})]})]})]})}function pe({...s}){return e.jsx(V,{"data-slot":"dialog",...s})}function Ne({...s}){return e.jsx(Y,{"data-slot":"dialog-portal",...s})}function _e({className:s,...l}){return e.jsx(Z,{"data-slot":"dialog-overlay",className:k("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...l})}function ve({className:s,children:l,showCloseButton:n=!0,...a}){return e.jsxs(Ne,{"data-slot":"dialog-portal",children:[e.jsx(_e,{}),e.jsxs(X,{"data-slot":"dialog-content",className:k("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a,children:[l,n&&e.jsxs(G,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ue,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ye({className:s,...l}){return e.jsx("div",{"data-slot":"dialog-header",className:k("flex flex-col gap-2 text-center sm:text-left",s),...l})}function we({className:s,...l}){return e.jsx(J,{"data-slot":"dialog-title",className:k("text-lg leading-none font-semibold",s),...l})}function O({matchId:s,onClose:l}){const n=le(),{data:a,isLoading:m,error:x}=me(s),[u,d]=g.useState(""),[i,o]=g.useState(""),[t,r]=g.useState(""),[h,c]=g.useState(""),[p,M]=g.useState(!1),[$,A]=g.useState(!1),[F,C]=g.useState(!1),[P,B]=g.useState(!1),[U,R]=g.useState(!1),[L,D]=g.useState(!1),[q,E]=g.useState(null),I=()=>{d(""),o(""),r(""),c(""),M(!1),A(!1),C(!1),B(!1),R(!1),D(!1),E(null)};g.useEffect(()=>{a&&(d(a.red_score!=null?String(a.red_score):""),o(a.blue_score!=null?String(a.blue_score):""),r(a.red_auto_score!=null?String(a.red_auto_score):""),c(a.blue_auto_score!=null?String(a.blue_auto_score):""),M(!!a.red_coral_rp),A(!!a.red_auto_rp),C(!!a.red_barge_rp),B(!!a.blue_coral_rp),R(!!a.blue_auto_rp),D(!!a.blue_barge_rp))},[a]);const _=ae({mutationFn:async()=>{if(!s)return;const f={red_score:u?Number(u):null,blue_score:i?Number(i):null,red_auto_score:t?Number(t):null,blue_auto_score:h?Number(h):null,red_coral_rp:p,red_auto_rp:$,red_barge_rp:F,blue_coral_rp:P,blue_auto_rp:U,blue_barge_rp:L},{error:z}=await w.from("matches").update(f).eq("id",s);if(z)throw z},onSuccess:()=>{E("Saved."),n.invalidateQueries({queryKey:["matches","polling"]}),n.invalidateQueries({queryKey:["matches","byId",s]}),n.invalidateQueries({queryKey:["match-details",s]}),setTimeout(()=>l(),1e3)},onError:f=>E(`Save failed: ${f?.message??"Unknown error"}`)});return m?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading match…"})}):x?e.jsx("div",{className:"p-8",children:e.jsxs("p",{className:"text-red-600",children:["Error: ",String(x)]})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 text-lg",children:[e.jsxs("div",{className:"space-y-2 rounded-md border border-red-200 bg-red-50/30 p-4",children:[e.jsx(v,{htmlFor:"red-score",className:"text-base font-medium",children:"Red Score"}),e.jsx(y,{id:"red-score",type:"number",value:u,onChange:f=>d(f.target.value),className:"text-lg border-red-200 focus:border-red-400"})]}),e.jsxs("div",{className:"space-y-2 rounded-md border border-blue-200 bg-blue-50/30 p-4",children:[e.jsx(v,{htmlFor:"blue-score",className:"text-base font-medium",children:"Blue Score"}),e.jsx(y,{id:"blue-score",type:"number",value:i,onChange:f=>o(f.target.value),className:"text-lg border-blue-200 focus:border-blue-400"})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 text-lg",children:[e.jsxs("div",{className:"space-y-2 rounded-md border border-red-200 bg-red-50/30 p-4",children:[e.jsx(v,{htmlFor:"red-auto-score",className:"text-base font-medium",children:"Red Auto Score"}),e.jsx(y,{id:"red-auto-score",type:"number",value:t,onChange:f=>r(f.target.value),className:"text-lg border-red-200 focus:border-red-400"})]}),e.jsxs("div",{className:"space-y-2 rounded-md border border-blue-200 bg-blue-50/30 p-4",children:[e.jsx(v,{htmlFor:"blue-auto-score",className:"text-base font-medium",children:"Blue Auto Score"}),e.jsx(y,{id:"blue-auto-score",type:"number",value:h,onChange:f=>c(f.target.value),className:"text-lg border-blue-200 focus:border-blue-400"})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(K,{title:"Red Alliance RP",coral:p,auto:$,barge:F,onCoralChange:M,onAutoChange:A,onBargeChange:C,className:"border-red-200 bg-red-50/30"}),e.jsx(K,{title:"Blue Alliance RP",coral:P,auto:U,barge:L,onCoralChange:B,onAutoChange:R,onBargeChange:D,className:"border-blue-200 bg-blue-50/30"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{onClick:()=>_.mutate(),disabled:_.isPending,children:_.isPending?"Saving...":"Save"}),e.jsx(N,{variant:"outline",onClick:I,disabled:_.isPending,children:"Clear"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{variant:"outline",onClick:l,disabled:_.isPending,children:"Cancel"}),q&&e.jsx("span",{className:"text-sm opacity-80",children:q})]})]})]}):e.jsx("div",{className:"p-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Match not found"})})}function W({matchId:s,open:l,onOpenChange:n}){const a=re();return s?a?e.jsx(te,{open:l,onOpenChange:n,children:e.jsxs(de,{side:"bottom",className:"h-[90vh]",children:[e.jsx(ne,{children:e.jsx(ie,{children:"Edit Match"})}),e.jsx("div",{className:"mt-6 overflow-y-auto",children:e.jsx(O,{matchId:s,onClose:()=>n(!1)})})]})}):e.jsx(pe,{open:l,onOpenChange:n,children:e.jsxs(ve,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ye,{children:e.jsx(we,{children:"Edit Match"})}),e.jsx("div",{className:"mt-6",children:e.jsx(O,{matchId:s,onClose:()=>n(!1)})})]})}):null}function Pe(){const{user:s}=oe(),{matchId:l}=ee(),[n,a]=g.useState(!1),{data:m,isLoading:x,error:u}=be(l);if(!l)return e.jsx("div",{className:"min-h-dvh w-full p-4 md:p-8 lg:p-10",children:e.jsx("p",{className:"text-red-600",children:"Missing match id"})});if(x)return e.jsx(je,{});if(u)return e.jsx("div",{className:"min-h-dvh w-full p-4 md:p-8 lg:p-10",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("p",{className:"text-red-600",children:["Error: ",String(u)]})})});if(!m)return e.jsx("div",{className:"min-h-dvh w-full p-4 md:p-8 lg:p-10",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Match not found"})})});const{match:d,redAllianceName:i,blueAllianceName:o,redSlots:t,blueSlots:r}=m;return d.red_score!==null&&d.blue_score!==null?e.jsxs(e.Fragment,{children:[e.jsx(ge,{match:d,redSlots:t,blueSlots:r,redAllianceName:i,blueAllianceName:o,user:s,onEditClick:()=>a(!0)}),e.jsx(W,{matchId:l,open:n,onOpenChange:a})]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{match:d,redSlots:t,blueSlots:r,redAllianceName:i,blueAllianceName:o,user:s,onEditClick:()=>a(!0)}),e.jsx(W,{matchId:l,open:n,onOpenChange:a})]})}export{Pe as default};
