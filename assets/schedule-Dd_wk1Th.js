import{j as r,z as dn,B as cn,E as un,F as mn,G as fn,H as hn,J as pn,K as bn,M as gn,N as vn,Q as yn}from"./ui-vendor-CDBhOMS0.js";import{c as p,r as _}from"./react-vendor-CNeAGCso.js";import{c as C,t as Y,b as vt,B as Se,T as qe,a as He,d as Ze,f as we,e as xn,D as wn,g as Mn,h as Nn,i as kn,j as yt,k as Ge,s as _e}from"./index-eDSu_bsY.js";import{v as Ot,b as Dn,d as jn,e as _n,f as Sn,g as An,h as Cn,i as On,j as Fn,k as Tn,l as Wn,m as En,n as In,o as Bn,p as Rn,q as Pn,r as Yn,s as $n,u as zn,w as Ln,x as qn,y as Hn,z as Zn,A as Gn,B as Un,C as Kn,D as Vn,E as Qn,F as Jn,G as Xn,H as es,I as ts,J as Ft}from"./utils-vendor-DCj5grse.js";import{u as ns,c as xt,b as wt}from"./query-vendor-BivveeUn.js";import{u as Ke}from"./use-alliances-polling-D0xxy3GB.js";import{u as ss}from"./use-matches-polling-CRwDu3EC.js";import{h as rs,i as Oe,j as Pe,C as Re,a as Mt,k as mt,l as as,I as os,E as is,R as ls,D as ds,m as cs,d as us,n as ms}from"./icons-vendor-Db1BlRWD.js";import{C as ne,b as Ae,c as Ce,a as se}from"./card-BxdVKt_c.js";import{L as xe,I as ke}from"./label-2-MD4-OG.js";import{S as ft}from"./scroll-area-CBJpAddt.js";import{B as Ue}from"./badge-BnvX8RUh.js";import"./supabase-vendor-B8N91wlh.js";function fs({className:e,...t}){return r.jsx(dn,{"data-slot":"tabs",className:C("flex flex-col gap-2",e),...t})}function hs({className:e,...t}){return r.jsx(cn,{"data-slot":"tabs-list",className:C("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function at({className:e,...t}){return r.jsx(un,{"data-slot":"tabs-trigger",className:C("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ot({className:e,...t}){return r.jsx(mn,{"data-slot":"tabs-content",className:C("flex-1 outline-none",e),...t})}function Nt(e,t){const[n,s]=t.split(":").map(i=>Number(i)),a=new Date(e);return a.setHours(n??0,s??0,0,0),a.toISOString()}function ps(e,t){if(e.length<2)throw new Error("Need at least 2 alliances.");const n=bs(e),s=new Date(Nt(t.day,t.desiredLunchTime)),a=[],i=new Date(Nt(t.day,t.startTime));for(let d=0;d<t.rrRounds;d++){const c={startTime:i.toISOString(),duration:n.length*parseInt(t.intervalMin),activity:{type:"matches",round:d,matches:[]}};n.forEach(u=>{const m=d%2===0?u.red:u.blue,h=d%2===0?u.blue:u.red,f={id:Ot(),red_alliance_id:m.id,blue_alliance_id:h.id,scheduled_at:new Date(i).toISOString(),round:d+1,match_type:"round_robin"};c.activity.matches.push(f),i.setMinutes(i.getMinutes()+parseInt(t.intervalMin))}),a.push(c)}const l=[];let o=!1;for(let d=0;d<a.length;d++){const c=a[d],u=new Date(c.startTime),m=new Date(u);m.setMinutes(m.getMinutes()+n.length*parseInt(t.intervalMin)),!o&&u>=s&&(l.push({startTime:u.toISOString(),duration:t.lunchDurationMin,activity:{type:"lunch",duration:t.lunchDurationMin}}),o=!0,u.setMinutes(u.getMinutes()+t.lunchDurationMin),c.startTime=u.toISOString(),c.activity.matches.forEach((h,f)=>{const b=new Date(u);b.setMinutes(b.getMinutes()+f*parseInt(t.intervalMin)),h.scheduled_at=b.toISOString()})),l.push(c)}if(!o&&a.length>0){const d=a[a.length-1],c=new Date(d.startTime);c.setMinutes(c.getMinutes()+n.length*parseInt(t.intervalMin)),l.push({startTime:c.toISOString(),duration:t.lunchDurationMin,activity:{type:"lunch",duration:t.lunchDurationMin}})}return l}function bs(e){if(e.length<2)return[];const t=[],n=[...e];for(;n.length>1;){for(let a=1;a<n.length;a++){console.log("pairing",n[0],n[a]);const i=n[0],l=n[a];t.push({red:i,blue:l})}n.shift()}return gs(t)}function gs(e){if(e.length<=1)return e;const t=[],n=[...e];for(t.push(n.shift());n.length>0;){const s=t[t.length-1],a=new Set([s.red.id,s.blue.id]);let i=-1;for(let l=0;l<n.length;l++){const o=n[l];if(![...new Set([o.red.id,o.blue.id])].some(u=>a.has(u))){i=l;break}}i===-1&&(i=0),t.push(n.splice(i,1)[0])}return t}function vs(e,t){if(e.length===0)return null;const n=new Map,s=new Map,a=new Map,i=new Map;for(const f of e)!f.red_alliance_id||!f.blue_alliance_id||(n.set(f.red_alliance_id,(n.get(f.red_alliance_id)??0)+1),n.set(f.blue_alliance_id,(n.get(f.blue_alliance_id)??0)+1),s.set(f.red_alliance_id,(s.get(f.red_alliance_id)??0)+1),a.set(f.blue_alliance_id,(a.get(f.blue_alliance_id)??0)+1),[f.red_alliance_id,f.blue_alliance_id].forEach(b=>{const w=i.get(b)??[];f.scheduled_at&&w.push(new Date(f.scheduled_at).getTime()),i.set(b,w)}));const l=new Map,o=new Map,d=new Map;for(const[f,b]of i.entries()){if(b.sort((M,N)=>M-N),b.length<=1){l.set(f,0),o.set(f,0),d.set(f,0);continue}const w=[];for(let M=1;M<b.length;M++){const N=(b[M]-b[M-1])/6e4;w.push(N)}const k=w.reduce((M,N)=>M+N,0);l.set(f,k/w.length),o.set(f,Math.min(...w)),d.set(f,Math.max(...w))}const c=t.map(f=>({id:f.id,name:f.name,matches:n.get(f.id)??0,redMatches:s.get(f.id)??0,blueMatches:a.get(f.id)??0,avgMinutes:Number((l.get(f.id)??0).toFixed(1)),minMinutes:Number((o.get(f.id)??0).toFixed(1)),maxMinutes:Number((d.get(f.id)??0).toFixed(1))})),u=e.length,m=Math.max(...e.map(f=>f.round??0),0),h=c.length?Number((u*2/c.length).toFixed(2)):0;return{rows:c,totalMatches:u,totalRounds:m,avgMatchesPerAlliance:h}}const ys=[{id:1,bracket:0,round:1,matchNumber:1,redFrom:W(1),blueFrom:W(8),redAdvancement:{win:7,loss:5},blueAdvancement:{win:7,loss:5}},{id:2,bracket:0,round:1,matchNumber:2,redFrom:W(4),blueFrom:W(5),redAdvancement:{win:7,loss:5},blueAdvancement:{win:7,loss:5}},{id:3,bracket:0,round:1,matchNumber:3,redFrom:W(3),blueFrom:W(6),redAdvancement:{win:8,loss:6},blueAdvancement:{win:8,loss:6}},{id:4,bracket:0,round:1,matchNumber:4,redFrom:W(2),blueFrom:W(7),redAdvancement:{win:8,loss:6},blueAdvancement:{win:8,loss:6}},{id:5,bracket:1,round:2,matchNumber:5,redFrom:1,blueFrom:2,redAdvancement:{win:10,loss:"eliminated"},blueAdvancement:{win:10,loss:"eliminated"}},{id:6,bracket:1,round:2,matchNumber:6,redFrom:3,blueFrom:4,redAdvancement:{win:9,loss:"eliminated"},blueAdvancement:{win:9,loss:"eliminated"}},{id:7,bracket:0,round:2,matchNumber:7,redFrom:1,blueFrom:2,redAdvancement:{win:12,loss:9},blueAdvancement:{win:12,loss:9}},{id:8,bracket:0,round:2,matchNumber:8,redFrom:3,blueFrom:4,redAdvancement:{win:12,loss:10},blueAdvancement:{win:12,loss:10}},{id:9,bracket:1,round:3,matchNumber:9,redFrom:7,blueFrom:6,redAdvancement:{win:11,loss:"eliminated"},blueAdvancement:{win:11,loss:"eliminated"}},{id:10,bracket:1,round:3,matchNumber:10,redFrom:8,blueFrom:5,redAdvancement:{win:11,loss:"eliminated"},blueAdvancement:{win:11,loss:"eliminated"}},{id:11,bracket:1,round:4,matchNumber:11,redFrom:9,blueFrom:10,redAdvancement:{win:13,loss:"eliminated"},blueAdvancement:{win:13,loss:"eliminated"}},{id:12,bracket:0,round:4,matchNumber:12,redFrom:7,blueFrom:8,redAdvancement:{win:14,loss:13},blueAdvancement:{win:14,loss:13}},{id:13,bracket:1,round:5,matchNumber:13,redFrom:11,blueFrom:12,redAdvancement:{win:14,loss:"eliminated"},blueAdvancement:{win:14,loss:"eliminated"}},{id:14,bracket:0,round:6,matchNumber:14,redFrom:12,blueFrom:13,redAdvancement:{win:"champion",loss:15},blueAdvancement:{win:15,loss:"eliminated"}},{id:15,bracket:0,round:6,matchNumber:15,redFrom:14,blueFrom:14,redAdvancement:{win:"champion",loss:"eliminated"},blueAdvancement:{win:"champion",loss:"eliminated"}}],xs=[{id:1,bracket:0,round:1,matchNumber:1,redFrom:W(2),blueFrom:W(7),redAdvancement:{win:4,loss:3},blueAdvancement:{win:4,loss:3}},{id:2,bracket:0,round:1,matchNumber:2,redFrom:W(3),blueFrom:W(6),redAdvancement:{win:4,loss:3},blueAdvancement:{win:4,loss:3}},{id:3,bracket:0,round:1,matchNumber:3,redFrom:W(4),blueFrom:W(5),redAdvancement:{win:4,loss:3},blueAdvancement:{win:4,loss:3}},{id:4,bracket:0,round:2,matchNumber:4,redFrom:1,blueFrom:W(1),redAdvancement:{win:6,loss:5},blueAdvancement:{win:6,loss:5}},{id:5,bracket:0,round:2,matchNumber:5,redFrom:2,blueFrom:3,redAdvancement:{win:6,loss:5},blueAdvancement:{win:6,loss:5}},{id:6,bracket:1,round:3,matchNumber:6,redFrom:1,blueFrom:2,redAdvancement:{win:8,loss:"eliminated"},blueAdvancement:{win:8,loss:"eliminated"}},{id:7,bracket:1,round:3,matchNumber:7,redFrom:3,blueFrom:3,redAdvancement:{win:8,loss:"eliminated"},blueAdvancement:{win:8,loss:"eliminated"}},{id:8,bracket:0,round:4,matchNumber:8,redFrom:4,blueFrom:5,redAdvancement:{win:11,loss:9},blueAdvancement:{win:11,loss:9}},{id:9,bracket:1,round:5,matchNumber:9,redFrom:8,blueFrom:6,redAdvancement:{win:10,loss:"eliminated"},blueAdvancement:{win:10,loss:"eliminated"}},{id:10,bracket:1,round:5,matchNumber:10,redFrom:7,blueFrom:7,redAdvancement:{win:10,loss:"eliminated"},blueAdvancement:{win:10,loss:"eliminated"}},{id:11,bracket:1,round:6,matchNumber:11,redFrom:9,blueFrom:10,redAdvancement:{win:12,loss:"eliminated"},blueAdvancement:{win:12,loss:"eliminated"}},{id:12,bracket:0,round:7,matchNumber:12,redFrom:8,blueFrom:11,redAdvancement:{win:"champion",loss:13},blueAdvancement:{win:13,loss:"eliminated"}},{id:13,bracket:0,round:7,matchNumber:13,redFrom:12,blueFrom:12,redAdvancement:{win:"champion",loss:"eliminated"},blueAdvancement:{win:"champion",loss:"eliminated"}}],ws=[{id:1,bracket:0,round:1,matchNumber:1,redFrom:W(3),blueFrom:W(6),redAdvancement:{win:3,loss:2},blueAdvancement:{win:3,loss:2}},{id:2,bracket:0,round:1,matchNumber:2,redFrom:W(4),blueFrom:W(5),redAdvancement:{win:3,loss:2},blueAdvancement:{win:3,loss:2}},{id:3,bracket:0,round:2,matchNumber:3,redFrom:1,blueFrom:W(1),redAdvancement:{win:5,loss:4},blueAdvancement:{win:5,loss:4}},{id:4,bracket:0,round:2,matchNumber:4,redFrom:2,blueFrom:W(2),redAdvancement:{win:5,loss:4},blueAdvancement:{win:5,loss:4}},{id:5,bracket:1,round:3,matchNumber:5,redFrom:1,blueFrom:2,redAdvancement:{win:7,loss:"eliminated"},blueAdvancement:{win:7,loss:"eliminated"}},{id:6,bracket:0,round:4,matchNumber:6,redFrom:3,blueFrom:4,redAdvancement:{win:9,loss:7},blueAdvancement:{win:9,loss:7}},{id:7,bracket:1,round:5,matchNumber:7,redFrom:6,blueFrom:5,redAdvancement:{win:8,loss:"eliminated"},blueAdvancement:{win:8,loss:"eliminated"}},{id:8,bracket:1,round:6,matchNumber:8,redFrom:7,blueFrom:7,redAdvancement:{win:9,loss:"eliminated"},blueAdvancement:{win:9,loss:"eliminated"}},{id:9,bracket:0,round:7,matchNumber:9,redFrom:6,blueFrom:8,redAdvancement:{win:"champion",loss:10},blueAdvancement:{win:10,loss:"eliminated"}},{id:10,bracket:0,round:7,matchNumber:10,redFrom:9,blueFrom:9,redAdvancement:{win:"champion",loss:"eliminated"},blueAdvancement:{win:"champion",loss:"eliminated"}}],Ms=[{id:1,bracket:0,round:1,matchNumber:1,redFrom:W(2),blueFrom:W(5),redAdvancement:{win:3,loss:2},blueAdvancement:{win:3,loss:2}},{id:2,bracket:0,round:1,matchNumber:2,redFrom:W(3),blueFrom:W(4),redAdvancement:{win:3,loss:2},blueAdvancement:{win:3,loss:2}},{id:3,bracket:0,round:2,matchNumber:3,redFrom:1,blueFrom:W(1),redAdvancement:{win:5,loss:4},blueAdvancement:{win:5,loss:4}},{id:4,bracket:0,round:2,matchNumber:4,redFrom:2,blueFrom:2,redAdvancement:{win:5,loss:4},blueAdvancement:{win:5,loss:4}},{id:5,bracket:1,round:3,matchNumber:5,redFrom:1,blueFrom:2,redAdvancement:{win:7,loss:"eliminated"},blueAdvancement:{win:7,loss:"eliminated"}},{id:6,bracket:0,round:4,matchNumber:6,redFrom:3,blueFrom:4,redAdvancement:{win:9,loss:7},blueAdvancement:{win:9,loss:7}},{id:7,bracket:1,round:5,matchNumber:7,redFrom:6,blueFrom:5,redAdvancement:{win:8,loss:"eliminated"},blueAdvancement:{win:8,loss:"eliminated"}},{id:8,bracket:1,round:6,matchNumber:8,redFrom:7,blueFrom:7,redAdvancement:{win:9,loss:"eliminated"},blueAdvancement:{win:9,loss:"eliminated"}},{id:9,bracket:0,round:7,matchNumber:9,redFrom:6,blueFrom:8,redAdvancement:{win:"champion",loss:10},blueAdvancement:{win:10,loss:"eliminated"}},{id:10,bracket:0,round:7,matchNumber:10,redFrom:9,blueFrom:9,redAdvancement:{win:"champion",loss:"eliminated"},blueAdvancement:{win:"champion",loss:"eliminated"}}],Ns=[{id:1,bracket:0,round:1,matchNumber:1,redFrom:W(1),blueFrom:W(4),redAdvancement:{win:3,loss:4},blueAdvancement:{win:3,loss:4}},{id:2,bracket:0,round:1,matchNumber:2,redFrom:W(2),blueFrom:W(3),redAdvancement:{win:3,loss:4},blueAdvancement:{win:3,loss:4}},{id:3,bracket:0,round:2,matchNumber:3,redFrom:1,blueFrom:2,redAdvancement:{win:6,loss:5},blueAdvancement:{win:6,loss:5}},{id:4,bracket:1,round:2,matchNumber:4,redFrom:1,blueFrom:2,redAdvancement:{win:5,loss:"eliminated"},blueAdvancement:{win:5,loss:"eliminated"}},{id:5,bracket:1,round:3,matchNumber:5,redFrom:3,blueFrom:4,redAdvancement:{win:6,loss:"eliminated"},blueAdvancement:{win:6,loss:"eliminated"}},{id:6,bracket:0,round:4,matchNumber:6,redFrom:3,blueFrom:4,redAdvancement:{win:"champion",loss:7},blueAdvancement:{win:7,loss:"eliminated"}},{id:7,bracket:0,round:4,matchNumber:7,redFrom:5,blueFrom:5,redAdvancement:{win:"champion",loss:"eliminated"},blueAdvancement:{win:"champion",loss:"eliminated"}}],ks={4:Ns,5:Ms,6:ws,7:xs,8:ys};function Ds(e){return e<0&&e>=-8}function W(e){return-e}function js(e){const t=new Map,n=new Map,s=new Map,a=new Map,i=new Map;return Ss(e).forEach(o=>{t.set(o.id,o),n.set(o.id,{redAllianceId:null,blueAllianceId:null,winner:null,isCompleted:!1}),s.has(o.round)||s.set(o.round,{upper:[],lower:[]});const d=s.get(o.round);o.bracket===0?d.upper.push(o.id):d.lower.push(o.id),a.set(o.id,{redAdvancement:o.redAdvancement,blueAdvancement:o.blueAdvancement}),[o.redAdvancement.win,o.redAdvancement.loss,o.blueAdvancement.win,o.blueAdvancement.loss].forEach(u=>{typeof u=="number"&&(i.has(u)||i.set(u,[]),i.get(u).push(o.id))})}),{matches:t,matchStates:n,rounds:s,adjacency:a,reverseAdjacency:i,initialMatches:[1,2,3,4],finalMatch:16}}class _s{bracket;constructor(t){this.bracket=js(t)}getMatch(t){return this.bracket.matches.get(t)}getMatches(){return Array.from(this.bracket.matches.values())}getMatchState(t){return this.bracket.matchStates.get(t)}getMatchesByRound(t){return this.bracket.rounds.get(t)||{upper:[],lower:[]}}getDependencies(t){return this.bracket.reverseAdjacency.get(t)||[]}getNextMatches(t){return this.bracket.adjacency.get(t)||{redAdvancement:{win:"eliminated",loss:"eliminated"},blueAdvancement:{win:"eliminated",loss:"eliminated"}}}isMatchReady(t){return this.getDependencies(t).every(s=>this.getMatchState(s)?.isCompleted===!0)}getReadyMatches(){return Array.from(this.bracket.matches.keys()).filter(n=>this.isMatchReady(n))}updateMatchResult(t,n,s,a){const i=this.bracket.matchStates.get(t);i&&(i.winner=n,i.redAllianceId=s,i.blueAllianceId=a,i.isCompleted=!0)}resolveMatchAlliances(t){const n=this.getMatch(t);if(!n)return{redAllianceId:null,blueAllianceId:null};const s=this.resolveAllianceFromSource(n.redFrom),a=this.resolveAllianceFromSource(n.blueFrom);return{redAllianceId:s,blueAllianceId:a}}resolveAllianceFromSource(t){if(Ds(t))return null;const n=this.getMatch(t),s=this.getMatchState(t);return!n||!s||!s.isCompleted?null:s.winner==="red"?s.redAllianceId:s.blueAllianceId}getAdvancementForWinner(t,n){const s=this.getMatch(t);return s?n==="red"?s.redAdvancement.win:s.blueAdvancement.win:"eliminated"}getAdvancementForLoser(t,n){const s=this.getMatch(t);return s?n==="red"?s.redAdvancement.loss:s.blueAdvancement.loss:"eliminated"}isChampionshipWin(t,n){return this.getAdvancementForWinner(t,n)==="champion"}getMatchWithResolvedAlliances(t){const n=this.getMatch(t),s=this.getMatchState(t),a=this.resolveMatchAlliances(t);return{match:n,state:s,resolvedAlliances:a}}getCurrentChampion(){for(const[t,n]of this.bracket.matchStates)if(n.isCompleted&&n.winner&&this.isChampionshipWin(t,n.winner))return n.winner;return null}getAdvancementPath(t,n){const s=this.getAdvancementForWinner(t,n);return{advancement:s,isChampionship:s==="champion",nextMatchId:typeof s=="number"?s:null}}getAdvancementPathForLoser(t,n){const s=this.getAdvancementForLoser(t,n);return{advancement:s,isEliminated:s==="eliminated",nextMatchId:typeof s=="number"?s:null}}}function Ss(e){if(e<4||e>8)throw new Error("Number of alliances must be between 2 and 8");return ks[e]}let kt;function As(e,t,n){if(e<2)throw new Error("At least 2 alliances are required for a double elimination tournament");const s=Cs(e);return kt=new _s(e),{matches:kt.getMatches().map((l,o)=>Fs(l,t,n,o,s))}}function Cs(e){const t=[];for(let n=0;n<e;n++)t.push(null);return t}function Os(e,t){if(e.round===1){const n=Math.abs(e.redFrom)-1,s=Math.abs(e.blueFrom)-1;return{redAllianceId:t[n]||null,blueAllianceId:t[s]||null}}return{redAllianceId:null,blueAllianceId:null}}function Fs(e,t,n,s,a){const i=new Date(t);i.setMinutes(i.getMinutes()+s*n);const l=e.bracket===0?"upper":"lower",o=Ts(),{redAllianceId:d,blueAllianceId:c}=Os(e,a),u=void 0,m=void 0;return{id:o,red_alliance_id:d,blue_alliance_id:c,scheduled_at:i.toISOString(),round:e.round,match_type:"playoff",bracket:l,match_number:e.matchNumber,winner_advances_to:u,loser_advances_to:m}}function Ts(){return Ot()}const Ie={success:(e,t)=>Y.success(e,{description:t}),actionSuccess:e=>Y.success(`${e} completed successfully!`),saveSuccess:(e="Changes")=>Y.success(`${e} saved successfully!`),deleteSuccess:(e="Item")=>Y.success(`${e} deleted successfully!`),error:(e,t)=>Y.error(e,{description:t}),actionError:(e,t)=>Y.error(`Failed to ${e.toLowerCase()}`,{description:t||"Please try again later."}),saveError:(e="Changes",t)=>Y.error(`Failed to save ${e.toLowerCase()}`,{description:t||"Please check your input and try again."}),deleteError:(e="Item",t)=>Y.error(`Failed to delete ${e.toLowerCase()}`,{description:t||"Please try again later."}),networkError:()=>Y.error("Network Error",{description:"Please check your connection and try again."}),validationError:e=>Y.error("Validation Error",{description:e?`Please check ${e} and try again.`:"Please check your input and try again."}),warning:(e,t)=>Y.warning(e,{description:t}),unsavedChanges:()=>Y.warning("Unsaved Changes",{description:"You have unsaved changes. Are you sure you want to leave?"}),confirmationRequired:e=>Y.warning("Confirmation Required",{description:`Please confirm that you want to ${e.toLowerCase()}.`}),dataLoss:()=>Y.warning("Data Loss Warning",{description:"This action cannot be undone. Are you sure you want to continue?"}),info:(e,t)=>Y.info(e,{description:t}),loading:(e,t)=>Y.loading(e,{description:t}),featureComingSoon:e=>Y.info("Coming Soon",{description:`${e} will be available in a future update.`}),maintenanceMode:()=>Y.info("Maintenance Mode",{description:"The system is currently under maintenance. Some features may be unavailable."}),dismiss:e=>Y.dismiss(e),promise:(e,{loading:t,success:n,error:s})=>Y.promise(e,{loading:t,success:n,error:s})},Ws=()=>({onSuccess:e=>Ie.actionSuccess(e),onError:(e,t)=>Ie.actionError(e,t),onLoading:e=>Ie.loading(`${e}...`,"Please wait while we process your request.")});function Es(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const Is={},Ee={};function Be(e,t){try{const s=(Is[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return s in Ee?Ee[s]:Dt(s,s.split(":"))}catch{if(e in Ee)return Ee[e];const n=e?.match(Bs);return n?Dt(e,n.slice(1)):NaN}}const Bs=/([+-]\d\d):?(\d\d)?/;function Dt(e,t){const n=+(t[0]||0),s=+(t[1]||0);return Ee[e]=n>0?n*60+s:n*60-s}class le extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Be(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),Tt(this),ct(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new le(...n,t):new le(Date.now(),t)}withTimeZone(t){return new le(+this,t)}getTimezoneOffset(){return-Be(this.timeZone,this)}setTime(t){return Date.prototype.setTime.apply(this,arguments),ct(this),+this}[Symbol.for("constructDateFrom")](t){return new le(+new Date(t),this.timeZone)}}const jt=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!jt.test(e))return;const t=e.replace(jt,"$1UTC");le.prototype[t]&&(e.startsWith("get")?le.prototype[e]=function(){return this.internal[t]()}:(le.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),Rs(this),+this},le.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),ct(this),+this}))});function ct(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function Rs(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),Tt(e)}function Tt(e){const t=Be(e.timeZone,e),n=new Date(+e);n.setUTCHours(n.getUTCHours()-1);const s=-new Date(+e).getTimezoneOffset(),a=-new Date(+n).getTimezoneOffset(),i=s-a,l=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&l&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const o=s-t;o&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+o);const d=Be(e.timeZone,e),u=-new Date(+e).getTimezoneOffset()-d,m=d!==t,h=u-o;if(m&&h){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+h);const f=Be(e.timeZone,e),b=d-f;b&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+b),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+b))}}class H extends le{static tz(t,...n){return n.length?new H(...n,t):new H(Date.now(),t)}toISOString(){const[t,n,s]=this.tzComponents(),a=`${t}${n}:${s}`;return this.internal.toISOString().slice(0,-1)+a}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,s,a]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${s} ${n} ${a}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,s,a]=this.tzComponents();return`${t} GMT${n}${s}${a} (${Es(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",s=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),a=String(Math.abs(t)%60).padStart(2,"0");return[n,s,a]}withTimeZone(t){return new H(+this,t)}[Symbol.for("constructDateFrom")](t){return new H(+new Date(t),this.timeZone)}}var v;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(v||(v={}));var R;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(R||(R={}));var te;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(te||(te={}));var Q;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Q||(Q={}));const _t=5,Ps=4;function Ys(e,t){const n=t.startOfMonth(e),s=n.getDay()>0?n.getDay():7,a=t.addDays(e,-s+1),i=t.addDays(a,_t*7-1);return t.getMonth(e)===t.getMonth(i)?_t:Ps}function Wt(e,t){const n=t.startOfMonth(e),s=n.getDay();return s===1?n:s===0?t.addDays(n,-6):t.addDays(n,-1*(s-1))}function $s(e,t){const n=Wt(e,t),s=Ys(e,t);return t.addDays(n,s*7-1)}class pe{constructor(t,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?H.tz(this.options.timeZone):new this.Date,this.newDate=(s,a,i)=>this.overrides?.newDate?this.overrides.newDate(s,a,i):this.options.timeZone?new H(s,a,i,this.options.timeZone):new Date(s,a,i),this.addDays=(s,a)=>this.overrides?.addDays?this.overrides.addDays(s,a):Dn(s,a),this.addMonths=(s,a)=>this.overrides?.addMonths?this.overrides.addMonths(s,a):jn(s,a),this.addWeeks=(s,a)=>this.overrides?.addWeeks?this.overrides.addWeeks(s,a):_n(s,a),this.addYears=(s,a)=>this.overrides?.addYears?this.overrides.addYears(s,a):Sn(s,a),this.differenceInCalendarDays=(s,a)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(s,a):An(s,a),this.differenceInCalendarMonths=(s,a)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(s,a):Cn(s,a),this.eachMonthOfInterval=s=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(s):On(s),this.endOfBroadcastWeek=s=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(s):$s(s,this),this.endOfISOWeek=s=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(s):Fn(s),this.endOfMonth=s=>this.overrides?.endOfMonth?this.overrides.endOfMonth(s):Tn(s),this.endOfWeek=(s,a)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(s,a):Wn(s,this.options),this.endOfYear=s=>this.overrides?.endOfYear?this.overrides.endOfYear(s):En(s),this.format=(s,a,i)=>{const l=this.overrides?.format?this.overrides.format(s,a,this.options):In(s,a,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(l):l},this.getISOWeek=s=>this.overrides?.getISOWeek?this.overrides.getISOWeek(s):Bn(s),this.getMonth=(s,a)=>this.overrides?.getMonth?this.overrides.getMonth(s,this.options):Rn(s,this.options),this.getYear=(s,a)=>this.overrides?.getYear?this.overrides.getYear(s,this.options):Pn(s,this.options),this.getWeek=(s,a)=>this.overrides?.getWeek?this.overrides.getWeek(s,this.options):Yn(s,this.options),this.isAfter=(s,a)=>this.overrides?.isAfter?this.overrides.isAfter(s,a):$n(s,a),this.isBefore=(s,a)=>this.overrides?.isBefore?this.overrides.isBefore(s,a):zn(s,a),this.isDate=s=>this.overrides?.isDate?this.overrides.isDate(s):Ln(s),this.isSameDay=(s,a)=>this.overrides?.isSameDay?this.overrides.isSameDay(s,a):qn(s,a),this.isSameMonth=(s,a)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(s,a):Hn(s,a),this.isSameYear=(s,a)=>this.overrides?.isSameYear?this.overrides.isSameYear(s,a):Zn(s,a),this.max=s=>this.overrides?.max?this.overrides.max(s):Gn(s),this.min=s=>this.overrides?.min?this.overrides.min(s):Un(s),this.setMonth=(s,a)=>this.overrides?.setMonth?this.overrides.setMonth(s,a):Kn(s,a),this.setYear=(s,a)=>this.overrides?.setYear?this.overrides.setYear(s,a):Vn(s,a),this.startOfBroadcastWeek=(s,a)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(s,this):Wt(s,this),this.startOfDay=s=>this.overrides?.startOfDay?this.overrides.startOfDay(s):Qn(s),this.startOfISOWeek=s=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(s):Jn(s),this.startOfMonth=s=>this.overrides?.startOfMonth?this.overrides.startOfMonth(s):Xn(s),this.startOfWeek=(s,a)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(s,this.options):es(s,this.options),this.startOfYear=s=>this.overrides?.startOfYear?this.overrides.startOfYear(s):ts(s),this.options={locale:Ft,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),s={};for(let a=0;a<10;a++)s[a.toString()]=n.format(a);return s}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,s=>n[s]||s)}formatNumber(t){return this.replaceDigits(t.toString())}}const de=new pe;class Et{constructor(t,n,s=de){this.date=t,this.displayMonth=n,this.outside=!!(n&&!s.isSameMonth(t,n)),this.dateLib=s}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class zs{constructor(t,n){this.date=t,this.weeks=n}}class Ls{constructor(t,n){this.days=n,this.weekNumber=t}}function fe(e,t,n=!1,s=de){let{from:a,to:i}=e;const{differenceInCalendarDays:l,isSameDay:o}=s;return a&&i?(l(i,a)<0&&([a,i]=[i,a]),l(t,a)>=(n?1:0)&&l(i,t)>=(n?1:0)):!n&&i?o(i,t):!n&&a?o(a,t):!1}function It(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function ht(e){return!!(e&&typeof e=="object"&&"from"in e)}function Bt(e){return!!(e&&typeof e=="object"&&"after"in e)}function Rt(e){return!!(e&&typeof e=="object"&&"before"in e)}function Pt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Yt(e,t){return Array.isArray(e)&&e.every(t.isDate)}function he(e,t,n=de){const s=Array.isArray(t)?t:[t],{isSameDay:a,differenceInCalendarDays:i,isAfter:l}=n;return s.some(o=>{if(typeof o=="boolean")return o;if(n.isDate(o))return a(e,o);if(Yt(o,n))return o.includes(e);if(ht(o))return fe(o,e,!1,n);if(Pt(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(e.getDay()):o.dayOfWeek===e.getDay();if(It(o)){const d=i(o.before,e),c=i(o.after,e),u=d>0,m=c<0;return l(o.before,o.after)?m&&u:u||m}return Bt(o)?i(e,o.after)>0:Rt(o)?i(o.before,e)>0:typeof o=="function"?o(e):!1})}function qs(e,t,n,s,a){const{disabled:i,hidden:l,modifiers:o,showOutsideDays:d,broadcastCalendar:c,today:u}=t,{isSameDay:m,isSameMonth:h,startOfMonth:f,isBefore:b,endOfMonth:w,isAfter:k}=a,M=n&&f(n),N=s&&w(s),y={[R.focused]:[],[R.outside]:[],[R.disabled]:[],[R.hidden]:[],[R.today]:[]},I={};for(const g of e){const{date:D,displayMonth:x}=g,F=!!(x&&!h(D,x)),P=!!(M&&b(D,M)),$=!!(N&&k(D,N)),z=!!(i&&he(D,i,a)),U=!!(l&&he(D,l,a))||P||$||!c&&!d&&F||c&&d===!1&&F,be=m(D,u??a.today());F&&y.outside.push(g),z&&y.disabled.push(g),U&&y.hidden.push(g),be&&y.today.push(g),o&&Object.keys(o).forEach(ge=>{const re=o?.[ge];re&&he(D,re,a)&&(I[ge]?I[ge].push(g):I[ge]=[g])})}return g=>{const D={[R.focused]:!1,[R.disabled]:!1,[R.hidden]:!1,[R.outside]:!1,[R.today]:!1},x={};for(const F in y){const P=y[F];D[F]=P.some($=>$===g)}for(const F in I)x[F]=I[F].some(P=>P===g);return{...D,...x}}}function Hs(e,t,n={}){return Object.entries(e).filter(([,a])=>a===!0).reduce((a,[i])=>(n[i]?a.push(n[i]):t[R[i]]?a.push(t[R[i]]):t[te[i]]&&a.push(t[te[i]]),a),[t[v.Day]])}function Zs(e){return p.createElement("button",{...e})}function Gs(e){return p.createElement("span",{...e})}function Us(e){const{size:t=24,orientation:n="left",className:s}=e;return p.createElement("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&p.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&p.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&p.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&p.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Ks(e){const{day:t,modifiers:n,...s}=e;return p.createElement("td",{...s})}function Vs(e){const{day:t,modifiers:n,...s}=e,a=p.useRef(null);return p.useEffect(()=>{n.focused&&a.current?.focus()},[n.focused]),p.createElement("button",{ref:a,...s})}function Qs(e){const{options:t,className:n,components:s,classNames:a,...i}=e,l=[a[v.Dropdown],n].join(" "),o=t?.find(({value:d})=>d===i.value);return p.createElement("span",{"data-disabled":i.disabled,className:a[v.DropdownRoot]},p.createElement(s.Select,{className:l,...i},t?.map(({value:d,label:c,disabled:u})=>p.createElement(s.Option,{key:d,value:d,disabled:u},c))),p.createElement("span",{className:a[v.CaptionLabel],"aria-hidden":!0},o?.label,p.createElement(s.Chevron,{orientation:"down",size:18,className:a[v.Chevron]})))}function Js(e){return p.createElement("div",{...e})}function Xs(e){return p.createElement("div",{...e})}function er(e){const{calendarMonth:t,displayIndex:n,...s}=e;return p.createElement("div",{...s},e.children)}function tr(e){const{calendarMonth:t,displayIndex:n,...s}=e;return p.createElement("div",{...s})}function nr(e){return p.createElement("table",{...e})}function sr(e){return p.createElement("div",{...e})}const $t=_.createContext(void 0);function Ye(){const e=_.useContext($t);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function rr(e){const{components:t}=Ye();return p.createElement(t.Dropdown,{...e})}function ar(e){const{onPreviousClick:t,onNextClick:n,previousMonth:s,nextMonth:a,...i}=e,{components:l,classNames:o,labels:{labelPrevious:d,labelNext:c}}=Ye(),u=_.useCallback(h=>{a&&n?.(h)},[a,n]),m=_.useCallback(h=>{s&&t?.(h)},[s,t]);return p.createElement("nav",{...i},p.createElement(l.PreviousMonthButton,{type:"button",className:o[v.PreviousMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":d(s),onClick:m},p.createElement(l.Chevron,{disabled:s?void 0:!0,className:o[v.Chevron],orientation:"left"})),p.createElement(l.NextMonthButton,{type:"button",className:o[v.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":c(a),onClick:u},p.createElement(l.Chevron,{disabled:a?void 0:!0,orientation:"right",className:o[v.Chevron]})))}function or(e){const{components:t}=Ye();return p.createElement(t.Button,{...e})}function ir(e){return p.createElement("option",{...e})}function lr(e){const{components:t}=Ye();return p.createElement(t.Button,{...e})}function dr(e){const{rootRef:t,...n}=e;return p.createElement("div",{...n,ref:t})}function cr(e){return p.createElement("select",{...e})}function ur(e){const{week:t,...n}=e;return p.createElement("tr",{...n})}function mr(e){return p.createElement("th",{...e})}function fr(e){return p.createElement("thead",{"aria-hidden":!0},p.createElement("tr",{...e}))}function hr(e){const{week:t,...n}=e;return p.createElement("th",{...n})}function pr(e){return p.createElement("th",{...e})}function br(e){return p.createElement("tbody",{...e})}function gr(e){const{components:t}=Ye();return p.createElement(t.Dropdown,{...e})}const vr=Object.freeze(Object.defineProperty({__proto__:null,Button:Zs,CaptionLabel:Gs,Chevron:Us,Day:Ks,DayButton:Vs,Dropdown:Qs,DropdownNav:Js,Footer:Xs,Month:er,MonthCaption:tr,MonthGrid:nr,Months:sr,MonthsDropdown:rr,Nav:ar,NextMonthButton:or,Option:ir,PreviousMonthButton:lr,Root:dr,Select:cr,Week:ur,WeekNumber:hr,WeekNumberHeader:pr,Weekday:mr,Weekdays:fr,Weeks:br,YearsDropdown:gr},Symbol.toStringTag,{value:"Module"}));function yr(e){return{...vr,...e}}function xr(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,s])=>{n.startsWith("data-")&&(t[n]=s)}),t}function pt(){const e={};for(const t in v)e[v[t]]=`rdp-${v[t]}`;for(const t in R)e[R[t]]=`rdp-${R[t]}`;for(const t in te)e[te[t]]=`rdp-${te[t]}`;for(const t in Q)e[Q[t]]=`rdp-${Q[t]}`;return e}function zt(e,t,n){return(n??new pe(t)).format(e,"LLLL y")}const wr=zt;function Mr(e,t,n){return(n??new pe(t)).format(e,"d")}function Nr(e,t=de){return t.format(e,"LLLL")}function kr(e,t=de){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function Dr(){return""}function jr(e,t,n){return(n??new pe(t)).format(e,"cccccc")}function Lt(e,t=de){return t.format(e,"yyyy")}const _r=Lt,Sr=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:zt,formatDay:Mr,formatMonthCaption:wr,formatMonthDropdown:Nr,formatWeekNumber:kr,formatWeekNumberHeader:Dr,formatWeekdayName:jr,formatYearCaption:_r,formatYearDropdown:Lt},Symbol.toStringTag,{value:"Module"}));function Ar(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Sr,...e}}function Cr(e,t,n,s,a){const{startOfMonth:i,startOfYear:l,endOfYear:o,eachMonthOfInterval:d,getMonth:c}=a;return d({start:l(e),end:o(e)}).map(h=>{const f=s.formatMonthDropdown(h,a),b=c(h),w=t&&h<i(t)||n&&h>i(n)||!1;return{value:b,label:f,disabled:w}})}function Or(e,t={},n={}){let s={...t?.[v.Day]};return Object.entries(e).filter(([,a])=>a===!0).forEach(([a])=>{s={...s,...n?.[a]}}),s}function Fr(e,t,n){const s=e.today(),a=t?e.startOfISOWeek(s):e.startOfWeek(s),i=[];for(let l=0;l<7;l++){const o=e.addDays(a,l);i.push(o)}return i}function Tr(e,t,n,s){if(!e||!t)return;const{startOfYear:a,endOfYear:i,addYears:l,getYear:o,isBefore:d,isSameYear:c}=s,u=a(e),m=i(t),h=[];let f=u;for(;d(f,m)||c(f,m);)h.push(f),f=l(f,1);return h.map(b=>{const w=n.formatYearDropdown(b,s);return{value:o(b),label:w,disabled:!1}})}function qt(e,t,n){return(n??new pe(t)).format(e,"LLLL y")}const Wr=qt;function Er(e,t,n,s){let a=(s??new pe(n)).format(e,"PPPP");return t?.today&&(a=`Today, ${a}`),a}function Ht(e,t,n,s){let a=(s??new pe(n)).format(e,"PPPP");return t.today&&(a=`Today, ${a}`),t.selected&&(a=`${a}, selected`),a}const Ir=Ht;function Br(){return""}function Rr(e){return"Choose the Month"}function Pr(e){return"Go to the Next Month"}function Yr(e){return"Go to the Previous Month"}function $r(e,t,n){return(n??new pe(t)).format(e,"cccc")}function zr(e,t){return`Week ${e}`}function Lr(e){return"Week Number"}function qr(e){return"Choose the Year"}const Hr=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Wr,labelDay:Ir,labelDayButton:Ht,labelGrid:qt,labelGridcell:Er,labelMonthDropdown:Rr,labelNav:Br,labelNext:Pr,labelPrevious:Yr,labelWeekNumber:zr,labelWeekNumberHeader:Lr,labelWeekday:$r,labelYearDropdown:qr},Symbol.toStringTag,{value:"Module"})),$e=e=>e instanceof HTMLElement?e:null,it=e=>[...e.querySelectorAll("[data-animated-month]")??[]],Zr=e=>$e(e.querySelector("[data-animated-month]")),lt=e=>$e(e.querySelector("[data-animated-caption]")),dt=e=>$e(e.querySelector("[data-animated-weeks]")),Gr=e=>$e(e.querySelector("[data-animated-nav]")),Ur=e=>$e(e.querySelector("[data-animated-weekdays]"));function Kr(e,t,{classNames:n,months:s,focused:a,dateLib:i}){const l=_.useRef(null),o=_.useRef(s),d=_.useRef(!1);_.useLayoutEffect(()=>{const c=o.current;if(o.current=s,!t||!e.current||!(e.current instanceof HTMLElement)||s.length===0||c.length===0||s.length!==c.length)return;const u=i.isSameMonth(s[0].date,c[0].date),m=i.isAfter(s[0].date,c[0].date),h=m?n[Q.caption_after_enter]:n[Q.caption_before_enter],f=m?n[Q.weeks_after_enter]:n[Q.weeks_before_enter],b=l.current,w=e.current.cloneNode(!0);if(w instanceof HTMLElement?(it(w).forEach(y=>{if(!(y instanceof HTMLElement))return;const I=Zr(y);I&&y.contains(I)&&y.removeChild(I);const g=lt(y);g&&g.classList.remove(h);const D=dt(y);D&&D.classList.remove(f)}),l.current=w):l.current=null,d.current||u||a)return;const k=b instanceof HTMLElement?it(b):[],M=it(e.current);if(M&&M.every(N=>N instanceof HTMLElement)&&k&&k.every(N=>N instanceof HTMLElement)){d.current=!0,e.current.style.isolation="isolate";const N=Gr(e.current);N&&(N.style.zIndex="1"),M.forEach((y,I)=>{const g=k[I];if(!g)return;y.style.position="relative",y.style.overflow="hidden";const D=lt(y);D&&D.classList.add(h);const x=dt(y);x&&x.classList.add(f);const F=()=>{d.current=!1,e.current&&(e.current.style.isolation=""),N&&(N.style.zIndex=""),D&&D.classList.remove(h),x&&x.classList.remove(f),y.style.position="",y.style.overflow="",y.contains(g)&&y.removeChild(g)};g.style.pointerEvents="none",g.style.position="absolute",g.style.overflow="hidden",g.setAttribute("aria-hidden","true");const P=Ur(g);P&&(P.style.opacity="0");const $=lt(g);$&&($.classList.add(m?n[Q.caption_before_exit]:n[Q.caption_after_exit]),$.addEventListener("animationend",F));const z=dt(g);z&&z.classList.add(m?n[Q.weeks_before_exit]:n[Q.weeks_after_exit]),y.insertBefore(g,y.firstChild)})}})}function Vr(e,t,n,s){const a=e[0],i=e[e.length-1],{ISOWeek:l,fixedWeeks:o,broadcastCalendar:d}=n??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:m,endOfBroadcastWeek:h,endOfISOWeek:f,endOfMonth:b,endOfWeek:w,isAfter:k,startOfBroadcastWeek:M,startOfISOWeek:N,startOfWeek:y}=s,I=d?M(a,s):l?N(a):y(a),g=d?h(i):l?f(b(i)):w(b(i)),D=u(g,I),x=m(i,a)+1,F=[];for(let z=0;z<=D;z++){const U=c(I,z);if(t&&k(U,t))break;F.push(U)}const $=(d?35:42)*x;if(o&&F.length<$){const z=$-F.length;for(let U=0;U<z;U++){const be=c(F[F.length-1],1);F.push(be)}}return F}function Qr(e){const t=[];return e.reduce((n,s)=>{const a=s.weeks.reduce((i,l)=>[...i,...l.days],t);return[...n,...a]},t)}function Jr(e,t,n,s){const{numberOfMonths:a=1}=n,i=[];for(let l=0;l<a;l++){const o=s.addMonths(e,l);if(t&&o>t)break;i.push(o)}return i}function St(e,t,n,s){const{month:a,defaultMonth:i,today:l=s.today(),numberOfMonths:o=1}=e;let d=a||i||l;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:m}=s;if(n&&c(n,d)<o-1){const h=-1*(o-1);d=u(n,h)}return t&&c(d,t)<0&&(d=t),m(d)}function Xr(e,t,n,s){const{addDays:a,endOfBroadcastWeek:i,endOfISOWeek:l,endOfMonth:o,endOfWeek:d,getISOWeek:c,getWeek:u,startOfBroadcastWeek:m,startOfISOWeek:h,startOfWeek:f}=s,b=e.reduce((w,k)=>{const M=n.broadcastCalendar?m(k,s):n.ISOWeek?h(k):f(k),N=n.broadcastCalendar?i(k):n.ISOWeek?l(o(k)):d(o(k)),y=t.filter(x=>x>=M&&x<=N),I=n.broadcastCalendar?35:42;if(n.fixedWeeks&&y.length<I){const x=t.filter(F=>{const P=I-y.length;return F>N&&F<=a(N,P)});y.push(...x)}const g=y.reduce((x,F)=>{const P=n.ISOWeek?c(F):u(F),$=x.find(U=>U.weekNumber===P),z=new Et(F,k,s);return $?$.days.push(z):x.push(new Ls(P,[z])),x},[]),D=new zs(k,g);return w.push(D),w},[]);return n.reverseMonths?b.reverse():b}function ea(e,t){let{startMonth:n,endMonth:s}=e;const{startOfYear:a,startOfDay:i,startOfMonth:l,endOfMonth:o,addYears:d,endOfYear:c,newDate:u,today:m}=t,{fromYear:h,toYear:f,fromMonth:b,toMonth:w}=e;!n&&b&&(n=b),!n&&h&&(n=t.newDate(h,0,1)),!s&&w&&(s=w),!s&&f&&(s=u(f,11,31));const k=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=l(n):h?n=u(h,0,1):!n&&k&&(n=a(d(e.today??m(),-100))),s?s=o(s):f?s=u(f,11,31):!s&&k&&(s=c(e.today??m())),[n&&i(n),s&&i(s)]}function ta(e,t,n,s){if(n.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:i=1}=n,{startOfMonth:l,addMonths:o,differenceInCalendarMonths:d}=s,c=a?i:1,u=l(e);if(!t)return o(u,c);if(!(d(t,e)<i))return o(u,c)}function na(e,t,n,s){if(n.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:i}=n,{startOfMonth:l,addMonths:o,differenceInCalendarMonths:d}=s,c=a?i??1:1,u=l(e);if(!t)return o(u,-c);if(!(d(u,t)<=0))return o(u,-c)}function sa(e){const t=[];return e.reduce((n,s)=>[...n,...s.weeks],t)}function Ve(e,t){const[n,s]=_.useState(e);return[t===void 0?n:t,s]}function ra(e,t){const[n,s]=ea(e,t),{startOfMonth:a,endOfMonth:i}=t,l=St(e,n,s,t),[o,d]=Ve(l,e.month?l:void 0);_.useEffect(()=>{const D=St(e,n,s,t);d(D)},[e.timeZone]);const c=Jr(o,s,e,t),u=Vr(c,e.endMonth?i(e.endMonth):void 0,e,t),m=Xr(c,u,e,t),h=sa(m),f=Qr(m),b=na(o,n,e,t),w=ta(o,s,e,t),{disableNavigation:k,onMonthChange:M}=e,N=D=>h.some(x=>x.days.some(F=>F.isEqualTo(D))),y=D=>{if(k)return;let x=a(D);n&&x<a(n)&&(x=a(n)),s&&x>a(s)&&(x=a(s)),d(x),M?.(x)};return{months:m,weeks:h,days:f,navStart:n,navEnd:s,previousMonth:b,nextMonth:w,goToMonth:y,goToDay:D=>{N(D)||y(D.date)}}}var ie;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(ie||(ie={}));function At(e){return!e[R.disabled]&&!e[R.hidden]&&!e[R.outside]}function aa(e,t,n,s){let a,i=-1;for(const l of e){const o=t(l);At(o)&&(o[R.focused]&&i<ie.FocusedModifier?(a=l,i=ie.FocusedModifier):s?.isEqualTo(l)&&i<ie.LastFocused?(a=l,i=ie.LastFocused):n(l.date)&&i<ie.Selected?(a=l,i=ie.Selected):o[R.today]&&i<ie.Today&&(a=l,i=ie.Today))}return a||(a=e.find(l=>At(t(l)))),a}function oa(e,t,n,s,a,i,l){const{ISOWeek:o,broadcastCalendar:d}=i,{addDays:c,addMonths:u,addWeeks:m,addYears:h,endOfBroadcastWeek:f,endOfISOWeek:b,endOfWeek:w,max:k,min:M,startOfBroadcastWeek:N,startOfISOWeek:y,startOfWeek:I}=l;let D={day:c,week:m,month:u,year:h,startOfWeek:x=>d?N(x,l):o?y(x):I(x),endOfWeek:x=>d?f(x):o?b(x):w(x)}[e](n,t==="after"?1:-1);return t==="before"&&s?D=k([s,D]):t==="after"&&a&&(D=M([a,D])),D}function Zt(e,t,n,s,a,i,l,o=0){if(o>365)return;const d=oa(e,t,n.date,s,a,i,l),c=!!(i.disabled&&he(d,i.disabled,l)),u=!!(i.hidden&&he(d,i.hidden,l)),m=d,h=new Et(d,m,l);return!c&&!u?h:Zt(e,t,h,s,a,i,l,o+1)}function ia(e,t,n,s,a){const{autoFocus:i}=e,[l,o]=_.useState(),d=aa(t.days,n,s||(()=>!1),l),[c,u]=_.useState(i?d:void 0);return{isFocusTarget:w=>!!d?.isEqualTo(w),setFocused:u,focused:c,blur:()=>{o(c),u(void 0)},moveFocus:(w,k)=>{if(!c)return;const M=Zt(w,k,c,t.navStart,t.navEnd,e,a);M&&(t.goToDay(M),u(M))}}}function la(e,t){const{selected:n,required:s,onSelect:a}=e,[i,l]=Ve(n,a?n:void 0),o=a?n:i,{isSameDay:d}=t,c=f=>o?.some(b=>d(b,f))??!1,{min:u,max:m}=e;return{selected:o,select:(f,b,w)=>{let k=[...o??[]];if(c(f)){if(o?.length===u||s&&o?.length===1)return;k=o?.filter(M=>!d(M,f))}else o?.length===m?k=[f]:k=[...k,f];return a||l(k),a?.(k,f,b,w),k},isSelected:c}}function da(e,t,n=0,s=0,a=!1,i=de){const{from:l,to:o}=t||{},{isSameDay:d,isAfter:c,isBefore:u}=i;let m;if(!l&&!o)m={from:e,to:n>0?void 0:e};else if(l&&!o)d(l,e)?a?m={from:l,to:void 0}:m=void 0:u(e,l)?m={from:e,to:l}:m={from:l,to:e};else if(l&&o)if(d(l,e)&&d(o,e))a?m={from:l,to:o}:m=void 0;else if(d(l,e))m={from:l,to:n>0?void 0:e};else if(d(o,e))m={from:e,to:n>0?void 0:e};else if(u(e,l))m={from:e,to:o};else if(c(e,l))m={from:l,to:e};else if(c(e,o))m={from:l,to:e};else throw new Error("Invalid range");if(m?.from&&m?.to){const h=i.differenceInCalendarDays(m.to,m.from);s>0&&h>s?m={from:e,to:void 0}:n>1&&h<n&&(m={from:e,to:void 0})}return m}function ca(e,t,n=de){const s=Array.isArray(t)?t:[t];let a=e.from;const i=n.differenceInCalendarDays(e.to,e.from),l=Math.min(i,6);for(let o=0;o<=l;o++){if(s.includes(a.getDay()))return!0;a=n.addDays(a,1)}return!1}function Ct(e,t,n=de){return fe(e,t.from,!1,n)||fe(e,t.to,!1,n)||fe(t,e.from,!1,n)||fe(t,e.to,!1,n)}function ua(e,t,n=de){const s=Array.isArray(t)?t:[t];if(s.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:n.isDate(o)?fe(e,o,!1,n):Yt(o,n)?o.some(d=>fe(e,d,!1,n)):ht(o)?o.from&&o.to?Ct(e,{from:o.from,to:o.to},n):!1:Pt(o)?ca(e,o.dayOfWeek,n):It(o)?n.isAfter(o.before,o.after)?Ct(e,{from:n.addDays(o.after,1),to:n.addDays(o.before,-1)},n):he(e.from,o,n)||he(e.to,o,n):Bt(o)||Rt(o)?he(e.from,o,n)||he(e.to,o,n):!1))return!0;const l=s.filter(o=>typeof o=="function");if(l.length){let o=e.from;const d=n.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=d;c++){if(l.some(u=>u(o)))return!0;o=n.addDays(o,1)}}return!1}function ma(e,t){const{disabled:n,excludeDisabled:s,selected:a,required:i,onSelect:l}=e,[o,d]=Ve(a,l?a:void 0),c=l?a:o;return{selected:c,select:(h,f,b)=>{const{min:w,max:k}=e,M=h?da(h,c,w,k,i,t):void 0;return s&&n&&M?.from&&M.to&&ua({from:M.from,to:M.to},n,t)&&(M.from=h,M.to=void 0),l||d(M),l?.(M,h,f,b),M},isSelected:h=>c&&fe(c,h,!1,t)}}function fa(e,t){const{selected:n,required:s,onSelect:a}=e,[i,l]=Ve(n,a?n:void 0),o=a?n:i,{isSameDay:d}=t;return{selected:o,select:(m,h,f)=>{let b=m;return!s&&o&&o&&d(m,o)&&(b=void 0),a||l(b),a?.(b,m,h,f),b},isSelected:m=>o?d(o,m):!1}}function ha(e,t){const n=fa(e,t),s=la(e,t),a=ma(e,t);switch(e.mode){case"single":return n;case"multiple":return s;case"range":return a;default:return}}function pa(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new H(t.today,t.timeZone)),t.month&&(t.month=new H(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new H(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new H(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new H(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new H(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(S=>new H(S,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new H(t.selected.from,t.timeZone):void 0,to:t.selected.to?new H(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:s,labels:a,dateLib:i,locale:l,classNames:o}=_.useMemo(()=>{const S={...Ft,...t.locale};return{dateLib:new pe({locale:S,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:yr(t.components),formatters:Ar(t.formatters),labels:{...Hr,...t.labels},locale:S,classNames:{...pt(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:d,mode:c,navLayout:u,numberOfMonths:m=1,onDayBlur:h,onDayClick:f,onDayFocus:b,onDayKeyDown:w,onDayMouseEnter:k,onDayMouseLeave:M,onNextClick:N,onPrevClick:y,showWeekNumber:I,styles:g}=t,{formatCaption:D,formatDay:x,formatMonthDropdown:F,formatWeekNumber:P,formatWeekNumberHeader:$,formatWeekdayName:z,formatYearDropdown:U}=s,be=ra(t,i),{days:ge,months:re,navStart:Me,navEnd:Fe,previousMonth:Z,nextMonth:G,goToMonth:J}=be,O=qs(ge,t,Me,Fe,i),{isSelected:j,select:A,selected:X}=ha(t,i)??{},{blur:L,focused:ce,isFocusTarget:K,moveFocus:ae,setFocused:ue}=ia(t,be,O,j??(()=>!1),i),{labelDayButton:V,labelGridcell:ve,labelGrid:Ne,labelMonthDropdown:Te,labelNav:We,labelPrevious:Qe,labelNext:je,labelWeekday:Je,labelWeekNumber:Xe,labelWeekNumberHeader:me,labelYearDropdown:ze}=a,et=_.useMemo(()=>Fr(i,t.ISOWeek),[i,t.ISOWeek]),bt=c!==void 0||f!==void 0,tt=_.useCallback(()=>{Z&&(J(Z),y?.(Z))},[Z,J,y]),nt=_.useCallback(()=>{G&&(J(G),N?.(G))},[J,G,N]),Gt=_.useCallback((S,B)=>T=>{T.preventDefault(),T.stopPropagation(),ue(S),A?.(S.date,B,T),f?.(S.date,B,T)},[A,f,ue]),Ut=_.useCallback((S,B)=>T=>{ue(S),b?.(S.date,B,T)},[b,ue]),Kt=_.useCallback((S,B)=>T=>{L(),h?.(S.date,B,T)},[L,h]),Vt=_.useCallback((S,B)=>T=>{const ye={ArrowLeft:[T.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[T.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[T.shiftKey?"year":"week","after"],ArrowUp:[T.shiftKey?"year":"week","before"],PageUp:[T.shiftKey?"year":"month","before"],PageDown:[T.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(ye[T.key]){T.preventDefault(),T.stopPropagation();const[ee,Le]=ye[T.key];ae(ee,Le)}w?.(S.date,B,T)},[ae,w,t.dir]),Qt=_.useCallback((S,B)=>T=>{k?.(S.date,B,T)},[k]),Jt=_.useCallback((S,B)=>T=>{M?.(S.date,B,T)},[M]),Xt=_.useCallback(S=>B=>{const T=Number(B.target.value),ye=i.setMonth(i.startOfMonth(S),T);J(ye)},[i,J]),en=_.useCallback(S=>B=>{const T=Number(B.target.value),ye=i.setYear(i.startOfMonth(S),T);J(ye)},[i,J]),{className:tn,style:nn}=_.useMemo(()=>({className:[o[v.Root],t.className].filter(Boolean).join(" "),style:{...g?.[v.Root],...t.style}}),[o,t.className,t.style,g]),sn=xr(t),gt=_.useRef(null);Kr(gt,!!t.animate,{classNames:o,months:re,focused:ce,dateLib:i});const rn={dayPickerProps:t,selected:X,select:A,isSelected:j,months:re,nextMonth:G,previousMonth:Z,goToMonth:J,getModifiers:O,components:n,classNames:o,styles:g,labels:a,formatters:s};return p.createElement($t.Provider,{value:rn},p.createElement(n.Root,{rootRef:t.animate?gt:void 0,className:tn,style:nn,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],...sn},p.createElement(n.Months,{className:o[v.Months],style:g?.[v.Months]},!t.hideNavigation&&!u&&p.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:o[v.Nav],style:g?.[v.Nav],"aria-label":We(),onPreviousClick:tt,onNextClick:nt,previousMonth:Z,nextMonth:G}),re.map((S,B)=>{const T=Cr(S.date,Me,Fe,s,i),ye=Tr(Me,Fe,s,i);return p.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:o[v.Month],style:g?.[v.Month],key:B,displayIndex:B,calendarMonth:S},u==="around"&&!t.hideNavigation&&B===0&&p.createElement(n.PreviousMonthButton,{type:"button",className:o[v.PreviousMonthButton],tabIndex:Z?void 0:-1,"aria-disabled":Z?void 0:!0,"aria-label":Qe(Z),onClick:tt,"data-animated-button":t.animate?"true":void 0},p.createElement(n.Chevron,{disabled:Z?void 0:!0,className:o[v.Chevron],orientation:t.dir==="rtl"?"right":"left"})),p.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:o[v.MonthCaption],style:g?.[v.MonthCaption],calendarMonth:S,displayIndex:B},d?.startsWith("dropdown")?p.createElement(n.DropdownNav,{className:o[v.Dropdowns],style:g?.[v.Dropdowns]},d==="dropdown"||d==="dropdown-months"?p.createElement(n.MonthsDropdown,{className:o[v.MonthsDropdown],"aria-label":Te(),classNames:o,components:n,disabled:!!t.disableNavigation,onChange:Xt(S.date),options:T,style:g?.[v.Dropdown],value:i.getMonth(S.date)}):p.createElement("span",null,F(S.date,i)),d==="dropdown"||d==="dropdown-years"?p.createElement(n.YearsDropdown,{className:o[v.YearsDropdown],"aria-label":ze(i.options),classNames:o,components:n,disabled:!!t.disableNavigation,onChange:en(S.date),options:ye,style:g?.[v.Dropdown],value:i.getYear(S.date)}):p.createElement("span",null,U(S.date,i)),p.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},D(S.date,i.options,i))):p.createElement(n.CaptionLabel,{className:o[v.CaptionLabel],role:"status","aria-live":"polite"},D(S.date,i.options,i))),u==="around"&&!t.hideNavigation&&B===m-1&&p.createElement(n.NextMonthButton,{type:"button",className:o[v.NextMonthButton],tabIndex:G?void 0:-1,"aria-disabled":G?void 0:!0,"aria-label":je(G),onClick:nt,"data-animated-button":t.animate?"true":void 0},p.createElement(n.Chevron,{disabled:G?void 0:!0,className:o[v.Chevron],orientation:t.dir==="rtl"?"left":"right"})),B===m-1&&u==="after"&&!t.hideNavigation&&p.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:o[v.Nav],style:g?.[v.Nav],"aria-label":We(),onPreviousClick:tt,onNextClick:nt,previousMonth:Z,nextMonth:G}),p.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":Ne(S.date,i.options,i)||void 0,className:o[v.MonthGrid],style:g?.[v.MonthGrid]},!t.hideWeekdays&&p.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:o[v.Weekdays],style:g?.[v.Weekdays]},I&&p.createElement(n.WeekNumberHeader,{"aria-label":me(i.options),className:o[v.WeekNumberHeader],style:g?.[v.WeekNumberHeader],scope:"col"},$()),et.map((ee,Le)=>p.createElement(n.Weekday,{"aria-label":Je(ee,i.options,i),className:o[v.Weekday],key:Le,style:g?.[v.Weekday],scope:"col"},z(ee,i.options,i)))),p.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:o[v.Weeks],style:g?.[v.Weeks]},S.weeks.map((ee,Le)=>p.createElement(n.Week,{className:o[v.Week],key:ee.weekNumber,style:g?.[v.Week],week:ee},I&&p.createElement(n.WeekNumber,{week:ee,style:g?.[v.WeekNumber],"aria-label":Xe(ee.weekNumber,{locale:l}),className:o[v.WeekNumber],scope:"row",role:"rowheader"},P(ee.weekNumber,i)),ee.days.map(q=>{const{date:oe}=q,E=O(q);if(E[R.focused]=!E.hidden&&!!ce?.isEqualTo(q),E[te.selected]=j?.(oe)||E.selected,ht(X)){const{from:st,to:rt}=X;E[te.range_start]=!!(st&&rt&&i.isSameDay(oe,st)),E[te.range_end]=!!(st&&rt&&i.isSameDay(oe,rt)),E[te.range_middle]=fe(X,oe,!0,i)}const an=Or(E,g,t.modifiersStyles),on=Hs(E,o,t.modifiersClassNames),ln=!bt&&!E.hidden?ve(oe,E,i.options,i):void 0;return p.createElement(n.Day,{key:`${i.format(oe,"yyyy-MM-dd")}_${i.format(q.displayMonth,"yyyy-MM")}`,day:q,modifiers:E,className:on.join(" "),style:an,role:"gridcell","aria-selected":E.selected||void 0,"aria-label":ln,"data-day":i.format(oe,"yyyy-MM-dd"),"data-month":q.outside?i.format(oe,"yyyy-MM"):void 0,"data-selected":E.selected||void 0,"data-disabled":E.disabled||void 0,"data-hidden":E.hidden||void 0,"data-outside":q.outside||void 0,"data-focused":E.focused||void 0,"data-today":E.today||void 0},!E.hidden&&bt?p.createElement(n.DayButton,{className:o[v.DayButton],style:g?.[v.DayButton],type:"button",day:q,modifiers:E,disabled:E.disabled||void 0,tabIndex:K(q)?0:-1,"aria-label":V(oe,E,i.options,i),onClick:Gt(q,E),onBlur:Kt(q,E),onFocus:Ut(q,E),onKeyDown:Vt(q,E),onMouseEnter:Qt(q,E),onMouseLeave:Jt(q,E)},x(oe,i.options,i)):!E.hidden&&x(q.date,i.options,i))}))))))})),t.footer&&p.createElement(n.Footer,{className:o[v.Footer],style:g?.[v.Footer],role:"status","aria-live":"polite"},t.footer)))}function ba({className:e,classNames:t,showOutsideDays:n=!0,captionLayout:s="label",buttonVariant:a="ghost",formatters:i,components:l,...o}){const d=pt();return r.jsx(pa,{showOutsideDays:n,className:C("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:s,formatters:{formatMonthDropdown:c=>c.toLocaleString("default",{month:"short"}),...i},classNames:{root:C("w-fit",d.root),months:C("flex gap-4 flex-col md:flex-row relative",d.months),month:C("flex flex-col w-full gap-4",d.month),nav:C("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",d.nav),button_previous:C(vt({variant:a}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",d.button_previous),button_next:C(vt({variant:a}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",d.button_next),month_caption:C("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",d.month_caption),dropdowns:C("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",d.dropdowns),dropdown_root:C("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",d.dropdown_root),dropdown:C("absolute bg-popover inset-0 opacity-0",d.dropdown),caption_label:C("select-none font-medium",s==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",d.caption_label),table:"w-full border-collapse",weekdays:C("flex",d.weekdays),weekday:C("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",d.weekday),week:C("flex w-full mt-2",d.week),week_number_header:C("select-none w-(--cell-size)",d.week_number_header),week_number:C("text-[0.8rem] select-none text-muted-foreground",d.week_number),day:C("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",d.day),range_start:C("rounded-l-md bg-accent",d.range_start),range_middle:C("rounded-none",d.range_middle),range_end:C("rounded-r-md bg-accent",d.range_end),today:C("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",d.today),outside:C("text-muted-foreground aria-selected:text-muted-foreground",d.outside),disabled:C("text-muted-foreground opacity-50",d.disabled),hidden:C("invisible",d.hidden),...t},components:{Root:({className:c,rootRef:u,...m})=>r.jsx("div",{"data-slot":"calendar",ref:u,className:C(c),...m}),Chevron:({className:c,orientation:u,...m})=>u==="left"?r.jsx(rs,{className:C("size-4",c),...m}):u==="right"?r.jsx(Oe,{className:C("size-4",c),...m}):r.jsx(Pe,{className:C("size-4",c),...m}),DayButton:ga,WeekNumber:({children:c,...u})=>r.jsx("td",{...u,children:r.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:c})}),...l},...o})}function ga({className:e,day:t,modifiers:n,...s}){const a=pt(),i=_.useRef(null);return _.useEffect(()=>{n.focused&&i.current?.focus()},[n.focused]),r.jsx(Se,{ref:i,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:C("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",a.day,e),...s})}function va({...e}){return r.jsx(fn,{"data-slot":"popover",...e})}function ya({...e}){return r.jsx(hn,{"data-slot":"popover-trigger",...e})}function xa({className:e,align:t="center",sideOffset:n=4,...s}){return r.jsx(pn,{children:r.jsx(bn,{"data-slot":"popover-content",align:t,sideOffset:n,className:C("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...s})})}function wa({day:e,setDay:t,startTime:n,setStartTime:s,rrRounds:a,setRrRounds:i,intervalMin:l,setIntervalMin:o,doubleEliminationInterval:d,setDoubleEliminationInterval:c,lunchDurationMin:u,setLunchDurationMin:m,desiredLunchTime:h,setDesiredLunchTime:f,onGenerate:b,status:w}){const{alliances:k}=Ke(),{onSuccess:M}=Ws();return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[r.jsxs(ne,{className:"flex-grow",children:[r.jsx(Ae,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Event Details"]})}),r.jsx(se,{className:"space-y-6",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"event-day",children:"Event Day"}),r.jsxs(va,{children:[r.jsx(ya,{asChild:!0,children:r.jsxs(Se,{variant:"outline",className:"w-full justify-start font-normal",children:[r.jsx(Re,{className:"mr-2 h-4 w-4"}),e?e.toDateString():"Pick a date"]})}),r.jsx(xa,{align:"start",className:"p-0",children:r.jsx(ba,{mode:"single",selected:e,onSelect:t,initialFocus:!0,required:!0})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"start-time",children:"Start Time"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ke,{id:"start-time",type:"time",value:n,onChange:N=>s(N.target.value),className:"pl-10"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"desired-lunch-time",children:"Desired Lunch Time"}),r.jsxs(qe,{children:[r.jsx(He,{asChild:!0,children:r.jsx(ke,{id:"desired-lunch-time",type:"time",value:h,onChange:N=>f(N.target.value)})}),r.jsx(Ze,{children:r.jsx("p",{children:"Preferred time for lunch break (HH:MM format)"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"lunch-duration",children:"Lunch Duration (minutes)"}),r.jsxs(qe,{children:[r.jsx(He,{asChild:!0,children:r.jsx(ke,{id:"lunch-duration",type:"number",min:15,value:u,onChange:N=>m(Number(N.target.value))})}),r.jsx(Ze,{children:r.jsx("p",{children:"Duration of lunch break"})})]})]})]})})})]}),r.jsxs(ne,{className:"flex-grow",children:[r.jsx(Ae,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"h-4 w-4"}),"Match Settings"]})}),r.jsx(se,{className:"space-y-6",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"alliances",children:"Alliances"}),r.jsx(ke,{id:"alliances",type:"number",min:2,value:k.length,disabled:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"rr-rounds",children:"Round-Robin Rounds"}),r.jsx(ke,{id:"rr-rounds",type:"number",min:1,value:a,onChange:N=>i(Number(N.target.value))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"interval",children:"Minutes Between Round Robin Matches"}),r.jsxs(qe,{children:[r.jsx(He,{asChild:!0,children:r.jsx(ke,{id:"interval",type:"number",min:1,value:l,onChange:N=>o(N.target.value)})}),r.jsx(Ze,{children:r.jsx("p",{children:"Time gap between consecutive matches"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xe,{htmlFor:"double-elim-interval",children:"Minutes Between Playoffs Matches"}),r.jsxs(qe,{children:[r.jsx(He,{asChild:!0,children:r.jsx(ke,{id:"double-elim-interval",type:"number",min:1,value:d,onChange:N=>c(N.target.value)})}),r.jsx(Ze,{children:r.jsx("p",{children:"Time gap between consecutive playoffs matches"})})]})]})]})})})]})]}),r.jsx(ne,{children:r.jsxs(se,{className:"space-y-6",children:[r.jsx("div",{className:"flex gap-4",children:r.jsxs(Se,{onClick:()=>{M("Schedule generation"),b()},size:"lg",className:"px-6",children:[r.jsx(mt,{className:"mr-2 h-4 w-4"}),"Generate Schedule"]})}),w&&r.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:r.jsx("div",{className:"text-sm text-muted-foreground",children:w})})]})})]})}function ut({block:e,blockIndex:t,isExpanded:n,onToggle:s}){const{getAllianceName:a,alliances:i}=Ke(),l=d=>d&&i.find(c=>c.id===d)||null;if(e.activity.type!=="matches"&&e.activity.type!=="playoffs")return null;const o=e.activity;return r.jsxs(ne,{children:[r.jsx(Ae,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>s(t),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ue,{className:"border",children:we(new Date(e.startTime))}),r.jsx(Ce,{className:"text-lg font-semibold",children:o.type==="matches"?`RR Round ${o.round+1}`:o.description})]}),n?r.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"}):r.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"})]})}),n&&r.jsx(se,{children:r.jsx("ul",{className:"grid gap-2",children:o.matches.map((d,c)=>{const u=l(d.red_alliance_id),m=l(d.blue_alliance_id);return r.jsx("li",{children:r.jsx("div",{className:"flex items-center p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:d.scheduled_at?we(new Date(d.scheduled_at)):"TBD"}),r.jsxs(Ue,{children:["Match ",c+1]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[u?.emblem_image_url?r.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-muted flex-shrink-0",children:r.jsx("img",{src:u.emblem_image_url,alt:`${u.name} emblem`,className:"w-full h-full object-cover",onError:h=>{h.target.style.display="none"}})}):r.jsx("div",{className:"w-6 h-6 rounded-full bg-muted flex items-center justify-center text-xs font-bold text-muted-foreground",children:u?.name.charAt(0)||"?"}),r.jsx("span",{className:"text-red-600 font-medium",children:a(d.red_alliance_id)})]}),r.jsx("span",{className:"text-muted-foreground",children:"vs"}),r.jsxs("div",{className:"flex items-center gap-2",children:[m?.emblem_image_url?r.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-muted flex-shrink-0",children:r.jsx("img",{src:m.emblem_image_url,alt:`${m.name} emblem`,className:"w-full h-full object-cover",onError:h=>{h.target.style.display="none"}})}):r.jsx("div",{className:"w-6 h-6 rounded-full bg-muted flex items-center justify-center text-xs font-bold text-muted-foreground",children:m?.name.charAt(0)||"?"}),r.jsx("span",{className:"text-blue-600 font-medium",children:a(d.blue_alliance_id)})]})]})]})})},`${d.scheduled_at}-${c}`)})})})]})}function Ma({block:e,blockIndex:t,isExpanded:n,onToggle:s}){return r.jsxs(ne,{children:[r.jsx(Ae,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>s(t),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ue,{className:"border",children:we(new Date(e.startTime))}),r.jsx(Ce,{className:"text-lg font-semibold",children:" Lunch Break"})]}),n?r.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"}):r.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"})]})}),n&&r.jsx(se,{children:r.jsxs("div",{className:"text-muted-foreground",children:[we(new Date(e.startTime))," - ",e.duration," minutes"]})})]})}function Na({block:e,blockIndex:t,isExpanded:n,onToggle:s}){const{getAllianceName:a}=Ke();return r.jsxs(ne,{children:[r.jsx(Ae,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>s(t),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ue,{className:"border",children:we(new Date(e.startTime))}),r.jsxs(Ce,{className:"text-lg font-semibold",children:[" ",e.activity.description]})]}),n?r.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"}):r.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"})]})}),n&&r.jsxs(se,{children:[r.jsxs("div",{className:"text-muted-foreground mb-4",children:[we(new Date(e.startTime))," - ",e.duration," minutes"]}),r.jsx("ul",{className:"grid gap-2",children:e.activity.matches.map((i,l)=>r.jsx("li",{children:r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold",children:l+1}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-red-600 font-medium",children:a(i.red_alliance_id)}),r.jsx("span",{className:"text-muted-foreground",children:"vs"}),r.jsx("span",{className:"text-blue-600 font-medium",children:a(i.blue_alliance_id)})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:i.scheduled_at?we(new Date(i.scheduled_at)):"TBD"})]})},`${i.scheduled_at}-${l}`))})]})]})}function ka({block:e,blockIndex:t,isExpanded:n,onToggle:s}){return e.activity.type==="matches"?r.jsx(ut,{block:e,blockIndex:t,isExpanded:n,onToggle:s}):e.activity.type==="playoffs"?r.jsx(Na,{block:e,blockIndex:t,isExpanded:n,onToggle:s}):e.activity.type==="lunch"?r.jsx(Ma,{block:e,blockIndex:t,isExpanded:n,onToggle:s}):null}function Da({generatedBlocks:e,expandedRounds:t,onSave:n,onToggleRound:s,isSaving:a}){return e.length===0?r.jsx(ne,{children:r.jsx(se,{className:"pt-6",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(mt,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No generated schedule yet."}),r.jsx("p",{className:"text-sm",children:"Go to the Configuration tab to generate a schedule."})]})})}):r.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsx(Se,{onClick:n,size:"lg",className:"px-6",disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(as,{className:"mr-2 h-4 w-4"}),"Save to Database"]})})}),r.jsx(ft,{className:"flex-1",children:r.jsx("div",{className:"space-y-4 pr-4",children:e.map((i,l)=>r.jsx("div",{children:r.jsx(ka,{block:i,blockIndex:l,isExpanded:t.has(l),onToggle:s})},l))})})]})}function ja({scheduleError:e,hasExistingData:t,scheduleLoading:n,transformedExistingSchedule:s,expandedRounds:a,onToggleRound:i}){return e?r.jsx(ne,{children:r.jsx(se,{className:"pt-6",children:r.jsxs("div",{className:"text-center text-red-600",children:[r.jsx(Re,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"Error loading schedule"}),r.jsx("p",{className:"text-sm",children:e.message}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This might be due to database permissions. Check the browser console for details."})]})})}):t?r.jsx(ft,{className:"flex-1",children:r.jsxs("div",{className:"space-y-4 pr-4",children:[n&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading schedule..."})]}),s.map((l,o)=>r.jsx("div",{children:l.activity.type==="matches"?r.jsx(ut,{block:l,blockIndex:o,isExpanded:a.has(o),onToggle:i}):l.activity.type==="playoffs"?r.jsx(ut,{block:l,blockIndex:o,isExpanded:a.has(o),onToggle:i}):r.jsxs(ne,{children:[r.jsx(Ae,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>i(o),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{className:"text-lg font-semibold text-yellow-700",children:" Lunch Break"}),a.has(o)?r.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"}):r.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"})]})}),a.has(o)&&r.jsx(se,{children:r.jsxs("div",{className:"text-muted-foreground",children:["Starting at ",we(new Date(l.startTime))," -"," ",l.activity.duration," minutes"]})})]})},o))]})}):r.jsx(ne,{children:r.jsx(se,{className:"pt-6",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(Re,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No existing schedule found."}),r.jsx("p",{className:"text-sm",children:"Generate and save a schedule to see it here."})]})})})}function _a({...e}){return r.jsx(gn,{"data-slot":"collapsible",...e})}function Sa({...e}){return r.jsx(vn,{"data-slot":"collapsible-trigger",...e})}function Aa({...e}){return r.jsx(yn,{"data-slot":"collapsible-content",...e})}function Ca({stats:e}){return r.jsxs(_a,{children:[r.jsx(Sa,{asChild:!0,children:r.jsxs(Se,{variant:"outline",className:"w-full justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(os,{className:"h-4 w-4"}),"Schedule Statistics"]}),r.jsx(Oe,{className:"h-4 w-4"})]})}),r.jsx(Aa,{children:r.jsx(ne,{className:"mt-2",children:r.jsxs(se,{className:"pt-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.totalMatches}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Matches"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.totalRounds}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Rounds"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Math.floor(e.totalMatches/e.totalRounds)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Matches per Round"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:e.avgMatchesPerAlliance.toFixed(1)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg per Alliance"})]})]}),r.jsx(ft,{className:"h-64",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"text-left",children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"py-2 pr-4 font-medium",children:"Alliance"}),r.jsx("th",{className:"py-2 pr-4 font-medium",children:"Matches"}),r.jsx("th",{className:"py-2 pr-4 font-medium text-red-600",children:"Red"}),r.jsx("th",{className:"py-2 pr-4 font-medium text-blue-600",children:"Blue"}),r.jsx("th",{className:"py-2 pr-4 font-medium",children:"Avg Turnaround"}),r.jsx("th",{className:"py-2 pr-4 font-medium",children:"Range"})]})}),r.jsx("tbody",{children:e.rows.map(t=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-2 pr-4 font-medium",children:t.name}),r.jsx("td",{className:"py-2 pr-4",children:t.matches}),r.jsx("td",{className:"py-2 pr-4 text-red-600 font-medium",children:t.redMatches}),r.jsx("td",{className:"py-2 pr-4 text-blue-600 font-medium",children:t.blueMatches}),r.jsxs("td",{className:"py-2 pr-4",children:[t.avgMinutes," min"]}),r.jsxs("td",{className:"py-2 pr-4 text-muted-foreground",children:[t.minMinutes,"-",t.maxMinutes," min"]})]},t.id))})]})})]})})})]})}function Oa(e,t){return e.map(n=>{if(n.type==="match"&&n.match_ids&&n.match_ids.length>0){const s=n.match_ids.map(o=>t.find(d=>d.id===o)).filter(o=>o!==void 0).map((o,d)=>({id:o.id,red_alliance_id:o.red_alliance_id,blue_alliance_id:o.blue_alliance_id,scheduled_at:o.scheduled_at?new Date(o.scheduled_at).toISOString():new Date().toISOString(),match_type:o.match_type,round:d+1})),a=n.name.match(/Round (\d+)/),i=a?parseInt(a[1])-1:0,l=n.end_time?Math.round((new Date(n.end_time).getTime()-new Date(n.start_time).getTime())/6e4):s.length*5;return{startTime:n.start_time,duration:l,activity:{type:"matches",matches:s,round:i}}}else if(n.type==="playoff"&&n.match_ids&&n.match_ids.length>0){const s=n.match_ids.map(o=>t.find(d=>d.id===o)).filter(o=>o!==void 0).map((o,d)=>({id:o.id,red_alliance_id:o.red_alliance_id,blue_alliance_id:o.blue_alliance_id,scheduled_at:o.scheduled_at?new Date(o.scheduled_at).toISOString():new Date().toISOString(),match_type:o.match_type,round:d+1,bracket:"upper",match_number:d+1,winner_advances_to:void 0,loser_advances_to:void 0})),a=n.name.match(/Round (\d+)/),i=a?parseInt(a[1])-1:0,l=n.end_time?Math.round((new Date(n.end_time).getTime()-new Date(n.start_time).getTime())/6e4):s.length*5;return{startTime:n.start_time,duration:l,activity:{type:"playoffs",matches:s,round:i,description:n.name}}}else if(n.type==="lunch_break"){const s=n.end_time?Math.round((new Date(n.end_time).getTime()-new Date(n.start_time).getTime())/6e4):60;return{startTime:n.start_time,duration:s,activity:{type:"lunch",duration:s}}}else{const s=n.end_time?Math.round((new Date(n.end_time).getTime()-new Date(n.start_time).getTime())/6e4):30;return{startTime:n.start_time,duration:s,activity:{type:"matches",matches:[],round:0}}}})}const De={day:new Date,startTime:"09:00",rrRounds:4,intervalMin:"10",doubleEliminationInterval:"15",lunchDurationMin:60,desiredLunchTime:"12:00"};function Ha(){const[e,t]=_.useState(null),n=ns(),{data:s}=xt({queryKey:["auth","user"],queryFn:async()=>{const{data:{user:O}}=await _e.auth.getUser();return{user:O}}}),a=s?.user,[i,l]=_.useState(De.day),[o,d]=_.useState(De.startTime),[c,u]=_.useState(De.rrRounds),[m,h]=_.useState(De.intervalMin),[f,b]=_.useState(De.doubleEliminationInterval),[w,k]=_.useState(De.lunchDurationMin),[M,N]=_.useState(De.desiredLunchTime),[y,I]=_.useState([]),[g,D]=_.useState(new Set),{alliances:x}=Ke(),{matches:F}=ss(),{data:P=[],isLoading:$,error:z}=xt({queryKey:["schedule","list"],queryFn:async()=>{const{data:O,error:j}=await _e.from("schedule").select("*").order("start_time");if(j)throw console.error("Schedule query error:",j),j;return console.log("Schedule data loaded:",O?.length||0,"records"),O??[]}}),U=_.useMemo(()=>P.length===0?[]:Oa(P,F),[P,F]),be=P.length>0;function ge(){if(t(null),I([]),!i||!o||!m||!c){t("Please pick the event day, start time, interval, and number of rounds.");return}if(x.length<2){t("Need at least 2 alliances.");return}try{const j=ps(x,{day:i,startTime:o,intervalMin:m,rrRounds:c,doubleEliminationInterval:f,lunchDurationMin:w,desiredLunchTime:M});I(j);const A=j.at(-1);let X;if(A){const V=new Date(A.startTime);V.setMinutes(V.getMinutes()+A.duration),X=V.toISOString()}else X=new Date().toISOString();const L=As(x.length,new Date(X),parseInt(f)),ce=[],K={};L.matches.forEach(V=>{V.round!==void 0&&(K[V.round]||(K[V.round]=[]),K[V.round].push(V))});const ae=new Date(X);Object.keys(K).forEach(V=>{const ve=parseInt(V),Ne=K[ve]||[];if(Ne.length===0)return;let Te=new Date(ae);for(let me=1;me<ve;me++){const ze=K[me]||[];if(ze.length>0){const et=ze.length*parseInt(f);Te=new Date(Te.getTime()+et*6e4)}}const We=Ne.filter(me=>me.bracket==="upper"),Qe=Ne.filter(me=>me.bracket==="lower");let je="";We.length>0&&Qe.length>0?je=`Round ${ve} - Upper & Lower Bracket`:We.length>0?je=`Round ${ve} - Upper Bracket`:je=`Round ${ve} - Lower Bracket`;const Je=Ne.length*parseInt(f),Xe={startTime:Te.toISOString(),duration:Je,activity:{type:"playoffs",matches:Ne,round:ve,description:je}};ce.push(Xe)});const ue=[...j,...ce];I(ue),t(`Schedules generated successfully! Round robin with ${j.length} blocks and double elimination with ${L.matches.length} matches across ${Object.keys(K).length} rounds. Total: ${ue.length} blocks.`)}catch(O){t(`Generation failed: ${O instanceof Error?O.message:"Unknown error"}`)}}const re=_.useMemo(()=>y.filter(O=>O.activity.type==="matches"||O.activity.type==="playoffs").flatMap(O=>O.activity.matches),[y]),Me=wt({mutationFn:async O=>{const{error:j}=await _e.from("matches").insert(O);if(j)throw j;return!0},onSuccess:(O,j)=>{t(`Saved ${j.length} matches.`),n.invalidateQueries({queryKey:["matches","polling"]})},onError:O=>{t(`Save failed: ${O?.message??"Unknown error"}`)}});function Fe(){if(re.length===0)return;t("Saving schedule to database...");const O=re.map((j,A)=>({id:j.id,name:`Round ${j.round} - Match ${A+1}`,red_alliance_id:j.red_alliance_id,blue_alliance_id:j.blue_alliance_id,scheduled_at:j.scheduled_at,red_score:null,blue_score:null,red_auto_score:null,blue_auto_score:null,red_coral_rp:!1,red_auto_rp:!1,red_barge_rp:!1,blue_coral_rp:!1,blue_auto_rp:!1,blue_barge_rp:!1,match_type:j.match_type}));Me.mutateAsync(O).then(()=>{const j=y.map((A,X)=>{if(A.activity.type==="matches"){const L=X===0?0:y.slice(0,X).filter(ae=>ae.activity.type==="matches").reduce((ae,ue)=>ae+ue.activity.matches.length,0),ce=re.slice(L,L+A.activity.matches.length).map(ae=>ae.id),K=new Date(A.startTime);return K.setMinutes(K.getMinutes()+A.duration),{start_time:A.startTime,end_time:K.toISOString(),name:`Round ${A.activity.round+1}`,description:`${A.activity.matches.length} matches`,type:"match",match_ids:ce}}else if(A.activity.type==="lunch"){const L=new Date(A.startTime);return L.setMinutes(L.getMinutes()+A.duration),{start_time:A.startTime,end_time:L.toISOString(),name:"Lunch Break",description:`${A.duration} minutes`,type:"lunch_break",match_ids:null}}else{const L=new Date(A.startTime);return L.setMinutes(L.getMinutes()+A.duration),{start_time:A.startTime,end_time:L.toISOString(),name:A.activity.description,description:`${A.activity.matches.length} matches`,type:"playoff",match_ids:A.activity.matches.map(ce=>ce.id)}}});_e.from("schedule").insert(j).then(({error:A})=>{A?(console.error("Failed to save schedule:",A),t(` Failed to save schedule: ${A.message}`)):(t(" Schedule saved successfully! You can now view it in the Existing Schedule tab."),n.invalidateQueries({queryKey:["schedule","list"]}))})}).catch(j=>{console.error("Failed to save matches:",j),t(` Failed to save matches: ${j.message||"Unknown error"}`)})}const Z=wt({mutationFn:async()=>{const{error:O}=await _e.from("schedule").delete().gte("id","00000000-0000-0000-0000-000000000000");if(O)throw O;const{error:j}=await _e.from("matches").delete().gte("id","00000000-0000-0000-0000-000000000000");if(j)throw j;return!0},onSuccess:()=>{I([]),t("All schedule data cleared."),Ie.info("Data Cleared","All match and schedule data has been successfully cleared."),n.invalidateQueries({queryKey:["schedule","list"]}),n.invalidateQueries({queryKey:["matches","polling"]})},onError:O=>{const j=`Clear failed: ${O?.message??"Unknown error"}`;t(j),Ie.error("Clear Failed",j)}});function G(O){const j=new Set(g);j.has(O)?j.delete(O):j.add(O),D(j)}const J=_.useMemo(()=>{if(y.length===0)return null;const j=y.filter(A=>A.activity.type==="matches").flatMap(A=>A.activity.matches);return vs(j,x)},[y,x]);return r.jsx(xn,{children:r.jsxs("div",{className:"h-screen flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"Schedule"}),r.jsxs(wn,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(Se,{variant:"outline",size:"sm",children:r.jsx(is,{className:"h-4 w-4"})})}),r.jsxs(Nn,{align:"end",className:"w-56",children:[r.jsx(kn,{children:"Schedule Actions"}),r.jsx(yt,{}),r.jsxs(Ge,{onClick:()=>window.location.reload(),children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"Refresh Data"]}),r.jsxs(Ge,{disabled:!0,children:[r.jsx(ds,{className:"mr-2 h-4 w-4"}),"Export Schedule"]}),r.jsxs(Ge,{disabled:!0,children:[r.jsx(cs,{className:"mr-2 h-4 w-4"}),"Import Schedule"]}),r.jsx(yt,{}),a&&r.jsxs(Ge,{onClick:()=>Z.mutate(),variant:"destructive",disabled:Z.isPending,children:[r.jsx(us,{className:"mr-2 h-4 w-4"}),Z.isPending?"Clearing...":"Clear All Data"]})]})]})]}),r.jsxs(fs,{defaultValue:a?"config":"existing",className:"flex-1 flex flex-col space-y-4",children:[r.jsxs(hs,{className:`grid w-full ${a?"grid-cols-3":"grid-cols-1"}`,children:[a&&r.jsxs(r.Fragment,{children:[r.jsxs(at,{value:"config",className:"flex items-center gap-2",children:[r.jsx(ms,{className:"h-4 w-4"}),"Configuration"]}),r.jsxs(at,{value:"generated",className:"flex items-center gap-2",children:[r.jsx(mt,{className:"h-4 w-4"}),"Generated Schedule"]})]}),r.jsxs(at,{value:"existing",className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Existing Schedule"]})]}),a&&r.jsx(ot,{value:"config",className:"flex-1 space-y-6",children:r.jsx(wa,{day:i,setDay:l,startTime:o,setStartTime:d,rrRounds:c,setRrRounds:u,intervalMin:m,setIntervalMin:h,doubleEliminationInterval:f,setDoubleEliminationInterval:b,lunchDurationMin:w,setLunchDurationMin:k,desiredLunchTime:M,setDesiredLunchTime:N,onGenerate:ge,status:e,alliances:x})}),a&&r.jsx(ot,{value:"generated",className:"flex-1 flex flex-col space-y-6",children:r.jsx(Da,{generatedBlocks:y,expandedRounds:g,setExpandedRounds:D,onSave:Fe,onToggleRound:G,isSaving:Me.isPending})}),r.jsx(ot,{value:"existing",className:"flex-1 flex flex-col space-y-4",children:r.jsx(ja,{scheduleError:z,hasExistingData:be,scheduleLoading:$,transformedExistingSchedule:U,expandedRounds:g,onToggleRound:G})})]}),a&&J&&r.jsx(Ca,{stats:J})]})})}export{Ha as default};
