import{j as s}from"./index-BzX4-QBV.js";function m({rows:i,showWLT:o=!1,showRank:c=!0,size:t="sm",className:d}){const u=t==="lg"?"text-2xl md:text-3xl":"text-sm",e=t==="lg"?"py-4 px-4":"py-1 pr-3";return s.jsx("div",{className:d,children:s.jsxs("table",{className:`w-full ${u}`,children:[s.jsx("thead",{className:t==="lg"?"sticky top-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60":"opacity-70 text-left",children:s.jsxs("tr",{className:t==="lg"?"text-left border-b":"text-left",children:[c&&s.jsx("th",{className:e,children:"Rank"}),s.jsx("th",{className:e,children:"Alliance"}),s.jsx("th",{className:e,children:"Played"}),o&&s.jsx("th",{className:e,children:"W-L-T"}),s.jsx("th",{className:e,children:"Avg RP"}),s.jsx("th",{className:e.replace("pr-3",""),children:"Avg Score"})]})}),s.jsx("tbody",{children:i.map((l,a)=>s.jsxs("tr",{className:t==="lg"?`border-b ${a%2===0?"bg-muted/30":""}`:"border-t",children:[c&&s.jsx("td",{className:e+" font-medium",children:l.rank??a+1}),s.jsx("td",{className:e,children:l.name}),s.jsx("td",{className:e,children:l.played}),o&&s.jsxs("td",{className:e,children:[l.wins??0,"-",l.losses??0,"-",l.ties??0]}),s.jsx("td",{className:e,children:l.avgRp.toFixed(3)}),s.jsx("td",{className:e.replace("pr-3",""),children:l.avgScore.toFixed(1)})]},l.id))})]})})}function g(i,o){if(!i.length)return[];const c=new Map;i.forEach(e=>{c.set(e.id,{id:e.id,name:e.name,played:0,wins:0,losses:0,ties:0,totalRp:0,totalScore:0,countedScoreMatches:0})});const t=(e,l)=>{const a=c.get(e);a&&(a.totalRp+=l)};for(const e of o){const l=c.get(e.red_alliance_id),a=c.get(e.blue_alliance_id);!l||!a||!(e.red_score!=null&&e.blue_score!=null)||(l.played+=1,a.played+=1,e.red_score>e.blue_score?(l.wins+=1,a.losses+=1,t(l.id,3)):e.red_score<e.blue_score?(a.wins+=1,l.losses+=1,t(a.id,3)):(l.ties+=1,a.ties+=1,t(l.id,1),t(a.id,1)),t(l.id,(e.red_coral_rp?1:0)+(e.red_auto_rp?1:0)+(e.red_barge_rp?1:0)),t(a.id,(e.blue_coral_rp?1:0)+(e.blue_auto_rp?1:0)+(e.blue_barge_rp?1:0)),l.totalScore+=e.red_score,l.countedScoreMatches+=1,a.totalScore+=e.blue_score,a.countedScoreMatches+=1)}const d=Array.from(c.values()).map(e=>{const l=e.played>0?e.totalRp/e.played:0,a=e.countedScoreMatches>0?e.totalScore/e.countedScoreMatches:0;return{...e,avgRp:l,avgScore:a}});function u(e,l){let a=0,n=0;for(const r of o)(r.red_alliance_id===e||r.blue_alliance_id===e)&&(r.red_alliance_id===l||r.blue_alliance_id===l)&&(r.red_score==null||r.blue_score==null||(r.red_score>r.blue_score?r.red_alliance_id===e?a++:r.red_alliance_id===l&&n++:r.blue_score>r.red_score&&(r.blue_alliance_id===e?a++:r.blue_alliance_id===l&&n++)));return{aWins:a,bWins:n}}return d.sort((e,l)=>{if(l.avgRp!==e.avgRp)return l.avgRp-e.avgRp;const{aWins:a,bWins:n}=u(e.id,l.id);return a!==n?n-a:l.avgScore!==e.avgScore?l.avgScore-e.avgScore:e.name.localeCompare(l.name)}),d.map((e,l)=>({id:e.id,name:e.name,played:e.played,wins:e.wins,losses:e.losses,ties:e.ties,avgRp:e.avgRp,avgScore:e.avgScore,rank:l+1}))}export{m as R,g as c};
