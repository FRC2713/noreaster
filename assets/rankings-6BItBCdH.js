import{c as p,j as e,r as f}from"./index-WvZcqDcg.js";import{B as b}from"./button-BjoTGIGe.js";import{C as g,c as j,a as v,b as N}from"./card-Dnt-Pamn.js";import{T as c,B as _}from"./badge-FhSNMlHL.js";import{U as w}from"./users-DMdOr_fs.js";import{T as y}from"./target-BijQUYg9.js";import{T as k}from"./trending-up-DkZQ6DMR.js";import{c as R}from"./rankings-2yAB9IBR.js";import{u as $}from"./use-alliances-polling-CV8EJDca.js";import{u as E}from"./use-matches-polling-BtT3E1gu.js";import"./useQuery-DTQ6mRtF.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],T=p("maximize",M);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],F=p("minimize",C);function z({rows:d,showWLT:o=!1,showRank:m=!0,size:l="sm",className:u}){const i=s=>s===1?"bg-yellow-500 text-yellow-900":s===2?"bg-gray-400 text-gray-900":s===3?"bg-amber-600 text-amber-900":s<=8?"bg-blue-500 text-blue-900":s<=16?"bg-green-500 text-green-900":"bg-muted text-muted-foreground",x=s=>s===1?e.jsx(c,{className:"w-4 h-4"}):s===2?e.jsx(c,{className:"w-4 h-4"}):s===3?e.jsx(c,{className:"w-4 h-4"}):null,h=(s,t,r)=>{const a=s+t+r;if(a===0)return"text-muted-foreground";const n=s/a;return n>=.7?"text-green-600":n>=.5?"text-yellow-600":"text-red-600"};return e.jsx("div",{className:`space-y-3 ${u}`,children:d.map((s,t)=>{const r=s.rank??t+1,a=r<=3,n=r<=8;return e.jsx(g,{className:`
              transition-all duration-200 hover:shadow-md hover:scale-[1.02] 
              ${a?"ring-2 ring-primary/20":""}
              ${n?"border-primary/30":"border-muted"}
              ${l==="lg"?"p-1":""}
            `,children:e.jsxs(j,{className:`p-4 ${l==="lg"?"py-6":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[m&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`
                        relative flex items-center justify-center w-10 h-10 rounded-full 
                        ${i(r)} font-bold text-sm
                        ${a?"ring-2 ring-primary/30":""}
                      `,children:[x(r),e.jsx("span",{className:x(r)?"sr-only":"",children:r})]}),a&&e.jsxs("div",{className:"flex items-center space-x-1",children:[r===1&&e.jsx(c,{className:"w-4 h-4 text-yellow-500"}),r===2&&e.jsx(c,{className:"w-4 h-4 text-gray-400"}),r===3&&e.jsx(c,{className:"w-4 h-4 text-amber-600"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:`font-semibold ${l==="lg"?"text-lg":"text-base"}`,children:s.name}),n&&e.jsx(_,{className:"text-xs",children:"Top 8"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.played," matches"]})]}),o&&e.jsxs("div",{className:`font-medium ${h(s.wins??0,s.losses??0,s.ties??0)}`,children:[s.wins??0,"-",s.losses??0,"-",s.ties??0]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Avg RP"})]}),e.jsx("div",{className:`font-bold ${l==="lg"?"text-lg":"text-base"} text-blue-600`,children:s.avgRp.toFixed(3)})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Avg Score"})]}),e.jsx("div",{className:`font-bold ${l==="lg"?"text-lg":"text-base"} text-green-600`,children:s.avgScore.toFixed(1)})]})]})]}),n&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Performance"}),e.jsxs("span",{children:[(s.avgRp/2*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${r===1?"bg-yellow-500":r===2?"bg-gray-400":r===3?"bg-amber-600":"bg-blue-500"}`,style:{width:`${Math.min(s.avgRp/2*100,100)}%`}})})]})]})},s.id)})})}function D(){const{alliances:d}=$(),{matches:o}=E(),m=f.useMemo(()=>{const s=o.map(t=>({id:t.id,red_alliance_id:t.red_alliance_id,blue_alliance_id:t.blue_alliance_id,red_score:t.red_score,blue_score:t.blue_score,red_coral_rp:!!t.red_coral_rp,red_auto_rp:!!t.red_auto_rp,red_barge_rp:!!t.red_barge_rp,blue_coral_rp:!!t.blue_coral_rp,blue_auto_rp:!!t.blue_auto_rp,blue_barge_rp:!!t.blue_barge_rp}));return R(d,s)},[d,o]),l=!1,u=null,[i,x]=f.useState(!!document.fullscreenElement);f.useEffect(()=>{const s=()=>x(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",s),()=>document.removeEventListener("fullscreenchange",s)},[]);function h(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}return e.jsx("div",{className:"min-h-dvh w-full p-6 md:p-8 lg:p-10 flex flex-col gap-6 overflow-hidden",children:e.jsxs(g,{children:[e.jsx(v,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-4xl md:text-5xl font-bold tracking-tight",children:"Rankings"}),e.jsx(b,{variant:"ghost",size:"icon",onClick:h,className:"rounded-full size-12","aria-label":i?"Exit full screen":"Enter full screen",title:i?"Exit full screen":"Enter full screen",children:i?e.jsx(F,{className:"size-6"}):e.jsx(T,{className:"size-6"})})]})}),e.jsxs(j,{className:"pt-0",children:[l,u,e.jsx("div",{className:"overflow-auto rounded-lg border",children:e.jsx(z,{rows:m,showWLT:!0,showRank:!0,size:"lg"})})]})]})})}export{D as default};
