import{j as e}from"./ui-vendor-CDBhOMS0.js";import{C as m,b as h,c as p,a as x,d as g}from"./card-DJYwy_Ja.js";import{B as N}from"./badge-DSDoCdJ3.js";import{s as _,u as v,B as u}from"./index-DiB4IOcY.js";import{u as j,b as y}from"./query-vendor-BivveeUn.js";import{U as M,c as S,S as C,q as w,r as R,l as f,s as b}from"./icons-vendor-Dor2AXrm.js";import"./react-vendor-CNeAGCso.js";import"./supabase-vendor-B8N91wlh.js";import"./utils-vendor-DCj5grse.js";function q(){const n=Math.floor(Math.random()*21),s=Math.floor(Math.random()*21),a=n+Math.floor(Math.random()*61)+20,i=s+Math.floor(Math.random()*61)+20,o=Math.random()<.3,t=Math.random()<.4,l=Math.random()<.25,r=Math.random()<.3,c=Math.random()<.4,d=Math.random()<.25;return{red_score:a,blue_score:i,red_auto_score:n,blue_auto_score:s,red_coral_rp:o,red_auto_rp:t,red_barge_rp:l,blue_coral_rp:r,blue_auto_rp:c,blue_barge_rp:d,is_completed:!0}}function P(){const n=j();return y({mutationFn:async({matchType:s})=>{const{data:a,error:i}=await _.from("matches").select("id, red_score, blue_score").eq("match_type",s).or("red_score.is.null,blue_score.is.null");if(i)throw i;if(!a||a.length===0)throw new Error(`No unscored ${s.replace("_"," ")} matches found`);let o=0;const t=[];for(const l of a)try{const r=q(),{error:c,data:d}=await _.from("matches").update({red_score:r.red_score,blue_score:r.blue_score,red_auto_score:r.red_auto_score,blue_auto_score:r.blue_auto_score,red_coral_rp:r.red_coral_rp,red_auto_rp:r.red_auto_rp,red_barge_rp:r.red_barge_rp,blue_coral_rp:r.blue_coral_rp,blue_auto_rp:r.blue_auto_rp,blue_barge_rp:r.blue_barge_rp,is_completed:r.is_completed}).eq("id",l.id).select();c?t.push(`Match ${l.id}: ${c.message}`):!d||d.length===0?t.push(`Match ${l.id}: No rows updated (match not found)`):o++}catch(r){t.push(`Match ${l.id}: ${r instanceof Error?r.message:"Unknown error"}`)}if(t.length>0&&o===0)throw new Error(`Failed to update any matches: ${t[0]}`);return t.length>0&&console.warn("Some matches failed to update:",t),{updatedCount:o,matchType:s,errors:t.length>0?t:void 0}},onSuccess:s=>(n.invalidateQueries({queryKey:["matches"]}),n.invalidateQueries({queryKey:["rankings"]}),n.invalidateQueries({queryKey:["alliances"]}),s)})}function k(){const n=j();return y({mutationFn:async({matchType:s})=>{const a={red_score:null,blue_score:null,red_auto_score:null,blue_auto_score:null,red_coral_rp:!1,red_auto_rp:!1,red_barge_rp:!1,blue_coral_rp:!1,blue_auto_rp:!1,blue_barge_rp:!1,is_completed:!1,...s==="playoff"&&{red_alliance_id:null,blue_alliance_id:null}},{error:i}=await _.from("matches").update(a).eq("match_type",s);if(i)throw i;return{matchType:s}},onSuccess:()=>{n.invalidateQueries({queryKey:["matches"]}),n.invalidateQueries({queryKey:["rankings"]}),n.invalidateQueries({queryKey:["alliances"]})}})}function U(){const{user:n}=v(),s=P(),a=k(),i=[{title:"User Management",description:"Manage user accounts and permissions",icon:M,status:"Coming Soon",statusVariant:"secondary"},{title:"Tournament Settings",description:"Configure tournament parameters and rules",icon:S,status:"Coming Soon",statusVariant:"secondary"},{title:"Security & Access",description:"Manage security settings and access controls",icon:C,status:"Coming Soon",statusVariant:"secondary"},{title:"Database Management",description:"View and manage database operations",icon:w,status:"Coming Soon",statusVariant:"secondary"},{title:"System Monitoring",description:"Monitor system health and performance",icon:R,status:"Coming Soon",statusVariant:"secondary"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome, ",n?.email,". Manage your tournament system from here."]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(o=>{const t=o.icon;return e.jsxs(m,{className:"transition-colors hover:bg-muted/50",children:[e.jsxs(h,{className:"flex flex-row items-center space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(p,{className:"text-lg",children:o.title})]}),e.jsx(N,{variant:o.statusVariant,className:"ml-auto",children:o.status})]}),e.jsx(x,{children:e.jsx(g,{children:o.description})})]},o.title)})}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Quick Stats"}),e.jsx(g,{children:"System overview and key metrics"})]}),e.jsx(x,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold",children:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"System Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx("p",{className:"text-sm font-medium",children:"Online"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Database"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx("p",{className:"text-sm font-medium",children:"Connected"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Version"}),e.jsx("p",{className:"text-sm font-medium",children:"v1.0.0"})]})]})})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Match Simulation"}),e.jsx(g,{children:"Simulate match results for testing and demonstration purposes"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(u,{onClick:()=>s.mutate({matchType:"round_robin"}),disabled:s.isPending,className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),s.isPending?"Simulating...":"Simulate Round Robin Matches"]}),e.jsxs(u,{variant:"outline",onClick:()=>a.mutate({matchType:"round_robin"}),disabled:a.isPending,className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),a.isPending?"Resetting...":"Reset Round Robin Matches"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(u,{onClick:()=>s.mutate({matchType:"playoff"}),disabled:s.isPending,className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),s.isPending?"Simulating..":"Simulate Playoff Matches"]}),e.jsxs(u,{variant:"outline",onClick:()=>a.mutate({matchType:"playoff"}),disabled:a.isPending,className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),a.isPending?"Resetting...":"Reset Playoff Matches"]})]}),s.isSuccess&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:["✓ Successfully simulated ",s.data.updatedCount," ",s.data.matchType.replace("_"," ")," matches"]})}),a.isSuccess&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["✓ Successfully reset"," ",a.data.matchType.replace("_"," ")," matches"]})}),(s.isError||a.isError)&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:["✗ Error:"," ",s.error?.message||a.error?.message]})})]})})]})]})}export{U as default};
