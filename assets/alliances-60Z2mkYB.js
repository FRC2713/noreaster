import{r as s,R as B,d as Ne,e as sn,f as fr,h as gr,j as c,i as it,k as Pe,P as _e,l as xe,m as vt,n as hr,o as pr,p as vr,q as br,t as mr,F as xr,D as yr,v as Dr,w as ae,a as wr,L as Cr,s as me}from"./index-WvZcqDcg.js";import{b as an,B as Ut}from"./button-BjoTGIGe.js";import{C as qt,c as Kt,a as Rr,b as Er}from"./card-Dnt-Pamn.js";import{u as Ar}from"./useQuery-DTQ6mRtF.js";import{u as st}from"./useMutation-CLm6HZOQ.js";import{u as ln}from"./use-alliances-polling-CV8EJDca.js";const Ge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function we(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function bt(e){return"nodeType"in e}function _(e){var t,n;return e?we(e)?e:bt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function mt(e){const{Document:t}=_(e);return e instanceof t}function Le(e){return we(e)?!1:e instanceof _(e).HTMLElement}function cn(e){return e instanceof _(e).SVGElement}function Ce(e){return e?we(e)?e.document:bt(e)?mt(e)?e:Le(e)||cn(e)?e.ownerDocument:document:document:document}const se=Ge?s.useLayoutEffect:s.useEffect;function xt(e){const t=s.useRef(e);return se(()=>{t.current=e}),s.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Sr(){const e=s.useRef(null),t=s.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=s.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Te(e,t){t===void 0&&(t=[e]);const n=s.useRef(e);return se(()=>{n.current!==e&&(n.current=e)},t),n}function ke(e,t){const n=s.useRef();return s.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function qe(e){const t=xt(e),n=s.useRef(null),r=s.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function dt(e){const t=s.useRef();return s.useEffect(()=>{t.current=e},[e]),t.current}let at={};function Ve(e,t){return s.useMemo(()=>{if(t)return t;const n=at[e]==null?0:at[e]+1;return at[e]=n,e+"-"+n},[e,t])}function un(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[u,d]of l){const h=i[u];h!=null&&(i[u]=h+e*d)}return i},{...t})}}const ye=un(1),Ke=un(-1);function Nr(e){return"clientX"in e&&"clientY"in e}function dn(e){if(!e)return!1;const{KeyboardEvent:t}=_(e.target);return t&&e instanceof t}function Mr(e){if(!e)return!1;const{TouchEvent:t}=_(e.target);return t&&e instanceof t}function ft(e){if(Mr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Nr(e)?{x:e.clientX,y:e.clientY}:null}const Yt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Or(e){return e.matches(Yt)?e:e.querySelector(Yt)}const jr={display:"none"};function Tr(e){let{id:t,value:n}=e;return B.createElement("div",{id:t,style:jr},n)}function Ir(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return B.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Pr(){const[e,t]=s.useState("");return{announce:s.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const fn=s.createContext(null);function _r(e){const t=s.useContext(fn);s.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Lr(){const[e]=s.useState(()=>new Set),t=s.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[s.useCallback(r=>{let{type:o,event:i}=r;e.forEach(a=>{var l;return(l=a[o])==null?void 0:l.call(a,i)})},[e]),t]}const kr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$r={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Fr(e){let{announcements:t=$r,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=kr}=e;const{announce:i,announcement:a}=Pr(),l=Ve("DndLiveRegion"),[u,d]=s.useState(!1);if(s.useEffect(()=>{d(!0)},[]),_r(s.useMemo(()=>({onDragStart(g){let{active:m}=g;i(t.onDragStart({active:m}))},onDragMove(g){let{active:m,over:b}=g;t.onDragMove&&i(t.onDragMove({active:m,over:b}))},onDragOver(g){let{active:m,over:b}=g;i(t.onDragOver({active:m,over:b}))},onDragEnd(g){let{active:m,over:b}=g;i(t.onDragEnd({active:m,over:b}))},onDragCancel(g){let{active:m,over:b}=g;i(t.onDragCancel({active:m,over:b}))}}),[i,t])),!u)return null;const h=B.createElement(B.Fragment,null,B.createElement(Tr,{id:r,value:o.draggable}),B.createElement(Ir,{id:l,announcement:a}));return n?Ne.createPortal(h,n):h}var N;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(N||(N={}));function Ye(){}const q=Object.freeze({x:0,y:0});function zr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Br(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Wr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,l=i-n;if(r<o&&n<i){const u=t.width*t.height,d=e.width*e.height,h=a*l,g=h/(u+d-h);return Number(g.toFixed(4))}return 0}const gn=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const u=Wr(l,t);u>0&&o.push({id:a,data:{droppableContainer:i,value:u}})}}return o.sort(zr)};function Ur(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function hn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:q}function qr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const Kr=qr(1);function Yr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Xr(e,t,n){const r=Yr(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:l}=r,u=e.left-a-(1-o)*parseFloat(n),d=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?e.width/o:e.width,g=i?e.height/i:e.height;return{width:h,height:g,top:d,right:u+h,bottom:d+g,left:u}}const Hr={ignoreTransform:!1};function $e(e,t){t===void 0&&(t=Hr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=_(e).getComputedStyle(e);d&&(n=Xr(n,d,h))}const{top:r,left:o,width:i,height:a,bottom:l,right:u}=n;return{top:r,left:o,width:i,height:a,bottom:l,right:u}}function Xt(e){return $e(e,{ignoreTransform:!0})}function Gr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Vr(e,t){return t===void 0&&(t=_(e).getComputedStyle(e)),t.position==="fixed"}function Qr(e,t){t===void 0&&(t=_(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function yt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(mt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Le(o)||cn(o)||n.includes(o))return n;const i=_(e).getComputedStyle(o);return o!==e&&Qr(o,i)&&n.push(o),Vr(o,i)?n:r(o.parentNode)}return e?r(e):n}function pn(e){const[t]=yt(e,1);return t??null}function lt(e){return!Ge||!e?null:we(e)?e:bt(e)?mt(e)||e===Ce(e).scrollingElement?window:Le(e)?e:null:null}function vn(e){return we(e)?e.scrollX:e.scrollLeft}function bn(e){return we(e)?e.scrollY:e.scrollTop}function gt(e){return{x:vn(e),y:bn(e)}}var j;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(j||(j={}));function mn(e){return!Ge||!e?!1:e===document.scrollingElement}function xn(e){const t={x:0,y:0},n=mn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const Jr={x:.2,y:.2};function Zr(e,t,n,r,o){let{top:i,left:a,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=Jr);const{isTop:d,isBottom:h,isLeft:g,isRight:m}=xn(e),b={x:0,y:0},E={x:0,y:0},f={height:t.height*o.y,width:t.width*o.x};return!d&&i<=t.top+f.height?(b.y=j.Backward,E.y=r*Math.abs((t.top+f.height-i)/f.height)):!h&&u>=t.bottom-f.height&&(b.y=j.Forward,E.y=r*Math.abs((t.bottom-f.height-u)/f.height)),!m&&l>=t.right-f.width?(b.x=j.Forward,E.x=r*Math.abs((t.right-f.width-l)/f.width)):!g&&a<=t.left+f.width&&(b.x=j.Backward,E.x=r*Math.abs((t.left+f.width-a)/f.width)),{direction:b,speed:E}}function eo(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function yn(e){return e.reduce((t,n)=>ye(t,gt(n)),q)}function to(e){return e.reduce((t,n)=>t+vn(n),0)}function no(e){return e.reduce((t,n)=>t+bn(n),0)}function ro(e,t){if(t===void 0&&(t=$e),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);pn(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const oo=[["x",["left","right"],to],["y",["top","bottom"],no]];class Dt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=yt(n),o=yn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,l]of oo)for(const u of a)Object.defineProperty(this,u,{get:()=>{const d=l(r),h=o[i]-d;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Me{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function io(e){const{EventTarget:t}=_(e);return e instanceof t?e:Ce(e)}function ct(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var z;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(z||(z={}));function Ht(e){e.preventDefault()}function so(e){e.stopPropagation()}var R;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(R||(R={}));const Dn={start:[R.Space,R.Enter],cancel:[R.Esc],end:[R.Space,R.Enter,R.Tab]},ao=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case R.Right:return{...n,x:n.x+25};case R.Left:return{...n,x:n.x-25};case R.Down:return{...n,y:n.y+25};case R.Up:return{...n,y:n.y-25}}};class wn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Me(Ce(n)),this.windowListeners=new Me(_(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(z.Resize,this.handleCancel),this.windowListeners.add(z.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(z.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ro(r),n(q)}handleKeyDown(t){if(dn(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:i=Dn,coordinateGetter:a=ao,scrollBehavior:l="smooth"}=o,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:q;this.referenceCoordinates||(this.referenceCoordinates=h);const g=a(t,{active:n,context:r.current,currentCoordinates:h});if(g){const m=Ke(g,h),b={x:0,y:0},{scrollableAncestors:E}=r.current;for(const f of E){const p=t.code,{isTop:v,isRight:y,isLeft:x,isBottom:S,maxScroll:C,minScroll:A}=xn(f),w=eo(f),D={x:Math.min(p===R.Right?w.right-w.width/2:w.right,Math.max(p===R.Right?w.left:w.left+w.width/2,g.x)),y:Math.min(p===R.Down?w.bottom-w.height/2:w.bottom,Math.max(p===R.Down?w.top:w.top+w.height/2,g.y))},M=p===R.Right&&!y||p===R.Left&&!x,P=p===R.Down&&!S||p===R.Up&&!v;if(M&&D.x!==g.x){const O=f.scrollLeft+m.x,H=p===R.Right&&O<=C.x||p===R.Left&&O>=A.x;if(H&&!m.y){f.scrollTo({left:O,behavior:l});return}H?b.x=f.scrollLeft-O:b.x=p===R.Right?f.scrollLeft-C.x:f.scrollLeft-A.x,b.x&&f.scrollBy({left:-b.x,behavior:l});break}else if(P&&D.y!==g.y){const O=f.scrollTop+m.y,H=p===R.Down&&O<=C.y||p===R.Up&&O>=A.y;if(H&&!m.x){f.scrollTo({top:O,behavior:l});return}H?b.y=f.scrollTop-O:b.y=p===R.Down?f.scrollTop-C.y:f.scrollTop-A.y,b.y&&f.scrollBy({top:-b.y,behavior:l});break}}this.handleMove(t,ye(Ke(g,this.referenceCoordinates),b))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}wn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Dn,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Gt(e){return!!(e&&"distance"in e)}function Vt(e){return!!(e&&"delay"in e)}class wt{constructor(t,n,r){var o;r===void 0&&(r=io(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:a}=i;this.props=t,this.events=n,this.document=Ce(a),this.documentListeners=new Me(this.document),this.listeners=new Me(r),this.windowListeners=new Me(_(a)),this.initialCoordinates=(o=ft(i))!=null?o:q,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(z.Resize,this.handleCancel),this.windowListeners.add(z.DragStart,Ht),this.windowListeners.add(z.VisibilityChange,this.handleCancel),this.windowListeners.add(z.ContextMenu,Ht),this.documentListeners.add(z.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Gt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(z.Click,so,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(z.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!o)return;const u=(n=ft(t))!=null?n:q,d=Ke(o,u);if(!r&&l){if(Gt(l)){if(l.tolerance!=null&&ct(d,l.tolerance))return this.handleCancel();if(ct(d,l.distance))return this.handleStart()}if(Vt(l)&&ct(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===R.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const lo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Cn extends wt{constructor(t){const{event:n}=t,r=Ce(n.target);super(t,lo,r)}}Cn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const co={move:{name:"mousemove"},end:{name:"mouseup"}};var ht;(function(e){e[e.RightClick=2]="RightClick"})(ht||(ht={}));class uo extends wt{constructor(t){super(t,co,Ce(t.event.target))}}uo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===ht.RightClick?!1:(r?.({event:n}),!0)}}];const ut={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fo extends wt{constructor(t){super(t,ut)}static setup(){return window.addEventListener(ut.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ut.move.name,t)};function t(){}}}fo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var Oe;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Oe||(Oe={}));var Xe;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Xe||(Xe={}));function go(e){let{acceleration:t,activator:n=Oe.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:a=5,order:l=Xe.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:h,delta:g,threshold:m}=e;const b=po({delta:g,disabled:!i}),[E,f]=Sr(),p=s.useRef({x:0,y:0}),v=s.useRef({x:0,y:0}),y=s.useMemo(()=>{switch(n){case Oe.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Oe.DraggableRect:return o}},[n,o,u]),x=s.useRef(null),S=s.useCallback(()=>{const A=x.current;if(!A)return;const w=p.current.x*v.current.x,D=p.current.y*v.current.y;A.scrollBy(w,D)},[]),C=s.useMemo(()=>l===Xe.TreeOrder?[...d].reverse():d,[l,d]);s.useEffect(()=>{if(!i||!d.length||!y){f();return}for(const A of C){if(r?.(A)===!1)continue;const w=d.indexOf(A),D=h[w];if(!D)continue;const{direction:M,speed:P}=Zr(A,D,y,t,m);for(const O of["x","y"])b[O][M[O]]||(P[O]=0,M[O]=0);if(P.x>0||P.y>0){f(),x.current=A,E(S,a),p.current=P,v.current=M;return}}p.current={x:0,y:0},v.current={x:0,y:0},f()},[t,S,r,f,i,a,JSON.stringify(y),JSON.stringify(b),E,d,C,h,JSON.stringify(m)])}const ho={x:{[j.Backward]:!1,[j.Forward]:!1},y:{[j.Backward]:!1,[j.Forward]:!1}};function po(e){let{delta:t,disabled:n}=e;const r=dt(t);return ke(o=>{if(n||!r||!o)return ho;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[j.Backward]:o.x[j.Backward]||i.x===-1,[j.Forward]:o.x[j.Forward]||i.x===1},y:{[j.Backward]:o.y[j.Backward]||i.y===-1,[j.Forward]:o.y[j.Forward]||i.y===1}}},[n,t,r])}function vo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ke(o=>{var i;return t==null?null:(i=r??o)!=null?i:null},[r,t])}function bo(e,t){return s.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,i=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...i]},[]),[e,t])}var Ie;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ie||(Ie={}));var pt;(function(e){e.Optimized="optimized"})(pt||(pt={}));const Qt=new Map;function mo(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,a]=s.useState(null),{frequency:l,measure:u,strategy:d}=o,h=s.useRef(e),g=p(),m=Te(g),b=s.useCallback(function(v){v===void 0&&(v=[]),!m.current&&a(y=>y===null?v:y.concat(v.filter(x=>!y.includes(x))))},[m]),E=s.useRef(null),f=ke(v=>{if(g&&!n)return Qt;if(!v||v===Qt||h.current!==e||i!=null){const y=new Map;for(let x of e){if(!x)continue;if(i&&i.length>0&&!i.includes(x.id)&&x.rect.current){y.set(x.id,x.rect.current);continue}const S=x.node.current,C=S?new Dt(u(S),S):null;x.rect.current=C,C&&y.set(x.id,C)}return y}return v},[e,i,n,g,u]);return s.useEffect(()=>{h.current=e},[e]),s.useEffect(()=>{g||b()},[n,g]),s.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),s.useEffect(()=>{g||typeof l!="number"||E.current!==null||(E.current=setTimeout(()=>{b(),E.current=null},l))},[l,g,b,...r]),{droppableRects:f,measureDroppableContainers:b,measuringScheduled:i!=null};function p(){switch(d){case Ie.Always:return!1;case Ie.BeforeDragging:return n;default:return!n}}}function Rn(e,t){return ke(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xo(e,t){return Rn(e,t)}function yo(e){let{callback:t,disabled:n}=e;const r=xt(t),o=s.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return s.useEffect(()=>()=>o?.disconnect(),[o]),o}function Qe(e){let{callback:t,disabled:n}=e;const r=xt(t),o=s.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return s.useEffect(()=>()=>o?.disconnect(),[o]),o}function Do(e){return new Dt($e(e),e)}function Jt(e,t,n){t===void 0&&(t=Do);const[r,o]=s.useState(null);function i(){o(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const a=yo({callback(u){if(e)for(const d of u){const{type:h,target:g}=d;if(h==="childList"&&g instanceof HTMLElement&&g.contains(e)){i();break}}}}),l=Qe({callback:i});return se(()=>{i(),e?(l?.observe(e),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[e]),r}function wo(e){const t=Rn(e);return hn(e,t)}const Zt=[];function Co(e){const t=s.useRef(e),n=ke(r=>e?r&&r!==Zt&&e&&t.current&&e.parentNode===t.current.parentNode?r:yt(e):Zt,[e]);return s.useEffect(()=>{t.current=e},[e]),n}function Ro(e){const[t,n]=s.useState(null),r=s.useRef(e),o=s.useCallback(i=>{const a=lt(i.target);a&&n(l=>l?(l.set(a,gt(a)),new Map(l)):null)},[]);return s.useEffect(()=>{const i=r.current;if(e!==i){a(i);const l=e.map(u=>{const d=lt(u);return d?(d.addEventListener("scroll",o,{passive:!0}),[d,gt(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(i)};function a(l){l.forEach(u=>{const d=lt(u);d?.removeEventListener("scroll",o)})}},[o,e]),s.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>ye(i,a),q):yn(e):q,[e,t])}function en(e,t){t===void 0&&(t=[]);const n=s.useRef(null);return s.useEffect(()=>{n.current=null},t),s.useEffect(()=>{const r=e!==q;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ke(e,n.current):q}function Eo(e){s.useEffect(()=>{if(!Ge)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ao(e,t){return s.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:i}=r;return n[o]=a=>{i(a,t)},n},{}),[e,t])}function En(e){return s.useMemo(()=>e?Gr(e):null,[e])}const tn=[];function So(e,t){t===void 0&&(t=$e);const[n]=e,r=En(n?_(n):null),[o,i]=s.useState(tn);function a(){i(()=>e.length?e.map(u=>mn(u)?r:new Dt(t(u),u)):tn)}const l=Qe({callback:a});return se(()=>{l?.disconnect(),a(),e.forEach(u=>l?.observe(u))},[e]),o}function No(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Le(t)?t:e}function Mo(e){let{measure:t}=e;const[n,r]=s.useState(null),o=s.useCallback(d=>{for(const{target:h}of d)if(Le(h)){r(g=>{const m=t(h);return g?{...g,width:m.width,height:m.height}:m});break}},[t]),i=Qe({callback:o}),a=s.useCallback(d=>{const h=No(d);i?.disconnect(),h&&i?.observe(h),r(h?t(h):null)},[t,i]),[l,u]=qe(a);return s.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Oo=[{sensor:Cn,options:{}},{sensor:wn,options:{}}],jo={current:{}},Ue={draggable:{measure:Xt},droppable:{measure:Xt,strategy:Ie.WhileDragging,frequency:pt.Optimized},dragOverlay:{measure:$e}};class je extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const To={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new je,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ye},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ue,measureDroppableContainers:Ye,windowRect:null,measuringScheduled:!1},Io={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ye,draggableNodes:new Map,over:null,measureDroppableContainers:Ye},Je=s.createContext(Io),Po=s.createContext(To);function _o(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new je}}}function Lo(e,t){switch(t.type){case N.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case N.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case N.DragEnd:case N.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case N.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new je(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case N.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new je(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case N.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new je(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function ko(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=s.useContext(Je),i=dt(r),a=dt(n?.id);return s.useEffect(()=>{if(!t&&!r&&i&&a!=null){if(!dn(i)||document.activeElement===i.target)return;const l=o.get(a);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[u.current,d.current]){if(!h)continue;const g=Or(h);if(g){g.focus();break}}})}},[r,t,o,a,i]),null}function $o(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...r}),n):n}function Fo(e){return s.useMemo(()=>({draggable:{...Ue.draggable,...e?.draggable},droppable:{...Ue.droppable,...e?.droppable},dragOverlay:{...Ue.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function zo(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=s.useRef(!1),{x:a,y:l}=typeof o=="boolean"?{x:o,y:o}:o;se(()=>{if(!a&&!l||!t){i.current=!1;return}if(i.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const h=n(d),g=hn(h,r);if(a||(g.x=0),l||(g.y=0),i.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const m=pn(d);m&&m.scrollBy({top:g.y,left:g.x})}},[t,a,l,r,n])}const An=s.createContext({...q,scaleX:1,scaleY:1});var ie;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ie||(ie={}));const Bo=s.memo(function(t){var n,r,o,i;let{id:a,accessibility:l,autoScroll:u=!0,children:d,sensors:h=Oo,collisionDetection:g=gn,measuring:m,modifiers:b,...E}=t;const f=s.useReducer(Lo,void 0,_o),[p,v]=f,[y,x]=Lr(),[S,C]=s.useState(ie.Uninitialized),A=S===ie.Initialized,{draggable:{active:w,nodes:D,translate:M},droppable:{containers:P}}=p,O=w!=null?D.get(w):null,H=s.useRef({initial:null,translated:null}),G=s.useMemo(()=>{var I;return w!=null?{id:w,data:(I=O?.data)!=null?I:jo,rect:H}:null},[w,O]),Z=s.useRef(null),[At,St]=s.useState(null),[V,Nt]=s.useState(null),le=Te(E,Object.values(E)),et=Ve("DndDescribedBy",a),Mt=s.useMemo(()=>P.getEnabled(),[P]),ce=Fo(m),{droppableRects:ge,measureDroppableContainers:Fe,measuringScheduled:Ot}=mo(Mt,{dragging:A,dependencies:[M.x,M.y],config:ce.droppable}),W=vo(D,w),jt=s.useMemo(()=>V?ft(V):null,[V]),Tt=dr(),It=xo(W,ce.draggable.measure);zo({activeNode:w!=null?D.get(w):null,config:Tt.layoutShiftCompensation,initialRect:It,measure:ce.draggable.measure});const U=Jt(W,ce.draggable.measure,It),tt=Jt(W?W.parentElement:null),ue=s.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pt=P.getNodeFor((n=ue.current.over)==null?void 0:n.id),de=Mo({measure:ce.dragOverlay.measure}),ze=(r=de.nodeRef.current)!=null?r:W,he=A?(o=de.rect)!=null?o:U:null,_t=!!(de.nodeRef.current&&de.rect),Lt=wo(_t?null:U),nt=En(ze?_(ze):null),ee=Co(A?Pt??W:null),Be=So(ee),We=$o(b,{transform:{x:M.x-Lt.x,y:M.y-Lt.y,scaleX:1,scaleY:1},activatorEvent:V,active:G,activeNodeRect:U,containerNodeRect:tt,draggingNodeRect:he,over:ue.current.over,overlayNodeRect:de.rect,scrollableAncestors:ee,scrollableAncestorRects:Be,windowRect:nt}),kt=jt?ye(jt,M):null,$t=Ro(ee),or=en($t),ir=en($t,[U]),pe=ye(We,or),ve=he?Kr(he,We):null,Re=G&&ve?g({active:G,collisionRect:ve,droppableRects:ge,droppableContainers:Mt,pointerCoordinates:kt}):null,Ft=Br(Re,"id"),[te,zt]=s.useState(null),sr=_t?We:ye(We,ir),ar=Ur(sr,(i=te?.rect)!=null?i:null,U),rt=s.useRef(null),Bt=s.useCallback((I,L)=>{let{sensor:k,options:ne}=L;if(Z.current==null)return;const F=D.get(Z.current);if(!F)return;const $=I.nativeEvent,Y=new k({active:Z.current,activeNode:F,event:$,options:ne,context:ue,onAbort(T){if(!D.get(T))return;const{onDragAbort:X}=le.current,Q={id:T};X?.(Q),y({type:"onDragAbort",event:Q})},onPending(T,re,X,Q){if(!D.get(T))return;const{onDragPending:Ae}=le.current,oe={id:T,constraint:re,initialCoordinates:X,offset:Q};Ae?.(oe),y({type:"onDragPending",event:oe})},onStart(T){const re=Z.current;if(re==null)return;const X=D.get(re);if(!X)return;const{onDragStart:Q}=le.current,Ee={activatorEvent:$,active:{id:re,data:X.data,rect:H}};Ne.unstable_batchedUpdates(()=>{Q?.(Ee),C(ie.Initializing),v({type:N.DragStart,initialCoordinates:T,active:re}),y({type:"onDragStart",event:Ee}),St(rt.current),Nt($)})},onMove(T){v({type:N.DragMove,coordinates:T})},onEnd:be(N.DragEnd),onCancel:be(N.DragCancel)});rt.current=Y;function be(T){return async function(){const{active:X,collisions:Q,over:Ee,scrollAdjustedTranslate:Ae}=ue.current;let oe=null;if(X&&Ae){const{cancelDrop:Se}=le.current;oe={activatorEvent:$,active:X,collisions:Q,delta:Ae,over:Ee},T===N.DragEnd&&typeof Se=="function"&&await Promise.resolve(Se(oe))&&(T=N.DragCancel)}Z.current=null,Ne.unstable_batchedUpdates(()=>{v({type:T}),C(ie.Uninitialized),zt(null),St(null),Nt(null),rt.current=null;const Se=T===N.DragEnd?"onDragEnd":"onDragCancel";if(oe){const ot=le.current[Se];ot?.(oe),y({type:Se,event:oe})}})}}},[D]),lr=s.useCallback((I,L)=>(k,ne)=>{const F=k.nativeEvent,$=D.get(ne);if(Z.current!==null||!$||F.dndKit||F.defaultPrevented)return;const Y={active:$};I(k,L.options,Y)===!0&&(F.dndKit={capturedBy:L.sensor},Z.current=ne,Bt(k,L))},[D,Bt]),Wt=bo(h,lr);Eo(h),se(()=>{U&&S===ie.Initializing&&C(ie.Initialized)},[U,S]),s.useEffect(()=>{const{onDragMove:I}=le.current,{active:L,activatorEvent:k,collisions:ne,over:F}=ue.current;if(!L||!k)return;const $={active:L,activatorEvent:k,collisions:ne,delta:{x:pe.x,y:pe.y},over:F};Ne.unstable_batchedUpdates(()=>{I?.($),y({type:"onDragMove",event:$})})},[pe.x,pe.y]),s.useEffect(()=>{const{active:I,activatorEvent:L,collisions:k,droppableContainers:ne,scrollAdjustedTranslate:F}=ue.current;if(!I||Z.current==null||!L||!F)return;const{onDragOver:$}=le.current,Y=ne.get(Ft),be=Y&&Y.rect.current?{id:Y.id,rect:Y.rect.current,data:Y.data,disabled:Y.disabled}:null,T={active:I,activatorEvent:L,collisions:k,delta:{x:F.x,y:F.y},over:be};Ne.unstable_batchedUpdates(()=>{zt(be),$?.(T),y({type:"onDragOver",event:T})})},[Ft]),se(()=>{ue.current={activatorEvent:V,active:G,activeNode:W,collisionRect:ve,collisions:Re,droppableRects:ge,draggableNodes:D,draggingNode:ze,draggingNodeRect:he,droppableContainers:P,over:te,scrollableAncestors:ee,scrollAdjustedTranslate:pe},H.current={initial:he,translated:ve}},[G,W,Re,ve,D,ze,he,ge,P,te,ee,pe]),go({...Tt,delta:M,draggingRect:ve,pointerCoordinates:kt,scrollableAncestors:ee,scrollableAncestorRects:Be});const cr=s.useMemo(()=>({active:G,activeNode:W,activeNodeRect:U,activatorEvent:V,collisions:Re,containerNodeRect:tt,dragOverlay:de,draggableNodes:D,droppableContainers:P,droppableRects:ge,over:te,measureDroppableContainers:Fe,scrollableAncestors:ee,scrollableAncestorRects:Be,measuringConfiguration:ce,measuringScheduled:Ot,windowRect:nt}),[G,W,U,V,Re,tt,de,D,P,ge,te,Fe,ee,Be,ce,Ot,nt]),ur=s.useMemo(()=>({activatorEvent:V,activators:Wt,active:G,activeNodeRect:U,ariaDescribedById:{draggable:et},dispatch:v,draggableNodes:D,over:te,measureDroppableContainers:Fe}),[V,Wt,G,U,v,et,D,te,Fe]);return B.createElement(fn.Provider,{value:x},B.createElement(Je.Provider,{value:ur},B.createElement(Po.Provider,{value:cr},B.createElement(An.Provider,{value:ar},d)),B.createElement(ko,{disabled:l?.restoreFocus===!1})),B.createElement(Fr,{...l,hiddenTextDescribedById:et}));function dr(){const I=At?.autoScrollEnabled===!1,L=typeof u=="object"?u.enabled===!1:u===!1,k=A&&!I&&!L;return typeof u=="object"?{...u,enabled:k}:{enabled:k}}}),Wo=s.createContext(null),nn="button",Uo="Draggable";function qo(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=Ve(Uo),{activators:a,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:h,draggableNodes:g,over:m}=s.useContext(Je),{role:b=nn,roleDescription:E="draggable",tabIndex:f=0}=o??{},p=u?.id===t,v=s.useContext(p?An:Wo),[y,x]=qe(),[S,C]=qe(),A=Ao(a,t),w=Te(n);se(()=>(g.set(t,{id:t,key:i,node:y,activatorNode:S,data:w}),()=>{const M=g.get(t);M&&M.key===i&&g.delete(t)}),[g,t]);const D=s.useMemo(()=>({role:b,tabIndex:f,"aria-disabled":r,"aria-pressed":p&&b===nn?!0:void 0,"aria-roledescription":E,"aria-describedby":h.draggable}),[r,b,f,p,E,h.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:D,isDragging:p,listeners:r?void 0:A,node:y,over:m,setNodeRef:x,setActivatorNodeRef:C,transform:v}}const Ko="Droppable",Yo={timeout:25};function Xo(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=Ve(Ko),{active:a,dispatch:l,over:u,measureDroppableContainers:d}=s.useContext(Je),h=s.useRef({disabled:n}),g=s.useRef(!1),m=s.useRef(null),b=s.useRef(null),{disabled:E,updateMeasurementsFor:f,timeout:p}={...Yo,...o},v=Te(f??r),y=s.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{d(Array.isArray(v.current)?v.current:[v.current]),b.current=null},p)},[p]),x=Qe({callback:y,disabled:E||!a}),S=s.useCallback((D,M)=>{x&&(M&&(x.unobserve(M),g.current=!1),D&&x.observe(D))},[x]),[C,A]=qe(S),w=Te(t);return s.useEffect(()=>{!x||!C.current||(x.disconnect(),g.current=!1,x.observe(C.current))},[C,x]),s.useEffect(()=>(l({type:N.RegisterDroppable,element:{id:r,key:i,disabled:n,node:C,rect:m,data:w}}),()=>l({type:N.UnregisterDroppable,key:i,id:r})),[r]),s.useEffect(()=>{n!==h.current.disabled&&(l({type:N.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:m,isOver:u?.id===r,node:C,over:u,setNodeRef:A}}var Ze="Dialog",[Sn,Nn]=sn(Ze),[Ho,K]=Sn(Ze),Mn=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:a=!0}=e,l=s.useRef(null),u=s.useRef(null),[d,h]=gr({prop:r,defaultProp:o??!1,onChange:i,caller:Ze});return c.jsx(Ho,{scope:t,triggerRef:l,contentRef:u,contentId:it(),titleId:it(),descriptionId:it(),open:d,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(g=>!g),[h]),modal:a,children:n})};Mn.displayName=Ze;var On="DialogTrigger",jn=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=K(On,n),i=Pe(t,o.triggerRef);return c.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Et(o.open),...r,ref:i,onClick:xe(e.onClick,o.onOpenToggle)})});jn.displayName=On;var Ct="DialogPortal",[Go,Tn]=Sn(Ct,{forceMount:void 0}),In=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=K(Ct,t);return c.jsx(Go,{scope:t,forceMount:n,children:s.Children.map(r,a=>c.jsx(vt,{present:n||i.open,children:c.jsx(hr,{asChild:!0,container:o,children:a})}))})};In.displayName=Ct;var He="DialogOverlay",Pn=s.forwardRef((e,t)=>{const n=Tn(He,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=K(He,e.__scopeDialog);return i.modal?c.jsx(vt,{present:r||i.open,children:c.jsx(Qo,{...o,ref:t})}):null});Pn.displayName=He;var Vo=br("DialogOverlay.RemoveScroll"),Qo=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=K(He,n);return c.jsx(vr,{as:Vo,allowPinchZoom:!0,shards:[o.contentRef],children:c.jsx(_e.div,{"data-state":Et(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),fe="DialogContent",_n=s.forwardRef((e,t)=>{const n=Tn(fe,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=K(fe,e.__scopeDialog);return c.jsx(vt,{present:r||i.open,children:i.modal?c.jsx(Jo,{...o,ref:t}):c.jsx(Zo,{...o,ref:t})})});_n.displayName=fe;var Jo=s.forwardRef((e,t)=>{const n=K(fe,e.__scopeDialog),r=s.useRef(null),o=Pe(t,n.contentRef,r);return s.useEffect(()=>{const i=r.current;if(i)return pr(i)},[]),c.jsx(Ln,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:xe(e.onFocusOutside,i=>i.preventDefault())})}),Zo=s.forwardRef((e,t)=>{const n=K(fe,e.__scopeDialog),r=s.useRef(!1),o=s.useRef(!1);return c.jsx(Ln,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=i.target;n.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Ln=s.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...a}=e,l=K(fe,n),u=s.useRef(null),d=Pe(t,u);return mr(),c.jsxs(c.Fragment,{children:[c.jsx(xr,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:c.jsx(yr,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Et(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(ti,{titleId:l.titleId}),c.jsx(ri,{contentRef:u,descriptionId:l.descriptionId})]})]})}),Rt="DialogTitle",kn=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=K(Rt,n);return c.jsx(_e.h2,{id:o.titleId,...r,ref:t})});kn.displayName=Rt;var $n="DialogDescription",Fn=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=K($n,n);return c.jsx(_e.p,{id:o.descriptionId,...r,ref:t})});Fn.displayName=$n;var zn="DialogClose",Bn=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=K(zn,n);return c.jsx(_e.button,{type:"button",...r,ref:t,onClick:xe(e.onClick,()=>o.onOpenChange(!1))})});Bn.displayName=zn;function Et(e){return e?"open":"closed"}var Wn="DialogTitleWarning",[ei,Un]=fr(Wn,{contentName:fe,titleName:Rt,docsSlug:"dialog"}),ti=({titleId:e})=>{const t=Un(Wn),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return s.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ni="DialogDescriptionWarning",ri=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Un(ni).contentName}}.`;return s.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},oi=Mn,ii=jn,si=In,ai=Pn,li=_n,ci=kn,ui=Fn,qn=Bn,Kn="AlertDialog",[di,Xi]=sn(Kn,[Nn]),J=Nn(),Yn=e=>{const{__scopeAlertDialog:t,...n}=e,r=J(t);return c.jsx(oi,{...r,...n,modal:!0})};Yn.displayName=Kn;var fi="AlertDialogTrigger",Xn=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=J(n);return c.jsx(ii,{...o,...r,ref:t})});Xn.displayName=fi;var gi="AlertDialogPortal",Hn=e=>{const{__scopeAlertDialog:t,...n}=e,r=J(t);return c.jsx(si,{...r,...n})};Hn.displayName=gi;var hi="AlertDialogOverlay",Gn=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=J(n);return c.jsx(ai,{...o,...r,ref:t})});Gn.displayName=hi;var De="AlertDialogContent",[pi,vi]=di(De),bi=Dr("AlertDialogContent"),Vn=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,i=J(n),a=s.useRef(null),l=Pe(t,a),u=s.useRef(null);return c.jsx(ei,{contentName:De,titleName:Qn,docsSlug:"alert-dialog",children:c.jsx(pi,{scope:n,cancelRef:u,children:c.jsxs(li,{role:"alertdialog",...i,...o,ref:l,onOpenAutoFocus:xe(o.onOpenAutoFocus,d=>{d.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[c.jsx(bi,{children:r}),c.jsx(xi,{contentRef:a})]})})})});Vn.displayName=De;var Qn="AlertDialogTitle",Jn=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=J(n);return c.jsx(ci,{...o,...r,ref:t})});Jn.displayName=Qn;var Zn="AlertDialogDescription",er=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=J(n);return c.jsx(ui,{...o,...r,ref:t})});er.displayName=Zn;var mi="AlertDialogAction",tr=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=J(n);return c.jsx(qn,{...o,...r,ref:t})});tr.displayName=mi;var nr="AlertDialogCancel",rr=s.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=vi(nr,n),i=J(n),a=Pe(t,o);return c.jsx(qn,{...i,...r,ref:a})});rr.displayName=nr;var xi=({contentRef:e})=>{const t=`\`${De}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${De}\` by passing a \`${Zn}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${De}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},yi=Yn,Di=Xn,wi=Hn,Ci=Gn,Ri=Vn,Ei=tr,Ai=rr,Si=Jn,Ni=er;function Mi({...e}){return c.jsx(yi,{"data-slot":"alert-dialog",...e})}function Oi({...e}){return c.jsx(Di,{"data-slot":"alert-dialog-trigger",...e})}function ji({...e}){return c.jsx(wi,{"data-slot":"alert-dialog-portal",...e})}function Ti({className:e,...t}){return c.jsx(Ci,{"data-slot":"alert-dialog-overlay",className:ae("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ii({className:e,...t}){return c.jsxs(ji,{children:[c.jsx(Ti,{}),c.jsx(Ri,{"data-slot":"alert-dialog-content",className:ae("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function Pi({className:e,...t}){return c.jsx("div",{"data-slot":"alert-dialog-header",className:ae("flex flex-col gap-2 text-center sm:text-left",e),...t})}function _i({className:e,...t}){return c.jsx("div",{"data-slot":"alert-dialog-footer",className:ae("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Li({className:e,...t}){return c.jsx(Si,{"data-slot":"alert-dialog-title",className:ae("text-lg font-semibold",e),...t})}function ki({className:e,...t}){return c.jsx(Ni,{"data-slot":"alert-dialog-description",className:ae("text-muted-foreground text-sm",e),...t})}function $i({className:e,...t}){return c.jsx(Ei,{className:ae(an(),e),...t})}function Fi({className:e,...t}){return c.jsx(Ai,{className:ae(an({variant:"outline"}),e),...t})}function zi(){const{lastUpdated:e,isLoading:t,error:n}=ln();return n?c.jsxs("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:["Error: ",n]}):t?c.jsx("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Updating..."}):e?c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last updated: ",e.toLocaleTimeString()]}):null}function rn({id:e,className:t,children:n}){const{setNodeRef:r,isOver:o}=Xo({id:e});return c.jsx("div",{ref:r,className:`${t??""} ${o?"ring-2 ring-primary":""}`.trim(),children:n})}function on({team:e}){const{attributes:t,listeners:n,setNodeRef:r,transform:o,isDragging:i}=qo({id:`team:${e.id}`}),a=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`}:{};return c.jsx("div",{ref:r,style:a,...n,...t,className:`cursor-grab active:cursor-grabbing select-none border rounded-md p-2 bg-background hover:bg-accent ${i?"opacity-70":""}`,title:`${e.number} ${e.name}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"font-semibold leading-tight",children:e.number}),c.jsx("div",{className:"text-xs text-muted-foreground truncate",children:e.name})]})})}function Hi(){const{alliances:e,teams:t,isLoading:n,error:r}=ln(),o=wr(),{data:i}=Ar({queryKey:["auth","user"],queryFn:async()=>{const{data:{user:f}}=await me.auth.getUser();return{user:f}}}),a=i?.user,l=t.filter(f=>!new Set(e.flatMap(v=>v.teams.filter(Boolean).map(y=>y.id))).has(f.id)),u=st({mutationFn:async f=>{const{data:p,error:v}=await me.from("alliances").insert({name:f}).select("id, name, created_at").single();if(v)throw v;return p},onSuccess:()=>{o.invalidateQueries({queryKey:["alliances","polling"]})}}),d=st({mutationFn:async f=>{await me.from("alliance_teams").delete().eq("alliance_id",f);const{error:p}=await me.from("alliances").delete().eq("id",f);if(p)throw p;return f},onSuccess:()=>{o.invalidateQueries({queryKey:["alliances","polling"]}),o.invalidateQueries({queryKey:["alliance_teams","polling"]})}}),h=st({mutationFn:async f=>{const{teamId:p,allianceId:v,slot:y}=f;if(await me.from("alliance_teams").delete().eq("team_id",p),v&&y){const{error:x}=await me.from("alliance_teams").insert({alliance_id:v,team_id:p,slot:y});if(x)throw x}},onSuccess:()=>{o.invalidateQueries({queryKey:["alliance_teams","polling"]})}});function g(){const f=`Alliance ${e.length+1}`;u.mutate(f)}function m(f){d.mutate(f)}function b(f,p,v){h.mutate({teamId:f,allianceId:p,slot:v})}function E(f){const p=f.active?.id??"",v=f.over?.id??"";if(!p||!p.startsWith("team:"))return;const y=p.slice(5);if(v){if(v==="available"){b(y,null,null);return}if(v.startsWith("alliance:")){const x=v.split(":"),S=x[1],C=Number(x[3]??"0");if(!S||!(C>=1&&C<=4))return;b(y,S,C);return}}}return n?c.jsx("p",{children:"Loading alliances..."}):r?c.jsxs("p",{className:"text-red-600",children:["Error: ",r]}):c.jsx(Bo,{onDragEnd:E,collisionDetection:gn,children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Teams"}),c.jsx(zi,{})]}),c.jsx(qt,{children:c.jsx(Kt,{className:"p-3",children:c.jsx(rn,{id:"available",className:"min-h-[200px] rounded-md border p-3",children:c.jsxs("div",{className:"grid gap-3",children:[l.map(f=>c.jsx(on,{team:f},f.id)),l.length===0&&c.jsx("div",{className:"text-sm text-muted-foreground",children:"All teams are assigned."})]})})})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Alliances"}),a&&c.jsx(Ut,{onClick:g,children:"New Alliance"})]}),c.jsxs("div",{className:"grid gap-4",children:[e.length===0&&c.jsx("div",{className:"text-sm text-muted-foreground",children:"No alliances yet. Create one to begin."}),e.map(f=>c.jsxs(qt,{children:[c.jsx(Rr,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx(Er,{className:"text-base",children:c.jsx(Cr,{to:`/alliances/${f.id}`,className:"hover:underline",children:f.name})}),a&&c.jsxs(Mi,{children:[c.jsx(Oi,{asChild:!0,children:c.jsx(Ut,{variant:"destructive",size:"sm",children:"Delete"})}),c.jsxs(Ii,{children:[c.jsxs(Pi,{children:[c.jsxs(Li,{children:["Delete ",f.name,"?"]}),c.jsx(ki,{children:"This will remove the alliance and unassign its teams. This action cannot be undone."})]}),c.jsxs(_i,{children:[c.jsx(Fi,{children:"Cancel"}),c.jsx($i,{onClick:()=>m(f.id),children:"Delete"})]})]})]})]})}),c.jsx(Kt,{className:"pt-0",children:c.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.teams.map((p,v)=>c.jsx(rn,{id:`alliance:${f.id}:slot:${v+1}`,className:"min-h-24 rounded-md border bg-muted/30 grid place-items-center",children:c.jsx("div",{className:"h-full w-full grid place-items-center",children:p?c.jsx(on,{team:p}):c.jsxs("div",{className:"h-full w-full grid place-items-center text-xs text-muted-foreground",children:["Slot ",v+1]})})},`${f.id}:${v+1}`))})})]},f.id))]})]})]})})}export{Hi as default};
