import{j as e}from"./ui-vendor-CDBhOMS0.js";import{r as n,L as i}from"./react-vendor-CNeAGCso.js";import{B as d,u as A}from"./index-BKCnwC9K.js";import{u as C}from"./use-alliances-polling-DUy60FBv.js";import{u as R}from"./use-rankings-polling-Dp_4j0C0.js";import{C as p,b as v,c as E,a as b}from"./card-C15IIjEe.js";import{B as f}from"./badge-BBSCdzdz.js";import{R as L}from"./robot-image-B0Vwlwju.js";import{g as u,U as k}from"./icons-vendor-Db1BlRWD.js";import{S as r}from"./skeleton-Cxzs5sQr.js";import"./supabase-vendor-B8N91wlh.js";import"./utils-vendor-DCj5grse.js";import"./query-vendor-BivveeUn.js";import"./use-smart-polling-B6JEXDeL.js";import"./use-matches-polling-Cf3FAkTn.js";const S=n.memo(function({alliance:s,ranking:a,showEditButton:o=!1}){const j=n.useMemo(()=>s.teams.map((t,x)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/30",children:[e.jsx("div",{className:"w-8 h-8 rounded overflow-hidden bg-background flex-shrink-0",children:t?e.jsx(L,{team:t,className:"w-full h-full"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-xs text-muted-foreground bg-background",children:"?"})}),e.jsx("div",{className:"min-w-0 flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-sm",children:t.number}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:t.name})]}):e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Slot ",x+1]})})]},`${s.id}-team-${x}`)),[s.teams,s.id]),m=n.useMemo(()=>a?e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:a.wins}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Wins"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:a.losses}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Losses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.ties}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Ties"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.avgScore.toFixed(0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Score"})]})]}):null,[a]);return e.jsxs(p,{className:"group hover:shadow-lg transition-shadow duration-200",children:[e.jsx(v,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-muted flex-shrink-0 ring-2 ring-border",children:s.emblem_image_url?e.jsx("img",{src:s.emblem_image_url,alt:`${s.name} emblem`,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-2xl font-bold text-muted-foreground bg-gradient-to-br from-primary/20 to-primary/10",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(E,{className:"text-xl group-hover:text-primary transition-colors duration-200",children:e.jsx(i,{to:`/alliances/${s.id}`,className:"hover:underline",children:s.name})}),a&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(f,{className:"text-xs bg-secondary text-secondary-foreground",children:["#",a.rank," Rank"]}),e.jsxs(f,{className:"text-xs border border-border bg-background",children:[a.avgRp.toFixed(1)," Avg RP"]})]})]})]}),o&&e.jsx(d,{variant:"ghost",size:"sm",asChild:!0,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(i,{to:`/alliances/${s.id}`,children:e.jsx(u,{className:"w-4 h-4"})})})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Team Roster"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j})]}),m,e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(d,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsx(i,{to:`/alliances/${s.id}`,children:"View Details"})}),o&&e.jsx(d,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsx(i,{to:"/alliances/edit",children:"Edit"})})]})]})]})});function _(){return e.jsxs(p,{className:"group hover:shadow-lg transition-shadow duration-200",children:[e.jsx(v,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-16 h-16 rounded-full"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(r,{className:"h-6 w-32 mb-2"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-16"}),e.jsx(r,{className:"h-5 w-20"})]})]})]}),e.jsx(r,{className:"w-8 h-8 rounded"})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"h-4 w-24 mb-3"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Array.from({length:4}).map((h,s)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/30",children:[e.jsx(r,{className:"w-8 h-8 rounded"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(r,{className:"h-4 w-12"}),e.jsx(r,{className:"h-3 w-20"})]})]},s))})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:Array.from({length:4}).map((h,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx(r,{className:"h-8 w-12 mx-auto mb-1"}),e.jsx(r,{className:"h-3 w-16 mx-auto"})]},s))}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(r,{className:"h-8 flex-1"}),e.jsx(r,{className:"h-8 flex-1"})]})]})]})}const G=n.memo(function(){const{user:s}=A(),{alliances:a,isLoading:o,error:j}=C(),{rankings:m,isLoading:t,error:x}=R(),w=o||t,g=j||x,N=n.useMemo(()=>{const l=new Map;return m.forEach(c=>{l.set(c.id,c)}),l},[m]),y=n.useMemo(()=>a.map(l=>({alliance:l,ranking:N.get(l.id)})),[a,N]);return w?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold",children:"Alliances"})}),s&&e.jsx("div",{className:"flex gap-3",children:e.jsx(d,{variant:"outline",asChild:!0,children:e.jsxs(i,{to:"/alliances/edit",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Edit Alliances"]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((l,c)=>e.jsx(_,{},c))})]}):g?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold",children:"Alliances"})})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-red-600 text-lg",children:["Error: ",g]}),e.jsx(d,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold",children:"Alliances"})}),s&&e.jsx("div",{className:"flex gap-3",children:e.jsx(d,{variant:"outline",asChild:!0,children:e.jsxs(i,{to:"/alliances/edit",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Edit Alliances"]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(k,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Alliances Yet"}),e.jsx("p",{className:"text-sm",children:"Create your first alliance to get started"})]}),s&&e.jsx(d,{asChild:!0,children:e.jsx(i,{to:"/alliances/edit",children:"Create Alliance"})})]}):y.map(({alliance:l,ranking:c})=>e.jsx(S,{alliance:l,ranking:c,showEditButton:!!s},l.id))})]})});export{G as default};
